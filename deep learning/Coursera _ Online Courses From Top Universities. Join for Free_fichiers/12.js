webpackJsonp([12],{32:function(module,exports,e){var t={},r=e(20),n=r(t);n.getLocale=function(){return"en"},module.exports=n},59:function(module,exports,e){var t,r;t=[e,exports,module,e(2)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(2),t=function(){function Element(e,t,r,n,o){var i=this;if(_classCallCheck(this,Element),this.doc=e,this.node=t,this.childNodes=_(t.childNodes).clone(),this.getTag()!==r)throw new Error("Invalid element "+this.getTag()+" for "+n);this.block=this.doc.createElement(n),_(o).each(function(e,t){i.setBlockAttribute(t,e)})}return Element.prototype.getTag=function getTag(){return this.node.tagName&&this.node.tagName.toLowerCase()},Element.prototype.setBlockAttribute=function setBlockAttribute(e,t){this.block.setAttribute(e,t)},Element}();module.exports=t}.apply(exports,t))&&(module.exports=r)},74:function(module,exports,e){var t={},r=e(20),n=r(t);n.getLocale=function(){return"en"},module.exports=n},89:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(80),e(429),e(431),e(103),e(430)],void 0!==(r=function(require,exports,module){"use strict";var _=e(2),t=e(80),r=e(429),n=e(431),o=e(103),i=e(430),a={initializeModal:function initializeModal(e,t){return r.getCourse(t.courseId).then(function(n){e.dispatch("INITIALIZED",{course:n.elements[0],noticeDismissed:r.isNoticeDismissed()}),t.hideAssets||a.getAssetsListByCourse(e,t)})},initializePage:function initializePage(e,t){e.dispatch("INITIALIZED",{noticeDismissed:r.isNoticeDismissed()}),a.getAssetsListByCourse(e,{courseId:t.courseId,fetchUrls:!0})},getAssetsListByCourse:function getAssetsListByCourse(e,n){var o=!n.nextPageIndex;return o&&e.dispatch("START_RECEIVING_ASSETS"),r.getAssetsListByCourse(n).then(function(r){var i=r.elements,a=r.paging.next;if(n.fetchUrls){var s=_(i).pluck("id");(new t).getAssetMap(s).then(function(t){e.dispatch("RECEIVED_ASSETS_LIST",{assets:i,nextPageIndex:a,assetMap:t,isInitialFetch:o})})}else e.dispatch("RECEIVED_ASSETS_LIST",{assets:i,nextPageIndex:a,isInitialFetch:o})}).catch()},selectAsset:function selectAsset(e,t){e.dispatch("SELECT_ASSET",t)},resetAssets:function resetAssets(e){e.dispatch("RESET_ASSETS")},openFileBrowser:function openFileBrowser(){n.openFileBrowser()},initializeUploader:function initializeUploader(e,t){var s=n.initialize(e,t),c=function onChange(t){n.startUpload(),a.updateUploadProgress(e,{state:o.IN_PROGRESS,files:t,progress:0})},u=function onProgress(t){a.updateUploadProgress(e,{state:o.IN_PROGRESS,progress:n.getProgressPercentage(t)})},l=function onAllComplete(n){if(_(n.error).isEmpty()&&!_(n.success).isEmpty()){var s=_(n.success).pluck("attemptId");r.getAssetsById(t.courseId,s).then(function(t){a.updateUploadProgress(e,{state:o.SUCCESS,progress:100,uploadedAssets:t.elements})})}else if(a.updateUploadProgress(e,{state:o.FAILED,progress:100,uploadAttempts:n}),!_(n.error).isEmpty()){var c={course_id:t.courseId,error:JSON.stringify(n)};t.assetType&&(c.asset_type=t.assetType),i.track("upload","failed",c)}};s.on("change",c),s.on("progress",u),s.on("all-complete",l)},updateUploadProgress:function updateUploadProgress(e,t){e.dispatch("UPLOAD_STATUS_UPDATED",t)},deleteAsset:function deleteAsset(e,t){var n=t.assetIds,o=t.courseId;r.deleteAssets(n).then(function(){a.getAssetsListByCourse(e,{courseId:o,fetchUrls:!0})})},dismissNotice:function dismissNotice(e){r.dismissNotice(),e.dispatch("NOTICE_MESSAGE_DISMISSED")}};module.exports=a}.apply(exports,t))&&(module.exports=r)},101:function(module,exports,e){var t,r;t=[e,exports,module,e(266)],void 0!==(r=function(require,exports,module){"use strict";module.exports=e(266).createStore}.apply(exports,t))&&(module.exports=r)},103:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";var e={IDLE:"idle",IN_PROGRESS:"inProgress",FAILED:"failed",SUCCESS:"success"};module.exports=e}.apply(exports,t))&&(module.exports=r)},104:function(module,exports,e){var t,r;t=[e,exports,module,e(1)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=(r=t=function(e){function AuthorEvaluatorSectionCaption(){return _classCallCheck(this,AuthorEvaluatorSectionCaption),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(AuthorEvaluatorSectionCaption,e),AuthorEvaluatorSectionCaption.prototype.render=function render(){return n.createElement("div",{className:"rc-AuthorEvaluatorSectionCaption caption-text color-secondary-text",style:this.props.style},this.props.children)},AuthorEvaluatorSectionCaption}(n.Component),t.propTypes={children:n.PropTypes.node,style:n.PropTypes.object},r);module.exports=o}.apply(exports,t))&&(module.exports=r)},105:function(module,exports,e){var t,r;t=[e,exports,module,e(1)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=(r=t=function(e){function StarterCodeEditorHeader(){return _classCallCheck(this,StarterCodeEditorHeader),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(StarterCodeEditorHeader,e),StarterCodeEditorHeader.prototype.render=function render(){return n.createElement("h3",{className:"rc-AuthorEvaluatorSectionHeader headline-2-text",style:this.props.style},this.props.children)},StarterCodeEditorHeader}(n.Component),t.propTypes={children:n.PropTypes.node,style:n.PropTypes.object},r);module.exports=o}.apply(exports,t))&&(module.exports=r)},106:function(module,exports,e){var t,r;t=[e,exports,module,e(73)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=e(73),r=function(){function EvaluatorTestCase(e){var r=e.name,n=e.expression,o=e.result,i=e.latestEvaluationId;_classCallCheck(this,EvaluatorTestCase),this.name=r,this.expression=n,this.result=null!=o?new t({id:"",result:o}):null,this.latestEvaluationId=i}return EvaluatorTestCase.prototype.toJSON=function toJSON(){var e=this.name,t=this.expression,r=this.latestEvaluationId,n=this.result&&this.result.getEvaluationResult();if(null==r)return{name:e,expression:t,result:n,latestEvaluationId:void 0};return{name:e,expression:t,result:n,latestEvaluationId:r}},EvaluatorTestCase}();module.exports=r}.apply(exports,t))&&(module.exports=r)},107:function(module,exports,e){var t,r;t=[e,exports,module,e(106),e(73)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),r=e(106),n=e(73),o=function(){function EvaluatorTestCaseRunner(e){var t=e.testCase,r=e.response;_classCallCheck(this,EvaluatorTestCaseRunner),this.testCase=t,this.response=r}return EvaluatorTestCaseRunner.prototype.copy=function copy(){var e=new r(this.testCase.toJSON());return new EvaluatorTestCaseRunner({response:this.response,testCase:e})},t(EvaluatorTestCaseRunner,[{key:"isPassed",get:function get(){return null!=this.response&&this.response.hasIdenticalOutput(this.testCase.result)}},{key:"isFailed",get:function get(){return null!=this.response&&!this.response.hasIdenticalOutput(this.testCase.result)}}]),EvaluatorTestCaseRunner}();module.exports=o}.apply(exports,t))&&(module.exports=r)},108:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(52)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(2),t=e(52),r=t.SUPPORTED_INLINE_BLOCKS,n={a:[{name:"href",required:!0},{name:"title"}]},o=function(){function InlineElement(e,t){var n=this;if(_classCallCheck(this,InlineElement),this.doc=e,this.node=t,this.tagName=this.getTagName(t),_(r).contains(this.tagName))this.childNodes=_(this.node.childNodes).clone(),this.block=this.doc.createElement(this.tagName),this.setBlockAttributes(),_(this.childNodes).each(function(e){var t=n.getTagName(e);if(t===n.tagName)throw new Error("Invalid nested inline element "+t);var r=new InlineElement(n.doc,e);n.block.appendChild(r.block)});else{if(3!==t.nodeType)throw new Error("Invalid inline element "+this.tagName);this.block=this.node}}return InlineElement.prototype.getTagName=function getTagName(e){return e.tagName&&e.tagName.toLowerCase()},InlineElement.prototype.setBlockAttributes=function setBlockAttributes(){var e=this,t=n[this.tagName];t&&_(t).each(function(t){var r=t.name,n=t.required,o=e.node.getAttribute(r);if(o)e.block.setAttribute(r,o);else if(n)throw new Error("Missing attribute "+r+" for "+e.tagName)})},InlineElement}();module.exports=o}.apply(exports,t))&&(module.exports=r)},111:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(25),e(178)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(25),i=e(178),a=(r=t=function(e){function CodeEditor(){var t,r,n;_classCallCheck(this,CodeEditor);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={aceEditor:null},n=t,_possibleConstructorReturn(r,n)}return _inherits(CodeEditor,e),CodeEditor.prototype.componentDidMount=function componentDidMount(){var e=this;i(function(t){var r=e.props,n=r.value,i=r.language,a=r.readOnly,s=r.onChange,c=o.findDOMNode(e.refs.editor),u=new t({el:c,value:n,language:i,readOnly:a,onChange:s});u.resizeHeight(),e.setState({aceEditor:u})})},CodeEditor.prototype.render=function render(){return n.createElement("div",{className:"rc-CodeEditor"},n.createElement("pre",{ref:"editor"}))},CodeEditor}(n.Component),t.propTypes={value:n.PropTypes.string,language:n.PropTypes.string,readOnly:n.PropTypes.bool,onChange:n.PropTypes.func},t.defaultProps={value:""},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},113:function(module,exports,e){var t={},r=e(20),n=r(t);n.getLocale=function(){return"en"},module.exports=n},142:function(module,exports,e){var t,r;t=[e,exports,module,e(219),e(106)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),r=e(219),n=e(106),o=function(){function AuthoringEvaluator(e){var t=e.id,o=e.draft,i=e.testCases,a=e.metadata;_classCallCheck(this,AuthoringEvaluator),this.id=t,this.metadata=a,this.testCases=i.map(function(e){return new n(e)}),this.draft=new r(o)}return AuthoringEvaluator.getUnversionedId=function getUnversionedId(e){return e.split("@")[0]},AuthoringEvaluator.prototype.toJSON=function toJSON(){var e=this.id,t=this.metadata;return{id:e,draft:this.draft.toJSON(),testCases:this.testCases.map(function(e){return e.toJSON()}),metadata:t}},t(AuthoringEvaluator,[{key:"versionedId",get:function get(){return this.id+"@"+this.metadata.publishedVersion}}]),AuthoringEvaluator}();module.exports=o}.apply(exports,t))&&(module.exports=r)},143:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function ExpressionHarness(e){var t=e.preamble;_classCallCheck(this,ExpressionHarness),this.preamble=t};module.exports=e}.apply(exports,t))&&(module.exports=r)},144:function(module,exports,e){var t,r;t=[e,exports,module,e(143)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(143),o="org.coursera.eval.evaluator.ReplHarness",i=(r=t=function(e){function ReplHarness(){return _classCallCheck(this,ReplHarness),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ReplHarness,e),ReplHarness.prototype.toJSON=function toJSON(){return _defineProperty({},"org.coursera.eval.evaluator.ReplHarness",{preamble:this.preamble})},ReplHarness}(n),t.ReplHarnessClassName="org.coursera.eval.evaluator.ReplHarness",r);module.exports=i}.apply(exports,t))&&(module.exports=r)},145:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function(){function StarterCode(e){var t=e.expression,r=void 0===t?"":t,n=e.language,o=void 0===n?"":n;_classCallCheck(this,StarterCode),this.expression=r,this.language=o}return StarterCode.prototype.toJSON=function toJSON(){return{expression:this.expression,language:this.language}},StarterCode}();module.exports=e}.apply(exports,t))&&(module.exports=r)},146:function(module,exports,e){var t,r;t=[e,exports,module,e(143)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(143),o=(r=t=function(e){function TestCaseHarness(t){var r=t.preamble,n=t.testCase;_classCallCheck(this,TestCaseHarness);var o=_possibleConstructorReturn(this,e.call(this,{preamble:r}));return o.testCase=n,o}return _inherits(TestCaseHarness,e),TestCaseHarness.prototype.toJSON=function toJSON(){return _defineProperty({},TestCaseHarness.TestCaseHarnessClassName,{preamble:this.preamble,testCase:this.testCase})},TestCaseHarness}(n),t.TestCaseHarnessClassName="org.coursera.eval.evaluator.TestCaseHarness",r);module.exports=o}.apply(exports,t))&&(module.exports=r)},150:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";var e={findBlockContainer:function findBlockContainer(e,t){for(var r=t;r&&!e.element.isBlockElement(r);)r=r.parentNode;return r},findSelectedElement:function findSelectedElement(t){var r=new t.api.Selection,n=r.range.endContainer;return e.findBlockContainer(t,n)},isEmptyParagraphBlock:function isEmptyParagraphBlock(t,r){var n=e.findBlockContainer(t,r),o=n.textContent.replace(/\n\r?/g,"");return"P"===n.nodeName&&""===o}};module.exports=e}.apply(exports,t))&&(module.exports=r)},151:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(413)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=e(1);e(413);var r=function(e){function BounceLoader(){return _classCallCheck(this,BounceLoader),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(BounceLoader,e),BounceLoader.prototype.render=function render(){return t.createElement("div",{className:"rc-BounceLoader"},t.createElement("div",{className:"spinner"},t.createElement("div",{className:"bounce1"}),t.createElement("div",{className:"bounce2"}),t.createElement("div",{className:"bounce3"})))},BounceLoader}(t.Component);module.exports=r}.apply(exports,t))&&(module.exports=r)},216:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(2),e(74),e(423),e(367)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),_=e(2),o=e(74),i=e(423);e(367);var a=(r=t=function(e){function AssetsList(){return _classCallCheck(this,AssetsList),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(AssetsList,e),AssetsList.prototype.render=function render(){var e=this.props,t=e.assets,r=e.selectedAssets,o=e.allowMultiple,a=e.emptyMessage;return n.createElement("ol",{className:"rc-AssetsList"},_(t).isEmpty()?n.createElement("li",{className:"empty-assets-message"},a):_(t).map(function(e){if(_(e.tags).find({name:"listed",value:"true"})){var t=AssetsList.isSelected(r,e);return n.createElement("li",{className:"asset-item",key:e.id},n.createElement(i,{asset:e,isSelected:t,allowMultiple:o}))}}))},AssetsList}(n.Component),t.propTypes={assets:n.PropTypes.array,selectedAssets:n.PropTypes.array,allowMultiple:n.PropTypes.bool,emptyMessage:n.PropTypes.string},t.defaultProps={emptyMessage:o("You haven’t uploaded any assets yet.")},t.isSelected=function(e,t){return!_(e).chain().where({id:t.id}).isEmpty().value()},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},217:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(111),e(105),e(104),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(111),i=e(105),a=e(104),s=e(32),c=(r=t=function(e){function PreambleEditor(){return _classCallCheck(this,PreambleEditor),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(PreambleEditor,e),PreambleEditor.prototype.render=function render(){var e=this.props,t=e.preamble,r=e.language,c=e.onChange;return n.createElement("div",{className:"rc-PreambleEditor"},n.createElement(i,{style:{paddingTop:20,paddingBottom:5}},s("Preamble Code")),n.createElement(a,{style:{paddingBottom:10}},s("This code will be executed as a pre-requisite before the learner's code gets executed.")),n.createElement(o,{value:t,language:r,onChange:c}))},PreambleEditor}(n.Component),t.propTypes={preamble:n.PropTypes.string.isRequired,language:n.PropTypes.string.isRequired,onChange:n.PropTypes.func.isRequired},r);module.exports=c}.apply(exports,t))&&(module.exports=r)},218:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(6),e(373)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(6);e(373);var i=(r=t=function(e){function TestCasePill(){var t,r,n;_classCallCheck(this,TestCasePill);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.onClick=function(){r.props.onClick&&r.props.onClick(r.props.index)},n=t,_possibleConstructorReturn(r,n)}return _inherits(TestCasePill,e),TestCasePill.prototype.render=function render(){var e=this.props,t=e.name,r=e.isSelected,i=e.isPassed,a=e.isFailed,s=o("rc-TestCasePill","nostyle","body-2-text",{selected:r,passed:i,failed:a,default:!i&&!a});return n.createElement("button",{className:s,onClick:this.onClick,disabled:!this.props.onClick},t||n.createElement("span",null," "))},TestCasePill}(n.Component),t.propTypes={onClick:n.PropTypes.func.isRequired,name:n.PropTypes.string.isRequired,index:n.PropTypes.number.isRequired,isSelected:n.PropTypes.bool.isRequired,isPassed:n.PropTypes.bool.isRequired,isFailed:n.PropTypes.bool.isRequired},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},219:function(module,exports,e){var t,r;t=[e,exports,module,e(144),e(146)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=e(144),r=e(146),n=t.ReplHarnessClassName,o=r.TestCaseHarnessClassName,i=function(){function EvaluatorDraft(e){var i=e.id,a=e.evaluator,s=e.isPublished;_classCallCheck(this,EvaluatorDraft),this.id=i,this.evaluator=a,this.isPublished=s,this.versionedEngineId=this.evaluator.versionedEngineId;var c=a.harness;null!=c[n]?this.harness=new t(c[n]):null!=c[o]&&(this.harness=new r(c[o]))}return EvaluatorDraft.prototype.toJSON=function toJSON(){var e=this.id,t=this.isPublished,r=this.versionedEngineId;return{id:e,evaluator:{harness:this.harness.toJSON(),versionedEngineId:r},isPublished:t}},EvaluatorDraft}();module.exports=i}.apply(exports,t))&&(module.exports=r)},220:function(module,exports,e){var t,r;t=[e,exports,module,e(4),e(10),e(24),e(142)],void 0!==(r=function(require,exports,module){"use strict";var t=e(4),r=e(10),n=e(24),o=e(142),i=new n("/api/authoringEvaluators.v1",{type:"rest"});module.exports={get:function get(e){return t(i.get(e)).then(function(e){return e.elements[0]})},create:function create(e){var r=e.courseId,n=e.evaluatorId,o=e.branchId,a=e.itemId;return t(i.post("",{data:{courseId:r,parentEvaluatorId:n,branchId:o,itemId:a}})).then(function(e){return e.elements[0]})},save:function save(e){var r=e.id;return t(i.put(r,{data:e.toJSON()})).then(function(e){return e.elements[0]})},publish:function publish(e){var n=e.id,o=e.metadata,a=(new r).addQueryParam("action","publish").addQueryParam("id",n);return t(i.post(a.toString(),{data:{metadata:o}}))}}}.apply(exports,t))&&(module.exports=r)},221:function(module,exports,e){var t,r;t=[e,exports,module,e(6),e(1),e(497),e(498),e(28),e(375)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o,i,a,s=e(6),c=e(1),u=e(497),l=e(498),p=e(28);e(375);var d=(r=t=function(e){function Title(){return _classCallCheck(this,Title),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(Title,e),Title.prototype.render=function render(){var e=c.createElement("div",null,this.props.icon&&c.createElement("div",{className:"icon-container"},this.props.icon),c.createElement("div",null,this.props.children));return c.createElement("div",{className:"rc-AuthorModalTitle"},c.createElement("div",{className:"authoring-modal-title"},this.props.leftAlignHeading&&c.createElement("div",{className:"align-left"},e),!this.props.leftAlignHeading&&c.createElement(u,{vertical:!0,alignItemsVerticalCenter:!0},e)))},Title}(c.Component),t.propTypes={icon:c.PropTypes.node,children:c.PropTypes.node,leftAlignHeading:c.PropTypes.bool},r),f=(o=n=function(e){function Footer(){return _classCallCheck(this,Footer),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(Footer,e),Footer.prototype.render=function render(){return c.createElement("div",{className:"rc-AuthorModalFooter"},c.createElement("div",{className:"footer-actions"},!this.props.hideCancel&&c.createElement(l,{secondary:!0,onClick:this.props.onCancel,disabled:this.props.disableCancel},this.props.cancelLabel),!this.props.hideConfirm&&c.createElement(l,{primary:!0,className:s({danger:this.props.useConfirmDanger}),onClick:this.props.onConfirm,disabled:this.props.disableConfirm},this.props.confirmLabel)))},Footer}(c.Component),n.propTypes={onConfirm:c.PropTypes.func,onCancel:c.PropTypes.func,hideCancel:c.PropTypes.bool,hideConfirm:c.PropTypes.bool,disableCancel:c.PropTypes.bool,disableConfirm:c.PropTypes.bool,confirmLabel:c.PropTypes.node,cancelLabel:c.PropTypes.node,useConfirmDanger:c.PropTypes.bool},n.defaultProps={confirmLabel:"Confirm",cancelLabel:"Cancel"},o),h=(a=i=function(e){function Modal(){return _classCallCheck(this,Modal),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(Modal,e),Modal.prototype.render=function render(){return c.createElement(p,{className:s("rc-AuthorModal",this.props.className),modalName:this.props.heading,handleClose:this.props.onCancel,"data-js":this.props["data-js"],allowClose:this.props.allowClose},this.props.withTitle&&c.createElement(d,{icon:this.props.titleIcon,leftAlignHeading:this.props.leftAlignHeading},this.props.heading),c.createElement("div",{className:"authoring-modal-body"},this.props.children),this.props.withFooter&&c.createElement(f,{onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,confirmLabel:this.props.confirmLabel,cancelLabel:this.props.cancelLabel,hideCancel:this.props.hideCancel,hideConfirm:this.props.hideConfirm,disableConfirm:this.props.disableConfirm,useConfirmDanger:this.props.useConfirmDanger}))},Modal}(c.Component),i.propTypes={className:c.PropTypes.string,allowClose:c.PropTypes.bool,heading:c.PropTypes.string.isRequired,titleIcon:c.PropTypes.node,leftAlignHeading:c.PropTypes.bool,withTitle:c.PropTypes.bool,withFooter:c.PropTypes.bool,cancelLabel:c.PropTypes.node,onCancel:c.PropTypes.func,hideConfirm:c.PropTypes.bool,hideCancel:c.PropTypes.bool,disableConfirm:c.PropTypes.bool,confirmLabel:c.PropTypes.node,onConfirm:c.PropTypes.func,useConfirmDanger:c.PropTypes.bool,children:c.PropTypes.node,"data-js":c.PropTypes.string},i.defaultProps={allowClose:!0,useConfirmDanger:!1},a);module.exports=h}.apply(exports,t))&&(module.exports=r)},222:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(52),e(458),e(453),e(455),e(457),e(452),e(454),e(229),e(456)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(2),t=e(52),r=e(458),n=e(453),o=e(455),i=e(457),a=e(452),s=e(454),c=e(229),u=c.DOMParser,l=e(456),p=l.OrderedList,d=l.UnorderedList,f=function getBlock(e,t){var c=null,u=t.tagName&&t.tagName.toLowerCase();if("#text"===t.nodeName&&""===t.nodeValue.trim())return;switch(u){case"p":c=new r(e,t);break;case"h1":c=new s(e,t,1);break;case"h2":c=new s(e,t,2);break;case"h3":c=new s(e,t,3);break;case"pre":c=new n(e,t);break;case"ol":c=new p(e,t);break;case"ul":c=new d(e,t);break;case"figure":c=new o(e,t);break;case"table":c=new i(e,t);break;case"div":if(-1===t.getAttribute("class").indexOf("cml-asset"))throw new Error('Unsupported HTML element "'+t+", "+u+'"');c=new a(e,t);break;case"parsererror":throw new Error("Unable to parse HTML: "+t.innerText);default:throw new Error('Unsupported HTML element "'+t+", "+u+'"')}return c},h=function(){function HTMLToCMLConverter(){_classCallCheck(this,HTMLToCMLConverter)}return HTMLToCMLConverter.prototype.toCML=function toCML(e,t){var r=new u,n=HTMLToCMLConverter.sanitizeHTML(e),o=r.parseFromString("<body>"+n+"</body>","application/xml"),i=o.childNodes[0].childNodes,a=o.createElement("wrapper");return _(i).each(function(e){var t=f(o,e);t&&a.appendChild(t.block)}),HTMLToCMLConverter.getStringifiedCML(a,t)},HTMLToCMLConverter.sanitizeHTML=function sanitizeHTML(e){return e.replace(/&nbsp;/gi," ").replace(/<br[\/]*>/g,"").replace(/target="_blank"/g,"").replace(/rel="noopener"/g,"").replace(/rel="noopener nofollow"/g,"").replace(/(<img("[^"]*"|[^\/">])*)>/g,"$1/>").replace(/(<source("[^"]*"|[^\/">])*)>/g,"$1/>")},HTMLToCMLConverter.getStringifiedCML=function getStringifiedCML(e,r){var n=t.getInnerContent(e);if(r)return"<co-content>"+n+"</co-content>";return n},HTMLToCMLConverter}();module.exports=h}.apply(exports,t))&&(module.exports=r)},239:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";module.exports={storeNames:{BRANCHES_STORE:"BranchesStore",SESSIONS_STORE:"SessionsStore",BRANCH_SELECTION_STORE:"BranchSelectionStore",COURSE_MATERIAL_STORE:"CourseMaterialStore"},branchStatus:{LIVE:"live",ARCHIVED:"archived",PENDING:"pending",NEW:"new",UPCOMING:"upcoming",CREATING:"creating"},ALL_BRANCHES:"ALL_BRANCHES"}}.apply(exports,t))&&(module.exports=r)},269:function(module,exports,e){var t={},r=e(20),n=r(t);n.getLocale=function(){return"en"},module.exports=n},274:function(module,exports,e){var t,r;t=[e,exports,module,e(517),e(513),e(543),e(538),e(530),e(528),e(152),e(417)],void 0!==(r=function(require,exports,module){"use strict";var t=e(517),r=e(513),n=e(543),o=e(538),i=e(530),a=e(528),s=e(152);e(417);var c={H1:{commandName:"h1",disabledTags:["table","div","figure"],tooltip:s("Large Heading"),plugin:function plugin(){return o(1)},tags:[{name:"h1"}]},H2:{commandName:"h2",disabledTags:["table","pre","figure"],tooltip:s("Medium Heading"),plugin:function plugin(){return o(2)},tags:[{name:"h2"}]},H3:{commandName:"h3",disabledTags:["table","pre","figure"],tooltip:s("Small Heading"),plugin:function plugin(){return o(3)},tags:[{name:"h3"}]},Bold:{commandName:"bold",disabledTags:["figure","pre"],tooltip:s("Bold"),tags:[{name:"b"},{name:"strong"}]},Italic:{commandName:"italic",disabledTags:["figure","pre"],tooltip:s("Italic"),tags:[{name:"i"},{name:"em"}]},Underline:{commandName:"underline",disabledTags:["figure","pre"],tooltip:s("Underline"),tags:[{name:"u"}]},Link:{commandName:"linkPrompt",disabledTags:["figure","pre"],tooltip:s("Insert link"),plugin:function plugin(){return i({filter:{regex:/((\.cloudfront\.net|courcdn2?.\w{2,3})\/.+(&|\?)(Expires|expiry)\=)/i,message:"You cannot link directly to a temporary URL."}})},tags:[{name:"a",value:{href:!0,title:!0}}]},OrderedList:{commandName:"insertOrderedList",disabledTags:["table","pre","figure"],tooltip:s("Numbered List"),tags:[{name:"ol"},{name:"li"}]},UnorderedList:{commandName:"insertUnorderedList",disabledTags:["table","pre","figure"],tooltip:s("Bulleted List"),tags:[{name:"ul"},{name:"li"}]},Image:{commandName:"imageUpload",disabledTags:["ol","ul","div","table"],tooltip:s("Image"),plugin:a,tags:[{name:"figure"},{name:"img",value:{src:!0,draggable:!0,"data-asset-id":!0}}]},Table:{commandName:"table",disabledTags:["div"],tooltip:s("Table"),plugin:n,tags:[{name:"table"},{name:"td"},{name:"tr"},{name:"th"}]},Code:{commandName:"code",disabledTags:["ol","ul","table","div"],tooltip:s("Code"),plugin:t,tags:[{name:"pre",value:{"data-language":!0,"data-evaluator-id":!0,contenteditable:!0}}]},Divider:{commandName:"divider"},Asset:{commandName:"asset",tooltip:s("Insert"),plugin:r,disabledTags:["ol","ul","div","table","figure"],tags:[{name:"div",value:{class:!0,contenteditable:!0,"data-id":!0,"data-url":!0,"data-type":!0,"data-name":!0,"data-extension":!0,"data-initialized":!0}},{name:"a",value:{href:!0,title:!0,class:!0}}]}};module.exports=c}.apply(exports,t))&&(module.exports=r)},275:function(module,exports,e){var t,r;t=[e,exports,module,e(539),e(542),e(537),e(536),e(541),e(540),e(533),e(515),e(531),e(532),e(516),e(416)],void 0!==(r=function(require,exports,module){"use strict";var t=e(539),r=e(542),n=e(537),o=e(536),i=e(541),a=e(540),s=e(533),c=e(515),u=e(531),l=e(532),p=e(516);e(416);var d={IntelligentUnlinkCommand:{id:0,run:t},SmartLists:{id:1,run:r},FormatterPlainTextConvertNewLinesToHtml:{id:2,run:n},SemanticElements:{id:3,run:o},Sanitizer:{id:4,run:i},Placeholder:{id:5,run:a},Toolbar:{id:6,run:s},ToolbarVisibility:{id:7,run:l},CMLFilterFormatter:{id:8,run:p},Autolink:{id:9,run:c},ShiftEnter:{id:10,run:u}};module.exports=d}.apply(exports,t))&&(module.exports=r)},277:function(module,exports,e){var t,r;t=[e,exports,module,e(6),e(1),e(387)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(6),o=e(1);e(387);var i=(r=t=function(e){function CourseRatingIcons(){var t,r,n;_classCallCheck(this,CourseRatingIcons);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={highlightValue:-1},r.handleMouseLeave=function(){r.setState({highlightValue:-1})},n=t,_possibleConstructorReturn(r,n)}return _inherits(CourseRatingIcons,e),CourseRatingIcons.prototype.handleMouseOver=function handleMouseOver(e){this.setState({highlightValue:e})},CourseRatingIcons.prototype.handleSelect=function handleSelect(e){this.setState({highlightValue:-1}),this.props.onSelect&&this.props.onSelect(e)},CourseRatingIcons.prototype.renderIcon=function renderIcon(e,t){var r=this,i=e<=this.state.highlightValue,a=this.state.highlightValue>-1,s=e%1!=0,c=n("c-course-rating-icon",{"cif-star":i||t&&!a&&!s,"cif-star-half-empty":!i&&t&&!a&&s,"cif-star-o":!i&&(!t||a),highlight:i});return o.createElement("i",{key:e,className:c,onMouseOver:!this.props.readOnly&&function(){return r.handleMouseOver(e)},onClick:function onClick(){return r.handleSelect(e)}})},CourseRatingIcons.prototype.render=function render(){var e=this,t=n("rc-CourseRatingIcons",this.props.size,{"read-only":this.props.readOnly}),r=CourseRatingIcons.getRatingDistribution(this.props.value);return o.createElement("div",{className:t,onMouseLeave:this.handleMouseLeave},r.map(function(t){var r=t.value,n=t.selected;return e.renderIcon(r,n)}))},CourseRatingIcons}(o.Component),t.propTypes={onSelect:o.PropTypes.func,readOnly:o.PropTypes.bool,value:o.PropTypes.number.isRequired,size:o.PropTypes.oneOf(["small","large"])},t.defaultProps={size:"small",readOnly:!0},t.getRatingDistribution=function(e){var t=.5,r=[],n=Math.round(2*e)/2;for(5!==e&&(n=Math.min(n,4.5));t<=n;){t%1!=0?t+.5>n?(r.push({value:t,selected:!0}),t+=1):t+=.5:(r.push({value:t,selected:!0}),t+=.5)}for(t%1!=0&&(t+=.5);t<=5;)r.push({value:t,selected:!1}),t+=1;return r},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},356:function(module,exports,e){var t=e(1);!function webpackUniversalModuleDefinition(t,r){module.exports=r(e(1),e(25))}(this,function(e,t){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var module=t[r]={exports:{},id:r,loaded:!1};return e[r].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="/",__webpack_require__(0)}([function(module,exports,e){"use strict";module.exports=e(1)},function(module,exports,e){"use strict";var t=e(2),r=e(3),n=e(4),o=t.createFactory(e(5)),i=e(20),a=e(21),s=e(3).unstable_renderSubtreeIntoContainer,c=e(9),u=n.canUseDOM?window.HTMLElement:{},l=n.canUseDOM?document.body:{appendChild:function appendChild(){}},p=t.createClass({displayName:"Modal",statics:{setAppElement:function setAppElement(e){l=i.setElement(e)},injectCSS:function injectCSS(){console.warn("React-Modal: injectCSS has been deprecated and no longer has any effect. It will be removed in a later version")}},propTypes:{isOpen:t.PropTypes.bool.isRequired,style:t.PropTypes.shape({content:t.PropTypes.object,overlay:t.PropTypes.object}),appElement:t.PropTypes.instanceOf(u),onAfterOpen:t.PropTypes.func,onRequestClose:t.PropTypes.func,closeTimeoutMS:t.PropTypes.number,ariaHideApp:t.PropTypes.bool,shouldCloseOnOverlayClick:t.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{isOpen:!1,ariaHideApp:!0,closeTimeoutMS:0,shouldCloseOnOverlayClick:!0}},componentDidMount:function componentDidMount(){this.node=document.createElement("div"),this.node.className="ReactModalPortal",l.appendChild(this.node),this.renderPortal(this.props)},componentWillReceiveProps:function componentWillReceiveProps(e){this.renderPortal(e)},componentWillUnmount:function componentWillUnmount(){r.unmountComponentAtNode(this.node),l.removeChild(this.node),a(document.body).remove("ReactModal__Body--open")},renderPortal:function renderPortal(e){e.isOpen?a(document.body).add("ReactModal__Body--open"):a(document.body).remove("ReactModal__Body--open"),e.ariaHideApp&&i.toggle(e.isOpen,e.appElement),this.portal=s(this,o(c({},e,{defaultStyles:p.defaultStyles})),this.node)},render:function render(){return t.DOM.noscript()}});p.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},module.exports=p},function(module,exports){module.exports=e},function(module,exports){module.exports=t},function(module,exports,e){var t;!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0!==(t=function(){return n}.call(exports,e,exports,module))&&(module.exports=t)}()},function(module,exports,e){"use strict";var t=e(2),r=t.DOM.div,n=e(6),o=e(8),i=e(9),a={overlay:{base:"ReactModal__Overlay",afterOpen:"ReactModal__Overlay--after-open",beforeClose:"ReactModal__Overlay--before-close"},content:{base:"ReactModal__Content",afterOpen:"ReactModal__Content--after-open",beforeClose:"ReactModal__Content--before-close"}},s=module.exports=t.createClass({displayName:"ModalPortal",getDefaultProps:function getDefaultProps(){return{style:{overlay:{},content:{}}}},getInitialState:function getInitialState(){return{afterOpen:!1,beforeClose:!1}},componentDidMount:function componentDidMount(){this.props.isOpen&&(this.setFocusAfterRender(!0),this.open())},componentWillUnmount:function componentWillUnmount(){clearTimeout(this.closeTimer)},componentWillReceiveProps:function componentWillReceiveProps(e){!this.props.isOpen&&e.isOpen?(this.setFocusAfterRender(!0),this.open()):this.props.isOpen&&!e.isOpen&&this.close()},componentDidUpdate:function componentDidUpdate(){this.focusAfterRender&&(this.focusContent(),this.setFocusAfterRender(!1))},setFocusAfterRender:function setFocusAfterRender(e){this.focusAfterRender=e},open:function open(){n.setupScopedFocus(this.node),n.markForFocusLater(),this.setState({isOpen:!0},function(){this.setState({afterOpen:!0}),this.props.isOpen&&this.props.onAfterOpen&&this.props.onAfterOpen()}.bind(this))},close:function close(){if(!this.ownerHandlesClose())return;this.props.closeTimeoutMS>0?this.closeWithTimeout():this.closeWithoutTimeout()},focusContent:function focusContent(){this.refs.content.focus()},closeWithTimeout:function closeWithTimeout(){this.setState({beforeClose:!0},function(){this.closeTimer=setTimeout(this.closeWithoutTimeout,this.props.closeTimeoutMS)}.bind(this))},closeWithoutTimeout:function closeWithoutTimeout(){this.setState({afterOpen:!1,beforeClose:!1},this.afterClose)},afterClose:function afterClose(){n.returnFocus(),n.teardownScopedFocus()},handleKeyDown:function handleKeyDown(e){9==e.keyCode&&o(this.refs.content,e),27==e.keyCode&&(e.preventDefault(),this.requestClose(e))},handleOverlayClick:function handleOverlayClick(e){for(var t=e.target;t;){if(t===this.refs.content)return;t=t.parentNode}this.props.shouldCloseOnOverlayClick&&(this.ownerHandlesClose()?this.requestClose(e):this.focusContent())},requestClose:function requestClose(e){this.ownerHandlesClose()&&this.props.onRequestClose(e)},ownerHandlesClose:function ownerHandlesClose(){return this.props.onRequestClose},shouldBeClosed:function shouldBeClosed(){return!this.props.isOpen&&!this.state.beforeClose},buildClassName:function buildClassName(e,t){var r=a[e].base;return this.state.afterOpen&&(r+=" "+a[e].afterOpen),this.state.beforeClose&&(r+=" "+a[e].beforeClose),t?r+" "+t:r},render:function render(){var e=this.props.className?{}:this.props.defaultStyles.content,t=this.props.overlayClassName?{}:this.props.defaultStyles.overlay;return this.shouldBeClosed()?r():r({ref:"overlay",className:this.buildClassName("overlay",this.props.overlayClassName),style:i({},t,this.props.style.overlay||{}),onClick:this.handleOverlayClick},r({ref:"content",style:i({},e,this.props.style.content||{}),className:this.buildClassName("content",this.props.className),tabIndex:"-1",onKeyDown:this.handleKeyDown},this.props.children))}})},function(module,exports,e){"use strict";function handleBlur(e){o=!0}function handleFocus(e){if(o){if(o=!1,!r)return;setTimeout(function(){if(r.contains(document.activeElement))return;(t(r)[0]||r).focus()},0)}}var t=e(7),r=null,n=null,o=!1;exports.markForFocusLater=function(){n=document.activeElement},exports.returnFocus=function(){try{n.focus()}catch(e){console.warn("You tried to return focus to "+n+" but it is not in the DOM anymore")}n=null},exports.setupScopedFocus=function(e){r=e,window.addEventListener?(window.addEventListener("blur",handleBlur,!1),document.addEventListener("focus",handleFocus,!0)):(window.attachEvent("onBlur",handleBlur),document.attachEvent("onFocus",handleFocus))},exports.teardownScopedFocus=function(){r=null,window.addEventListener?(window.removeEventListener("blur",handleBlur),document.removeEventListener("focus",handleFocus)):(window.detachEvent("onBlur",handleBlur),document.detachEvent("onFocus",handleFocus))}},function(module,exports){"use strict";function focusable(e,t){var r=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||t:t)&&visible(e)}function hidden(e){return e.offsetWidth<=0&&e.offsetHeight<=0||"none"===e.style.display}function visible(e){for(;e&&e!==document.body;){if(hidden(e))return!1;e=e.parentNode}return!0}function tabbable(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&focusable(e,!r)}function findTabbableDescendants(e){return[].slice.call(e.querySelectorAll("*"),0).filter(function(e){return tabbable(e)})}module.exports=findTabbableDescendants},function(module,exports,e){"use strict";var t=e(7);module.exports=function(e,r){var n=t(e);if(!n.length)return void r.preventDefault();if(n[r.shiftKey?0:n.length-1]!==document.activeElement&&e!==document.activeElement)return;r.preventDefault(),n[r.shiftKey?n.length-1:0].focus()}},function(module,exports,e){function assignWith(e,t,r){for(var o=-1,i=n(t),a=i.length;++o<a;){var s=i[o],c=e[s],u=r(c,t[s],s,e,t);(u===u?u===c:c!==c)&&(void 0!==c||s in e)||(e[s]=u)}return e}var t=e(10),r=e(16),n=e(12),o=r(function(e,r,n){return n?assignWith(e,r,n):t(e,r)});module.exports=o},function(module,exports,e){function baseAssign(e,n){return null==n?e:t(n,r(n),e)}var t=e(11),r=e(12);module.exports=baseAssign},function(module,exports){function baseCopy(e,t,r){r||(r={});for(var n=-1,o=t.length;++n<o;){var i=t[n];r[i]=e[i]}return r}module.exports=baseCopy},function(module,exports,e){function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(u(e))}function isIndex(e,t){return e="number"==typeof e||o.test(e)?+e:-1,t=null==t?c:t,e>-1&&e%1==0&&e<t}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function shimKeys(e){for(var t=keysIn(e),o=t.length,i=o&&e.length,s=!!i&&isLength(i)&&(n(e)||r(e)),c=-1,u=[];++c<o;){var l=t[c];(s&&isIndex(l,i)||a.call(e,l))&&u.push(l)}return u}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(n(e)||r(e))&&t||0;for(var o=e.constructor,i=-1,s="function"==typeof o&&o.prototype===e,c=Array(t),u=t>0;++i<t;)c[i]=i+"";for(var l in e)u&&isIndex(l,t)||"constructor"==l&&(s||!a.call(e,l))||c.push(l);return c}var t=e(13),r=e(14),n=e(15),o=/^\d+$/,i=Object.prototype,a=i.hasOwnProperty,s=t(Object,"keys"),c=9007199254740991,u=baseProperty("length"),l=s?function(e){var t=null==e?void 0:e.constructor;if("function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e))return shimKeys(e);return isObject(e)?s(e):[]}:shimKeys;module.exports=l},function(module,exports){function isObjectLike(e){return!!e&&"object"==typeof e}function getNative(e,t){var r=null==e?void 0:e[t];return isNative(r)?r:void 0}function isFunction(t){return isObject(t)&&i.call(t)==e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isNative(e){if(null==e)return!1;if(isFunction(e))return a.test(n.call(e));return isObjectLike(e)&&t.test(e)}var e="[object Function]",t=/^\[object .+?Constructor\]$/,r=Object.prototype,n=Function.prototype.toString,o=r.hasOwnProperty,i=r.toString,a=RegExp("^"+n.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=getNative},function(module,exports){function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArguments(e){return isArrayLikeObject(e)&&i.call(e,"callee")&&(!s.call(e,"callee")||a.call(e)==t)}function isArrayLike(e){return null!=e&&isLength(c(e))&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?a.call(e):"";return t==r||t==n}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}var e=9007199254740991,t="[object Arguments]",r="[object Function]",n="[object GeneratorFunction]",o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=o.propertyIsEnumerable,c=baseProperty("length");module.exports=isArguments},function(module,exports){function isObjectLike(e){return!!e&&"object"==typeof e}function getNative(e,t){var r=null==e?void 0:e[t];return isNative(r)?r:void 0}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function isFunction(e){return isObject(e)&&a.call(e)==t}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isNative(e){if(null==e)return!1;if(isFunction(e))return s.test(o.call(e));return isObjectLike(e)&&r.test(e)}var e="[object Array]",t="[object Function]",r=/^\[object .+?Constructor\]$/,n=Object.prototype,o=Function.prototype.toString,i=n.hasOwnProperty,a=n.toString,s=RegExp("^"+o.call(i).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),c=getNative(Array,"isArray"),u=9007199254740991,l=c||function(e){return isObjectLike(e)&&isLength(e.length)&&"[object Array]"==a.call(e)};module.exports=l},function(module,exports,e){function createAssigner(e){return n(function(n,o){var i=-1,a=null==n?0:o.length,s=a>2?o[a-2]:void 0,c=a>2?o[2]:void 0,u=a>1?o[a-1]:void 0;for("function"==typeof s?(s=t(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&r(o[0],o[1],c)&&(s=a<3?void 0:s,a=1);++i<a;){var l=o[i];l&&e(n,l,s)}return n})}var t=e(17),r=e(18),n=e(19);module.exports=createAssigner},function(module,exports){function bindCallback(e,t,r){if("function"!=typeof e)return identity;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)};case 5:return function(r,n,o,i,a){return e.call(t,r,n,o,i,a)}}return function(){return e.apply(t,arguments)}}function identity(e){return e}module.exports=bindCallback},function(module,exports){function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(r(e))}function isIndex(r,n){return r="number"==typeof r||e.test(r)?+r:-1,n=null==n?t:n,r>-1&&r%1==0&&r<n}function isIterateeCall(e,t,r){if(!isObject(r))return!1;var n=typeof t;if("number"==n?isArrayLike(r)&&isIndex(t,r.length):"string"==n&&t in r){var o=r[t];return e===e?e===o:o!==o}return!1}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var e=/^\d+$/,t=9007199254740991,r=baseProperty("length");module.exports=isIterateeCall},function(module,exports){function restParam(r,n){if("function"!=typeof r)throw new TypeError(e);return n=t(void 0===n?r.length-1:+n||0,0),function(){for(var e=arguments,o=-1,i=t(e.length-n,0),a=Array(i);++o<i;)a[o]=e[n+o];switch(n){case 0:return r.call(this,a);case 1:return r.call(this,e[0],a);case 2:return r.call(this,e[0],e[1],a)}var s=Array(n+1);for(o=-1;++o<n;)s[o]=e[o];return s[n]=a,r.apply(this,s)}}var e="Expected a function",t=Math.max;module.exports=restParam},function(module,exports){"use strict";function setElement(t){if("string"==typeof t){var r=document.querySelectorAll(t);t="length"in r?r[0]:r}return e=t||e}function hide(t){validateElement(t),(t||e).setAttribute("aria-hidden","true")}function show(t){validateElement(t),(t||e).removeAttribute("aria-hidden")}function toggle(e,t){e?hide(t):show(t)}function validateElement(t){if(!t&&!e)throw new Error("react-modal: You must set an element with `Modal.setAppElement(el)` to make this accessible")}function resetForTesting(){e=document.body}var e="undefined"!=typeof document?document.body:null;exports.toggle=toggle,exports.setElement=setElement,exports.show=show,exports.hide=hide,exports.resetForTesting=resetForTesting},function(module,exports){function indexOf(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function ElementClass(e){if(!(this instanceof ElementClass))return new ElementClass(e);var t=this;e||(e={}),e.nodeType&&(e={el:e}),this.opts=e,this.el=e.el||document.body,"object"!=typeof this.el&&(this.el=document.querySelector(this.el))}module.exports=function(e){return new ElementClass(e)},ElementClass.prototype.add=function(e){var t=this.el;if(!t)return;if(""===t.className)return t.className=e;var r=t.className.split(" ");if(indexOf(r,e)>-1)return r;return r.push(e),t.className=r.join(" "),r},ElementClass.prototype.remove=function(e){var t=this.el;if(!t)return;if(""===t.className)return;var r=t.className.split(" "),n=indexOf(r,e);return n>-1&&r.splice(n,1),t.className=r.join(" "),r},ElementClass.prototype.has=function(e){var t=this.el;if(!t)return;return indexOf(t.className.split(" "),e)>-1},ElementClass.prototype.toggle=function(e){if(!this.el)return;this.has(e)?this.remove(e):this.add(e)}}])})},357:function(module,exports,e){var t,r,t,n,t,o,t,i,t,a,t,s,t,c,t,u,t,l,t,p,t,d,t,f,t,h,t,m,t,g,t,y,t,v,t,b,t,C,t,E,t,w,t,S,t,O,t,T,t,P,t,M,t,A,t,x,t,k,t,R,t,N,t,I,t,D,t,L,t,j,t,z,t,q,t,F,B,U,W,H,V,G,X,_=e(2);X=function(require){return e(2).contains}.call(exports,e,exports,module),G=function(require){return e(2).toArray}.call(exports,e,exports,module),V=function(require){return e(2).flatten}.call(exports,e,exports,module),H=function(require){return e(2).last}.call(exports,e,exports,module),W=function(require){return e(2).escape}.call(exports,e,exports,module),U=function(require){return e(2).extend}.call(exports,e,exports,module),B=function(require){return e(2).defaults}.call(exports,e,exports,module),t=[],F=function(){function pull(e){for(var r=arguments,n=0,o=r.length,i=e?e.length:0;++n<o;)for(var a=-1,s=r[n];++a<i;)e[a]===s&&(t.call(e,a--,1),i--);return e}var e=[],t=e.splice;return pull}.apply(exports,t),t=[],q=function(){return function(){return function(e){var t=new e.api.Command("indent");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!r},e.commands.indent=t}}}.apply(exports,t),t=[],z=function(){return function(){return function(e){var t=function(t){e.api.Command.call(this,t)};t.prototype=Object.create(e.api.Command.prototype),t.prototype.constructor=t,t.prototype.execute=function(t){function splitList(e){if(e.length>0){var t=document.createElement(o.nodeName);e.forEach(function(e){t.appendChild(e)}),o.parentNode.insertBefore(t,o.nextElementSibling)}}if(this.queryState()){var r=new e.api.Selection,n=r.range,o=r.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName}),i=r.getContaining(function(e){return"LI"===e.nodeName});e.transactionManager.run(function(){if(i){splitList(new e.api.Node(i).nextAll()),r.placeMarkers();var t=document.createElement("p");t.innerHTML=i.innerHTML,o.parentNode.insertBefore(t,o.nextElementSibling),i.parentNode.removeChild(i)}else{var a=Array.prototype.map.call(o.querySelectorAll("li"),function(e){return n.intersectsNode(e)&&e}).filter(function(e){return e}),s=a.slice(-1)[0];splitList(new e.api.Node(s).nextAll()),r.placeMarkers();var c=document.createDocumentFragment();a.forEach(function(e){var t=document.createElement("p");t.innerHTML=e.innerHTML,c.appendChild(t)}),o.parentNode.insertBefore(c,o.nextElementSibling),a.forEach(function(e){e.parentNode.removeChild(e)})}0===o.childNodes.length&&o.parentNode.removeChild(o),r.selectMarkers()}.bind(this))}else e.api.Command.prototype.execute.call(this,t)},t.prototype.queryEnabled=function(){return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()},e.commands.insertOrderedList=new t("insertOrderedList"),e.commands.insertUnorderedList=new t("insertUnorderedList")}}}.apply(exports,t),t=[],j=function(){return function(){return function(e){var t=new e.api.Command("outdent");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});return e.api.Command.prototype.queryEnabled.call(this)&&e.allowsBlockElements()&&!r},e.commands.outdent=t}}}.apply(exports,t),t=[],L=function(){return function(){return function(e){var t=new e.api.Command("redo");t.execute=function(){e.undoManager.redo()},t.queryEnabled=function(){return e.undoManager.position>0},e.commands.redo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){e.shiftKey&&(e.metaKey||e.ctrlKey)&&90===e.keyCode&&(e.preventDefault(),t.execute())})}}}.apply(exports,t),t=[],D=function(){return function(){return function(e){var t=new e.api.Command("subscript");e.commands.subscript=t}}}.apply(exports,t),t=[],I=function(){return function(){return function(e){var t=new e.api.Command("superscript");e.commands.superscript=t}}}.apply(exports,t),t=[],N=function(){return function(){return function(e){var t=new e.api.Command("undo");t.execute=function(){e.undoManager.undo()},t.queryEnabled=function(){return e.undoManager.position<e.undoManager.length},e.commands.undo=t,e.options.undo.enabled&&e.el.addEventListener("keydown",function(e){e.shiftKey||!e.metaKey&&!e.ctrlKey||90!==e.keyCode||(e.preventDefault(),t.execute())})}}}.apply(exports,t),t=[q,z,j,L,D,I,N],R=function(e,t,r,n,o,i,a){return{indent:e,insertList:t,outdent:r,redo:n,subscript:o,superscript:i,undo:a}}.apply(exports,t),t=[X],k=function(e){function isBlockElement(r){return e(t,r.nodeName)}function isSelectionMarkerNode(e){return e.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===e.className}function isCaretPositionNode(e){return e.nodeType===Node.ELEMENT_NODE&&"caret-position"===e.className}function unwrap(e,t){for(;t.childNodes.length>0;)e.insertBefore(t.childNodes[0],t);e.removeChild(t)}var t=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO"];return{isBlockElement:isBlockElement,isSelectionMarkerNode:isSelectionMarkerNode,isCaretPositionNode:isCaretPositionNode,unwrap:unwrap}}.apply(exports,t),t=[],x=function(){function isEmptyTextNode(e){return e.nodeType===Node.TEXT_NODE&&""===e.textContent}function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}function removeNode(e){return e.parentNode.removeChild(e)}return{isEmptyTextNode:isEmptyTextNode,insertAfter:insertAfter,removeNode:removeNode}}.apply(exports,t),t=[V,G,k,x,e(829)],A=function(e,t,r,n,o){function observeDomChanges(o,i){function includeRealMutations(o){return e(o.map(function(e){var r=t(e.addedNodes),n=t(e.removedNodes);return r.concat(n)})).filter(function(e){return!n.isEmptyTextNode(e)}).filter(function(e){return!r.isSelectionMarkerNode(e)}).length>0}var a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,s=!1,c=new a(function(e){if(!s&&includeRealMutations(e)){s=!0;try{i()}catch(e){throw e}finally{setTimeout(function(){s=!1},0)}}});return c.observe(o,{attributes:!0,childList:!0,subtree:!0}),c}return observeDomChanges}.apply(exports,t),t=[X,A],M=function(e,t){return function(){return function(e){e.el.addEventListener("focus",function placeCaretOnFocus(){function getFirstDeepestChild(e){var t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1),r=t.currentNode;return t.firstChild()?"BR"===t.currentNode.nodeName?r:getFirstDeepestChild(t.currentNode):t.currentNode}var t=new e.api.Selection;if(t.range){if(e.allowsBlockElements()&&t.range.startContainer===e.el){var r=getFirstDeepestChild(e.el.firstChild),n=t.range;n.setStart(r,0),n.setEnd(r,0),t.selection.removeAllRanges(),t.selection.addRange(n)}}}.bind(e));var r=function(){if(!e._skipFormatters){var t=new e.api.Selection,r=t.range,n=function(){r&&t.placeMarkers(),e.setHTML(e._htmlFormatterFactory.format(e.getHTML())),t.selectMarkers()}.bind(e);e.transactionManager.run(n)}delete e._skipFormatters}.bind(e);t(e.el,r),e.allowsBlockElements()&&e.el.addEventListener("keydown",function(t){if(13===t.keyCode){var r=new e.api.Selection,n=r.range,o=r.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});if(o&&n.collapsed){var i=n.cloneRange();i.setEndAfter(o,0);""===i.cloneContents().firstChild.textContent&&(t.preventDefault(),e.transactionManager.run(function(){var e=document.createElement("p"),t=document.createElement("br");e.appendChild(t),o.parentNode.insertBefore(e,o.nextElementSibling),n.setStart(e,0),n.setEnd(e,0),r.selection.removeAllRanges(),r.selection.addRange(n)}))}}}),e.allowsBlockElements()&&e.el.addEventListener("keydown",function(t){if(13===t.keyCode||8===t.keyCode){var r=new e.api.Selection;if(r.range.collapsed){var n=r.getContaining(function(e){return"LI"===e.nodeName});if(n&&""===n.textContent.trim()){t.preventDefault();var o=r.getContaining(function(e){return"UL"===e.nodeName||"OL"===e.nodeName});e.getCommand("OL"===o.nodeName?"insertOrderedList":"insertUnorderedList").execute()}}}})}}}.apply(exports,t),t=[],P=function(){return function(){return function(e){var t=/(\s|&nbsp;)+/g;e.registerHTMLFormatter("export",function(e){return e.replace(/(\s|&nbsp;)+/g," ")})}}}.apply(exports,t),t=[H],T=function(e){function wrapChildNodes(t,r){Array.prototype.reduce.call(r.childNodes,function(r,n){function startNewGroup(){var e=[n];r.push(e)}var o=e(r);if(o){t.element.isBlockElement(o[0])===t.element.isBlockElement(n)?o.push(n):startNewGroup()}else startNewGroup();return r},[]).filter(function(e){return!t.element.isBlockElement(e[0])}).forEach(function(e){var t=document.createElement("p");e[0].parentNode.insertBefore(t,e[0]),e.forEach(function(e){t.appendChild(e)})}),r._isWrapped=!0}function traverse(e,t){for(var r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null,!1),n=r.firstChild();n;){if("BLOCKQUOTE"===n.nodeName&&!n._isWrapped){wrapChildNodes(e,n),traverse(e,t);break}n=r.nextSibling()}}return function(){return function(e){e.registerHTMLFormatter("normalize",function(t){var r=document.createElement("div");return r.innerHTML=t,wrapChildNodes(e,r),traverse(e,r),r.innerHTML})}}}.apply(exports,t),t=[k,X],O=function(e,t){function parentHasNoTextContent(e,t){return!!e.isCaretPositionNode(t)||""===t.parentNode.textContent.trim()}function traverse(e,n){function isEmpty(t){if(0===t.children.length&&e.isBlockElement(t)||1===t.children.length&&e.isSelectionMarkerNode(t.children[0]))return!0;if(!e.isBlockElement(t)&&0===t.children.length)return parentHasNoTextContent(e,t);return!1}for(var o=n.firstElementChild;o;)e.isSelectionMarkerNode(o)||(isEmpty(o)&&""===o.textContent.trim()&&!t(r,o.nodeName)?o.appendChild(document.createElement("br")):o.children.length>0&&traverse(e,o)),o=o.nextElementSibling}var r=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];return function(){return function(e){e.registerHTMLFormatter("normalize",function(t){var r=document.createElement("div");return r.innerHTML=t,traverse(e.element,r),r.innerHTML})}}}.apply(exports,t),t=[W],S=function(e){return function(){return function(t){t.registerPlainTextFormatter(e)}}}.apply(exports,t),t=[],w=function(){function hasContent(e){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_ALL,null,!1);t.nextNode();)if(t.currentNode&&(~["br"].indexOf(t.currentNode.nodeName.toLowerCase())||t.currentNode.length>0))return!0;return!1}return function(){return function(e){e.el.addEventListener("keydown",function(t){if(13===t.keyCode){var r=new e.api.Selection,n=r.range;r.getContaining(function(e){return"LI"===e.nodeName||/^(H[1-6])$/.test(e.nodeName)})||(t.preventDefault(),e.transactionManager.run(function(){"BR"===e.el.lastChild.nodeName&&e.el.removeChild(e.el.lastChild);var t=document.createElement("br");n.insertNode(t),n.collapse(!1);var o=n.cloneRange();if(o.setEndAfter(e.el.lastChild,0),!hasContent(o.cloneContents())){var i=document.createElement("br");n.insertNode(i)}var a=n.cloneRange();a.setStartAfter(t,0),a.setEndAfter(t,0),r.selection.removeAllRanges(),r.selection.addRange(a)}))}}.bind(this)),""===e.getHTML().trim()&&e.setContent("")}}}.apply(exports,t),t=[],E=function(){return function(){return function(e){var t=new e.api.CommandPatch("bold");t.queryEnabled=function(){var t=new e.api.Selection,r=t.getContaining(function(e){return/^(H[1-6])$/.test(e.nodeName)});return e.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!r},e.commandPatches.bold=t}}}.apply(exports,t),t=[],C=function(){var e="\ufeff";return function(){return function(e){var t=new e.api.CommandPatch("indent");t.execute=function(t){e.transactionManager.run(function(){var r=new e.api.Selection,n=r.range;if("P"===n.commonAncestorContainer.nodeName&&"<br>"===n.commonAncestorContainer.innerHTML){var o=document.createTextNode("\ufeff");n.insertNode(o),n.setStart(o,0),n.setEnd(o,0),r.selection.removeAllRanges(),r.selection.addRange(n)}e.api.CommandPatch.prototype.execute.call(this,t),r=new e.api.Selection;var i=r.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});i&&i.removeAttribute("style")}.bind(this))},e.commandPatches.indent=t}}}.apply(exports,t),t=[],b=function(){return function(){return function(e){var t=new e.api.CommandPatch("insertHTML"),r=e.element;t.execute=function(t){e.transactionManager.run(function(){function sanitize(e){var t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),n=t.firstChild();if(!n)return;do{"SPAN"===n.nodeName?r.unwrap(e,n):(n.style.lineHeight=null,""===n.getAttribute("style")&&n.removeAttribute("style")),sanitize(n)}while(n=t.nextSibling())}e.api.CommandPatch.prototype.execute.call(this,t),sanitize(e.el)}.bind(this))},e.commandPatches.insertHTML=t}}}.apply(exports,t),t=[],v=function(){return function(){return function(e){var t=e.element,r=e.node,n=function(t){e.api.CommandPatch.call(this,t)};n.prototype=Object.create(e.api.CommandPatch.prototype),n.prototype.constructor=n,n.prototype.execute=function(n){e.transactionManager.run(function(){if(e.api.CommandPatch.prototype.execute.call(this,n),this.queryState()){var o=new e.api.Selection,i=o.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});if(i.nextElementSibling&&0===i.nextElementSibling.childNodes.length&&r.removeNode(i.nextElementSibling),i){var a=i.parentNode;a&&/^(H[1-6]|P)$/.test(a.nodeName)&&(o.placeMarkers(),r.insertAfter(i,a),o.selectMarkers(),2===a.childNodes.length&&r.isEmptyTextNode(a.firstChild)&&r.removeNode(a),0===a.childNodes.length&&r.removeNode(a))}Array.prototype.slice.call(i.childNodes).forEach(function(e){Array.prototype.slice.call(e.childNodes).forEach(function(r){if("SPAN"===r.nodeName){var n=r;t.unwrap(e,n)}else r.nodeType===Node.ELEMENT_NODE&&(r.style.lineHeight=null,""===r.getAttribute("style")&&r.removeAttribute("style"))})})}}.bind(this))},e.commandPatches.insertOrderedList=new n("insertOrderedList"),e.commandPatches.insertUnorderedList=new n("insertUnorderedList")}}}.apply(exports,t),t=[],y=function(){return function(){return function(e){var t=new e.api.CommandPatch("outdent");t.execute=function(){e.transactionManager.run(function(){var t=new e.api.Selection,r=t.range,n=t.getContaining(function(e){return"BLOCKQUOTE"===e.nodeName});if("BLOCKQUOTE"===r.commonAncestorContainer.nodeName){t.placeMarkers(),t.selectMarkers(!0);var o=r.cloneContents();n.parentNode.insertBefore(o,n),r.deleteContents(),t.selectMarkers(),""===n.textContent&&n.parentNode.removeChild(n)}else{var i=t.getContaining(function(e){return"P"===e.nodeName});if(i){var a=new e.api.Node(i).nextAll();if(a.length){var s=document.createElement(n.nodeName);a.forEach(function(e){s.appendChild(e)}),n.parentNode.insertBefore(s,n.nextElementSibling)}t.placeMarkers(),n.parentNode.insertBefore(i,n.nextElementSibling),t.selectMarkers(),""===n.innerHTML&&n.parentNode.removeChild(n)}else e.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},e.commandPatches.outdent=t}}}.apply(exports,t),t=[],g=function(){return function(){return function(e){var t=new e.api.CommandPatch("createLink");e.commandPatches.createLink=t,t.execute=function(t){var r=new e.api.Selection;if(r.range.collapsed){var n=document.createElement("a");n.setAttribute("href",t),n.textContent=t,r.range.insertNode(n);var o=document.createRange();o.setStartBefore(n),o.setEndAfter(n),r.selection.removeAllRanges(),r.selection.addRange(o)}else e.api.CommandPatch.prototype.execute.call(this,t)}}}}.apply(exports,t),t=[],m=function(){return function(){return function(e){var t=e.element;e.allowsBlockElements()&&e.el.addEventListener("keyup",function(r){if(8===r.keyCode||46===r.keyCode){var n=new e.api.Selection,o=n.getContaining(function(e){return"P"===e.nodeName});o&&e.transactionManager.run(function(){n.placeMarkers(),Array.prototype.slice.call(o.childNodes).forEach(function(e){if("SPAN"===e.nodeName){var r=e;t.unwrap(o,r)}else e.nodeType===Node.ELEMENT_NODE&&(e.style.lineHeight=null,""===e.getAttribute("style")&&e.removeAttribute("style"))}),n.selectMarkers()},!0)}})}}}.apply(exports,t),t=[E,C,b,v,y,g,m],h=function(e,t,r,n,o,i,a){return{commands:{bold:e,indent:t,insertHTML:r,insertList:n,outdent:o,createLink:i},events:a}}.apply(exports,t),t=[],f=function(){return function(){return function(e){""===e.getHTML().trim()&&e.setContent("<p><br></p>")}}}.apply(exports,t),t=[],d=function(){return function(e){function CommandPatch(e){this.commandName=e}return CommandPatch.prototype.execute=function(t){e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},CommandPatch.prototype.queryState=function(){return document.queryCommandState(this.commandName)},CommandPatch.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},CommandPatch}}.apply(exports,t),t=[],p=function(){return function(e){function Command(t){this.commandName=t,this.patch=e.commandPatches[this.commandName]}return Command.prototype.execute=function(t){this.patch?this.patch.execute(t):e.transactionManager.run(function(){document.execCommand(this.commandName,!1,t||null)}.bind(this))},Command.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},Command.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},Command}}.apply(exports,t),t=[],l=function(){function Node(e){this.node=e}return Node.prototype.getAncestor=function(e,t){var r=function(t){return e===t};if(r(this.node))return;for(var n=this.node.parentNode;n&&!r(n);){if(t(n))return n;n=n.parentNode}},Node.prototype.nextAll=function(){for(var e=[],t=this.node.nextSibling;t;)e.push(t),t=t.nextSibling;return e},Node}.apply(exports,t),t=[k],u=function(e){return function(e){function Selection(){for(var t=document,r=e.el.parentNode;r&&r.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&r.nodeType!==Node.DOCUMENT_NODE;)r=r.parentNode;if(r&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.getSelection&&(t=r),this.selection=t.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){this.range=document.createRange();var n=document.createRange();this.range.setStart(this.selection.anchorNode,this.selection.anchorOffset),n.setStart(this.selection.focusNode,this.selection.focusOffset),this.range.compareBoundaryPoints(Range.START_TO_START,n)<=0?this.range.setEnd(this.selection.focusNode,this.selection.focusOffset):(this.range=n,this.range.setEnd(this.selection.anchorNode,this.selection.anchorOffset))}}return Selection.prototype.getContaining=function(t){if(!this.range)return;var r=new e.api.Node(this.range.commonAncestorContainer);return r.node&&e.el===r.node||!t(r.node)?r.getAncestor(e.el,t):r.node},Selection.prototype.placeMarkers=function(){if(!this.range)return;if(!e.el.offsetParent)return;var t=document.createRange();t.selectNodeContents(e.el);var r=this.range.compareBoundaryPoints(Range.START_TO_START,t)>=0,n=this.range.compareBoundaryPoints(Range.END_TO_END,t)<=0;if(r&&n){var o=document.createElement("em");o.classList.add("scribe-marker");var i=document.createElement("em");i.classList.add("scribe-marker");var a=this.range.cloneRange();if(a.collapse(!1),a.insertNode(i),i.nextSibling&&i.nextSibling.nodeType===Node.TEXT_NODE&&""===i.nextSibling.data&&i.parentNode.removeChild(i.nextSibling),i.previousSibling&&i.previousSibling.nodeType===Node.TEXT_NODE&&""===i.previousSibling.data&&i.parentNode.removeChild(i.previousSibling),!this.range.collapsed){var s=this.range.cloneRange();s.collapse(!0),s.insertNode(o),o.nextSibling&&o.nextSibling.nodeType===Node.TEXT_NODE&&""===o.nextSibling.data&&o.parentNode.removeChild(o.nextSibling),o.previousSibling&&o.previousSibling.nodeType===Node.TEXT_NODE&&""===o.previousSibling.data&&o.parentNode.removeChild(o.previousSibling)}this.selection.removeAllRanges(),this.selection.addRange(this.range)}},Selection.prototype.getMarkers=function(){return e.el.querySelectorAll("em.scribe-marker")},Selection.prototype.removeMarkers=function(){var e=this.getMarkers();Array.prototype.forEach.call(e,function(e){e.parentNode.removeChild(e)})},Selection.prototype.selectMarkers=function(e){var t=this.getMarkers();if(!t.length)return;var r=document.createRange();r.setStartBefore(t[0]),t.length>=2?r.setEndAfter(t[1]):r.setEndAfter(t[0]),e||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(r)},Selection.prototype.isCaretOnNewLine=function(){function isEmptyInlineElement(e){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),r=t.root;r;){var n=r.childNodes.length;if(n>1||1===n&&""!==r.textContent.trim())return!1;if(0===n)return""===r.textContent.trim();r=t.nextNode()}}var e=this.getContaining(function(e){return"P"===e.nodeName});return!!e&&isEmptyInlineElement(e)},Selection}}.apply(exports,t),t=[],c=function(){return function(e,t){function SimpleCommand(e,r){t.api.Command.call(this,e),this._nodeName=r}return SimpleCommand.prototype=Object.create(e.Command.prototype),SimpleCommand.prototype.constructor=SimpleCommand,SimpleCommand.prototype.queryState=function(){var e=new t.api.Selection;return t.api.Command.prototype.queryState.call(this)&&!!e.getContaining(function(e){return e.nodeName===this._nodeName}.bind(this))},SimpleCommand}}.apply(exports,t),t=[d,p,l,u,c],s=function(e,t,r,n,o){return function Api(i){this.CommandPatch=e(i),this.Command=t(i),this.Node=r,this.Selection=n(i),this.SimpleCommand=o(this,i)}}.apply(exports,t),t=[U],a=function(e){return function(t){function TransactionManager(){this.history=[]}return e(TransactionManager.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(t.pushHistory(),t.trigger("content-changed"))},run:function(e,r){this.start();try{e&&e()}finally{t._forceMerge=!0===r,this.end(),t._forceMerge=!1}}}),TransactionManager}}.apply(exports,t),t=[],i=function(){function UndoManager(e,t){this._stack=[],this._limit=e,this._fireEvent="undefined"!=typeof CustomEvent&&t&&t.dispatchEvent,this._ush=t,this.position=0,this.length=0}return UndoManager.prototype.transact=function(e,t){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");e.execute(),this._stack.splice(0,this.position),t&&this.length?this._stack[0].push(e):this._stack.unshift([e]),this.position=0,this._limit&&this._stack.length>this._limit?this.length=this._stack.length=this._limit:this.length=this._stack.length,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("DOMTransaction",{detail:{transactions:this._stack[0].slice()},bubbles:!0,cancelable:!1}))},UndoManager.prototype.undo=function(){if(this.position<this.length){for(var e=this._stack[this.position].length-1;e>=0;e--)this._stack[this.position][e].undo();this.position++,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("undo",{detail:{transactions:this._stack[this.position-1].slice()},bubbles:!0,cancelable:!1}))}},UndoManager.prototype.redo=function(){if(this.position>0){for(var e=0,t=this._stack[this.position-1].length;e<t;e++)this._stack[this.position-1][e].redo();this.position--,this._fireEvent&&this._ush.dispatchEvent(new CustomEvent("redo",{detail:{transactions:this._stack[this.position].slice()},bubbles:!0,cancelable:!1}))}},UndoManager.prototype.item=function(e){if(e>=0&&e<this.length)return this._stack[e].slice();return null},UndoManager.prototype.clearUndo=function(){this._stack.length=this.length=this.position},UndoManager.prototype.clearRedo=function(){this._stack.splice(0,this.position),this.position=0,this.length=this._stack.length},UndoManager}.apply(exports,t),t=[F,e(549)],o=function(e,t){function EventEmitter(){this._listeners={}}return EventEmitter.prototype.on=function(e,r){var n=this._listeners[e]||t.Set();this._listeners[e]=n.add(r)},EventEmitter.prototype.off=function(e,r){var n=this._listeners[e]||t.Set();n=r?n.delete(r):n.clear()},EventEmitter.prototype.trigger=function(e,r){for(var n=e.split(":");n.length;){var o=n.join(":");(this._listeners[o]||t.Set()).forEach(function(e){e.apply(null,r)}),n.splice(n.length-1,1)}},EventEmitter}.apply(exports,t),t=[B],n=function(e){function checkOptions(r){var n=r||{};return Object.freeze(e(n,t))}var t={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"]};return{defaultOptions:t,checkOptions:checkOptions}}.apply(exports,t),t=[R,M,P,T,O,S,w,h,f,s,a,i,o,k,x,e(549),n],void 0!==(r=function(e,t,r,n,o,i,a,s,c,u,l,p,d,f,h,m,g){function Scribe(y,v){d.call(this),this.el=y,this.commands={},this.options=g.checkOptions(v),this.commandPatches={},this._plainTextFormatterFactory=new FormatterFactory,this._htmlFormatterFactory=new HTMLFormatterFactory,this.api=new u(this),this.node=h,this.element=f,this.Immutable=m;var b=l(this);this.transactionManager=new b,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new p(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1),this.allowsBlockElements()?(this.use(c()),this.use(n()),this.use(o())):this.use(a());var C=m.List.of(i,r),E=m.List.of(s.events),w=m.List(this.options.defaultCommandPatches).map(function(e){return s.commands[e]}),S=m.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(t){return e[t]});m.List().concat(C,E,w,S).forEach(function(e){this.use(e())}.bind(this)),this.use(t())}function FormatterFactory(){this.formatters=m.List()}function HTMLFormatterFactory(){this.formatters={sanitize:m.List(),normalize:m.List(),export:m.List()}}return Scribe.prototype=Object.create(d.prototype),Scribe.prototype.use=function(e){return e(this),this},Scribe.prototype.setHTML=function(e,t){this._lastItem.content=e,t&&(this._skipFormatters=!0),this.el.innerHTML!==e&&(this.el.innerHTML=e)},Scribe.prototype.getHTML=function(){return this.el.innerHTML},Scribe.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},Scribe.prototype.getTextContent=function(){return this.el.textContent},Scribe.prototype.pushHistory=function(){var e=this;if(e.options.undo.enabled){var t=e._lastItem.content.replace(/<em class="scribe-marker">/g,"").replace(/<\/em>/g,"");if(e.getHTML()!==t){var r=new e.api.Selection;r.placeMarkers();var n=e.getHTML();r.removeMarkers();var o=e.undoManager.item(e.undoManager.position);return(e._merge||e._forceMerge)&&o&&e._lastItem==o[0]?e._lastItem.content=n:(e._lastItem={previousItem:e._lastItem,content:n,scribe:e,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},e.undoManager.transact(e._lastItem,!1)),clearTimeout(e._mergeTimer),e._merge=!0,e._mergeTimer=setTimeout(function(){e._merge=!1},e.options.undo.interval),!0}}return!1},Scribe.prototype.getCommand=function(e){return this.commands[e]||this.commandPatches[e]||new this.api.Command(e)},Scribe.prototype.restoreFromHistory=function(e){this._lastItem=e,this.setHTML(e.content,!0),(new this.api.Selection).selectMarkers(),this.trigger("content-changed")},Scribe.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},Scribe.prototype.setContent=function(e){this.allowsBlockElements()||(e+="<br>"),this.setHTML(e),this.trigger("content-changed")},Scribe.prototype.insertPlainText=function(e){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(e)+"</p>")},Scribe.prototype.insertHTML=function(e){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(e))},Scribe.prototype.isDebugModeEnabled=function(){return this.options.debug},Scribe.prototype.registerHTMLFormatter=function(e,t){this._htmlFormatterFactory.formatters[e]=this._htmlFormatterFactory.formatters[e].push(t)},Scribe.prototype.registerPlainTextFormatter=function(e){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(e)},FormatterFactory.prototype.format=function(e){return this.formatters.reduce(function(e,t){return t(e)},e)},HTMLFormatterFactory.prototype=Object.create(FormatterFactory.prototype),HTMLFormatterFactory.prototype.constructor=HTMLFormatterFactory,HTMLFormatterFactory.prototype.format=function(e){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(e,t){return t(e)},e)},HTMLFormatterFactory.prototype.formatForExport=function(e){return this.formatters.export.reduce(function(e,t){return t(e)},e)},Scribe}.apply(exports,t))&&(module.exports=r)},362:function(module,exports,e){var t=e(733);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},363:function(module,exports,e){var t=e(734);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},364:function(module,exports,e){var t=e(735);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},365:function(module,exports,e){var t=e(736);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},366:function(module,exports,e){var t=e(737);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},367:function(module,exports,e){var t=e(738);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},368:function(module,exports,e){var t=e(739);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},369:function(module,exports,e){var t=e(740);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},370:function(module,exports,e){var t=e(741);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},371:function(module,exports,e){var t=e(742);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},372:function(module,exports,e){var t=e(743);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},373:function(module,exports,e){var t=e(744);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},374:function(module,exports,e){var t=e(745);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},375:function(module,exports,e){var t=e(746);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},376:function(module,exports,e){var t=e(747);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},377:function(module,exports,e){var t=e(748);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},378:function(module,exports,e){var t=e(749);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},387:function(module,exports,e){var t=e(758);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},405:function(module,exports,e){var t=e(779);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},406:function(module,exports,e){var t=e(780);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},407:function(module,exports,e){var t=e(781);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},408:function(module,exports,e){var t=e(782);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},409:function(module,exports,e){var t=e(783);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},410:function(module,exports,e){var t=e(784);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},411:function(module,exports,e){var t=e(785);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},412:function(module,exports,e){var t=e(786);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},413:function(module,exports,e){var t=e(787);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},414:function(module,exports,e){var t=e(788);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},415:function(module,exports,e){var t=e(789);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},416:function(module,exports,e){var t=e(790);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},417:function(module,exports,e){var t=e(791);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},418:function(module,exports,e){var t=e(792);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},419:function(module,exports,e){var t=e(793);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},420:function(module,exports,e){var t,r;t=[e,exports,module,e(208),e(428)],void 0!==(r=function(require,exports,module){"use strict";var t=e(208),r=e(428),n=new t;n.registerStore(r),module.exports=n}.apply(exports,t))&&(module.exports=r)},421:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(86),e(126),e(6),e(2),e(74),e(28),e(151),e(420),e(89),e(422),e(424),e(425),e(427),e(103),e(362)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(86),i=e(126),a=e(6),_=e(2),s=e(74),c=e(28),u=e(151),l=e(420),p=e(89),d=p.initializeModal,f=p.getAssetsListByCourse,h=p.resetAssets,m=e(422),g=e(424),y=e(425),v=e(427),b=e(103);e(362);var C={Assets:"assets",Upload:"upload"},E=(r=t=function(e){function AssetAdminModal(t,r){_classCallCheck(this,AssetAdminModal);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.handleClose=function(){n.props.uploadStatus.state!==b.IN_PROGRESS&&n.props.onCancel()},n.selectTab=function(e){if(e!==n.state.activeTabId&&n.props.uploadStatus.state!==b.IN_PROGRESS&&(n.setState({activeTabId:e}),n.context.executeAction(h),e===C.Assets)){var t=n.props,r=t.courseId,o=t.assetType;n.context.executeAction(f,{courseId:r,assetType:o})}},n.state={activeTabId:t.tab},n}return _inherits(AssetAdminModal,e),AssetAdminModal.prototype.componentWillMount=function componentWillMount(){var e=this.props,t=e.courseId,r=e.assetType,n=e.tab,o=e.hideHeaderTabs,i=n===C.Upload&&o;this.context.executeAction(d,{courseId:t,assetType:r,hideAssets:i})},AssetAdminModal.prototype.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.onSelect,r=e.uploadedAssets,n=e.allowMultiple;t&&AssetAdminModal.shouldReturnUploadedAssets(r,n)&&t(r)},AssetAdminModal.prototype.renderActiveTabId=function renderActiveTabId(){var e=this.props,t=e.course,r=e.assets,o=e.assetType,i=e.pdfTemplate,a=e.allowMultiple,s=e.isNoticeMessageDismissed,c=e.uploadedAssets,l=e.selectedAssets,p=e.uploadAttempts,d=e.uploadStatus,f=e.nextPageIndex;if(!t)return n.createElement("div",{className:"initial-loading"},n.createElement(u,null));return this.state.activeTabId===C.Upload?n.createElement(g,{course:t,assetType:o,pdfTemplate:i,allowMultiple:a,uploadedAssets:c,selectedAssets:l,uploadAttempts:p,uploadStatus:d}):n.createElement("div",null,n.createElement("h2",{className:"folder-name"},t.name),n.createElement(m,{assets:r,allowMultiple:a,selectedAssets:l,courseId:t.id,nextPageIndex:f}),n.createElement(v,{dismissed:s}))},AssetAdminModal.prototype.render=function render(){var e=this.props,t=e.hideFooter,r=e.selectedAssets,o=e.uploadedAssets,i=e.hideHeaderTabs,u=e.hideSelectButton,l=e.onSelect,p=e.onCancel,d=a({active:this.state.activeTabId===C.Assets}),f=a({active:this.state.activeTabId===C.Upload});return n.createElement("div",{className:"rc-AssetAdminModal"},n.createElement(c,{modalName:"AssetAdminModal",handleClose:this.handleClose},!i&&n.createElement("header",{className:"asset-modal-header"},n.createElement("button",{className:d+" button-link",onClick:_(this.selectTab).partial(C.Assets)},s("Assets")),n.createElement("button",{className:f+" button-link",onClick:_(this.selectTab).partial(C.Upload)},s("Upload"))),n.createElement("div",{className:"asset-modal-content"},this.renderActiveTabId()),!t&&n.createElement(y,{selectedAssets:r,uploadedAssets:o,onSelect:l,onCancel:p,hideSelectButton:u})))},AssetAdminModal}(n.Component),t.propTypes={courseId:n.PropTypes.string.isRequired,course:n.PropTypes.object,assets:n.PropTypes.array,assetType:n.PropTypes.oneOf(["image","video","subtitle","pdf","audio","generic"]),pdfTemplate:n.PropTypes.oneOf(["slides"]),tab:n.PropTypes.oneOf([C.Assets,C.Upload]),nextPageIndex:n.PropTypes.string,hideHeaderTabs:n.PropTypes.bool,hideFooter:n.PropTypes.bool,hideSelectButton:n.PropTypes.bool,allowMultiple:n.PropTypes.bool,selectedAssets:n.PropTypes.array,uploadedAssets:n.PropTypes.array,uploadAttempts:n.PropTypes.object,uploadStatus:n.PropTypes.object,onSelect:n.PropTypes.func,onCancel:n.PropTypes.func.isRequired,isNoticeMessageDismissed:n.PropTypes.bool},t.contextTypes={executeAction:n.PropTypes.func.isRequired},t.defaultProps={tab:C.Assets,allowMultiple:!0},t.shouldReturnUploadedAssets=function(e,t){return t&&e.length>0||!t&&1===e.length},r),w=o(E,["AssetAdminStore"],function(e,t){var r=e.AssetAdminStore;return{course:r.getCourse(),assets:r.getAssets(),nextPageIndex:r.getNextPageIndex(),selectedAssets:r.getSelectedAssets(),uploadStatus:r.getUploadStatus(),uploadedAssets:r.getUploadedAssets(),uploadAttempts:r.getUploadAttempts(),isNoticeMessageDismissed:r.isNoticeMessageDismissed()}}),S=function(e){function FluxibleAssetAdminModal(){return _classCallCheck(this,FluxibleAssetAdminModal),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(FluxibleAssetAdminModal,e),FluxibleAssetAdminModal.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=l.createContext()},FluxibleAssetAdminModal.prototype.render=function render(){return n.createElement(i,{context:this.fluxibleContext.getComponentContext()},n.createElement(w,this.props))},FluxibleAssetAdminModal}(n.Component);module.exports=S}.apply(exports,t))&&(module.exports=r)},422:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(216),e(426),e(151),e(534),e(89),e(363)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(216),i=e(426),a=e(151),s=e(534),c=e(89),u=c.getAssetsListByCourse;e(363);var l=(r=t=function(e){function AssetBrowser(){var t,r,n;_classCallCheck(this,AssetBrowser);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={isLoading:!1},r.handleInfiniteScroll=function(){var e=r.props,t=e.courseId,n=e.nextPageIndex;n&&(r.setState({isLoading:!0}),r.context.executeAction(u,{courseId:t,nextPageIndex:n}))},n=t,_possibleConstructorReturn(r,n)}return _inherits(AssetBrowser,e),AssetBrowser.prototype.getChildContext=function getChildContext(){return{scrollContainer:".rc-AssetAdminModal .scrollable-assets-list"}},AssetBrowser.prototype.componentDidUpdate=function componentDidUpdate(e){e.nextPageIndex!==this.props.nextPageIndex&&this.setState({isLoading:!1})},AssetBrowser.prototype.render=function render(){var e=this.props,t=e.assets,r=e.selectedAssets,c=e.allowMultiple,u=e.hideHeader;return n.createElement("div",{className:"rc-AssetBrowser"},n.createElement("div",{className:"assets-wrapper"},!t&&n.createElement("div",{className:"assets-loading-state"},n.createElement(a,null)),!u&&n.createElement(i,null),t&&n.createElement("div",{className:"scrollable-assets-list"},n.createElement(s,{isLoading:this.state.isLoading,onInfiniteScroll:this.handleInfiniteScroll},n.createElement(o,{assets:t,selectedAssets:r,allowMultiple:c})))))},AssetBrowser}(n.Component),t.propTypes={courseId:n.PropTypes.string.isRequired,assets:n.PropTypes.array,selectedAssets:n.PropTypes.array,nextPageIndex:n.PropTypes.string,allowMultiple:n.PropTypes.bool,hideHeader:n.PropTypes.bool},t.contextTypes={executeAction:n.PropTypes.func.isRequired},t.childContextTypes={scrollContainer:n.PropTypes.string},r);module.exports=l}.apply(exports,t))&&(module.exports=r)},423:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(2),e(18),e(6),e(89),e(364)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),_=e(2),o=e(18),i=e(6),a=e(89),s=a.selectAsset;e(364);var c=(r=t=function(e){function AssetItem(){var t,r,n;_classCallCheck(this,AssetItem);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={selected:!1},r.selectItem=function(e){var t=r.props.allowMultiple;r.context.executeAction(s,{asset:e,allowMultiple:t})},n=t,_possibleConstructorReturn(r,n)}return _inherits(AssetItem,e),AssetItem.prototype.shouldComponentUpdate=function shouldComponentUpdate(e){return this.props.isSelected!==e.isSelected},AssetItem.prototype.render=function render(){var e=this.props.asset,t=i({selected:this.props.isSelected});return n.createElement("div",{className:"rc-AssetItem"},n.createElement("button",{onClick:_(this.selectItem).partial(e),className:t+" button-link"},n.createElement("span",{className:"asset-name"},e.filename),n.createElement("span",{className:"asset-date"},o(e.createdAt).format("ll")),n.createElement("span",{className:"asset-type"},AssetItem.getFileExtension(e.filename))))},AssetItem}(n.Component),t.propTypes={asset:n.PropTypes.object,isSelected:n.PropTypes.bool,allowMultiple:n.PropTypes.bool},t.contextTypes={executeAction:n.PropTypes.func.isRequired},t.defaultProps={allowMultiple:!0},t.getFileExtension=function(e){var t=e.lastIndexOf(".");if(t>-1)return e.substring(t+1);return"-"},r);module.exports=c}.apply(exports,t))&&(module.exports=r)},424:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(6),e(1),e(25),e(216),e(89),e(74),e(8),e(103),e(365)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t,r,n,o,i,_=e(2),a=e(6),s=e(1),c=e(25),u=e(216),l=e(89),p=l.openFileBrowser,d=l.initializeUploader,f=e(74),h=e(8),m=h.FormattedMessage,g=e(103),y=g.IDLE,v=g.IN_PROGRESS,b=g.FAILED,C=g.SUCCESS,E=(t={},_defineProperty(t,v,f("Uploading")),_defineProperty(t,b,f("Failed")),_defineProperty(t,C,f("Uploded")),t);e(365);var w=(n=r=function(e){function UploadList(){return _classCallCheck(this,UploadList),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(UploadList,e),UploadList.prototype.render=function render(){var e=this.props,t=e.status,r=e.files,n=E[t]||"";return s.createElement("ul",{className:"asset-files-list"},_(r).map(function(e){return s.createElement("li",{key:e.name},s.createElement("span",{className:"asset-file-name"},e.name),s.createElement("span",{className:"asset-file-status"},n))}))},UploadList}(s.Component),r.propTypes={files:s.PropTypes.array,status:s.PropTypes.string},n),S=(i=o=function(e){function AssetUploader(){var t,r,n;_classCallCheck(this,AssetUploader);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={isDropZoneActive:!1},r.handleDragEnter=function(e){e.preventDefault(),r.setState({isDropZoneActive:!0})},r.resetDropZone=function(){r.setState({isDropZoneActive:!1})},r.openFileBrowser=function(){r.context.executeAction(p)},n=t,_possibleConstructorReturn(r,n)}return _inherits(AssetUploader,e),AssetUploader.prototype.componentDidMount=function componentDidMount(){var e=this.props,t=e.assetType,r=e.pdfTemplate,n=e.course,o=n.id,i=c.findDOMNode(this.refs.bulkUploadContainer);this.context.executeAction(d,{courseId:o,assetType:t,pdfTemplate:r,container:i})},AssetUploader.prototype.renderUploadFailure=function renderUploadFailure(){var e=this.props,t=e.uploadStatus,r=e.uploadAttempts;if(t.state===b)return s.createElement("div",{className:"upload-status-wrapper"},s.createElement(w,{files:r.success,status:C}),s.createElement(w,{files:r.error,status:b}))},AssetUploader.prototype.renderUploadedAssets=function renderUploadedAssets(){var e=this.props,t=e.uploadedAssets,r=e.selectedAssets,n=e.allowMultiple;if(!_(t).isEmpty())return s.createElement(u,{assets:t,allowMultiple:n,selectedAssets:r})},AssetUploader.prototype.renderUploader=function renderUploader(){var e=a("uploader-drop-zone-wrapper",{active:this.state.isDropZoneActive,hidden:this.props.uploadStatus.state!==y});return s.createElement("div",{ref:"fileDropZone",className:e,onDrop:this.resetDropZone,onDragLeave:this.resetDropZone,onDragEnter:this.handleDragEnter},s.createElement("div",{className:"uploader-drop-zone"},s.createElement("div",{ref:"bulkUploadContainer"}),s.createElement("button",{className:"uploader-action",onClick:this.openFileBrowser},f("Add Files")),s.createElement("p",{className:"upload-guideline"},f("or drop files here")),s.createElement("p",{className:"upload-note"},s.createElement(m,{message:f("The files you upload will be added to {courseName} course assets."),courseName:this.props.course.name}))))},AssetUploader.prototype.renderUploadProgress=function renderUploadProgress(){var e=this.props.uploadStatus;if(e.state===v){var t=e.progress,r=e.files,n=e.state;return s.createElement("div",{className:"upload-status-wrapper"},s.createElement("div",{className:"upload-status-bar"},s.createElement("span",{className:"progress-bar",style:{width:t+"%"}})),s.createElement(w,{files:r,status:n}))}},AssetUploader.prototype.render=function render(){return s.createElement("div",{className:"rc-AssetUploader"},s.createElement("h2",{className:"folder-name"},s.createElement(m,{message:f("Upload to {courseName}"),courseName:this.props.course.name})),s.createElement("div",{className:"uploader-wrapper"},this.renderUploadProgress(),this.renderUploadFailure(),this.renderUploadedAssets(),this.renderUploader()))},AssetUploader}(s.Component),o.propTypes={course:s.PropTypes.object.isRequired,assetType:s.PropTypes.string,pdfTemplate:s.PropTypes.string,allowMultiple:s.PropTypes.bool,uploadStatus:s.PropTypes.object.isRequired,uploadAttempts:s.PropTypes.object,selectedAssets:s.PropTypes.array,uploadedAssets:s.PropTypes.array},o.contextTypes={executeAction:s.PropTypes.func.isRequired},i);module.exports=S}.apply(exports,t))&&(module.exports=r)},425:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(2),e(74),e(6),e(366)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),_=e(2),o=e(74),i=e(6);e(366);var a=(r=t=function(e){function AssetsFooter(){var t,r,n;_classCallCheck(this,AssetsFooter);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.addSelectedAssets=function(){r.props.onSelect(r.props.selectedAssets)},n=t,_possibleConstructorReturn(r,n)}return _inherits(AssetsFooter,e),AssetsFooter.prototype.renderUploadStatus=function renderUploadStatus(){if(!_(this.props.uploadedAssets).isEmpty())return n.createElement("span",{className:"upload-complete-message"},o("Upload complete! Next, select a file to use."))},AssetsFooter.prototype.render=function render(){var e=this.props,t=e.selectedAssets,r=e.hideSelectButton,a=e.onCancel,s=!_(t).isEmpty(),c=i({active:s});return n.createElement("footer",{className:"asset-browser-footer"},this.renderUploadStatus(),n.createElement("button",{onClick:a},o("Cancel")),!r&&n.createElement("button",{className:c,onClick:this.addSelectedAssets,disabled:!s},o("Select")))},AssetsFooter}(n.Component),t.propTypes={selectedAssets:n.PropTypes.array,uploadedAssets:n.PropTypes.array,hideSelectButton:n.PropTypes.bool,onSelect:n.PropTypes.func.isRequired,onCancel:n.PropTypes.func.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},426:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(74),e(368)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=e(1),r=e(74);e(368);var n=function(e){function AssetsListHeader(){return _classCallCheck(this,AssetsListHeader),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(AssetsListHeader,e),AssetsListHeader.prototype.render=function render(){return t.createElement("header",{className:"rc-AssetsListHeader horizontal-box"},t.createElement("a",{className:"asset-name-header"},r("Name")),t.createElement("a",{className:"asset-date-header"},r("Updated")),t.createElement("a",{className:"asset-type-header"},r("File Type")))},AssetsListHeader}(t.Component);module.exports=n}.apply(exports,t))&&(module.exports=r)},427:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(74),e(8),e(89),e(369)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(74),i=e(8),a=i.FormattedMessage,s=e(89),c=s.dismissNotice,u="July 23, 2015";e(369);var l=(r=t=function(e){function NoticeMessage(){var t,r,n;_classCallCheck(this,NoticeMessage);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.dismissNotice=function(){r.context.executeAction(c)},n=t,_possibleConstructorReturn(r,n)}return _inherits(NoticeMessage,e),NoticeMessage.prototype.render=function render(){if(this.props.dismissed)return null;return n.createElement("div",{className:"rc-NoticeMessage"},n.createElement(a,{message:o("Assets uploaded after {listDate} are shown here."),listDate:"July 23, 2015"}),n.createElement("button",{className:"dismiss-action",onClick:this.dismissNotice},"×"))},NoticeMessage}(n.Component),t.propTypes={dismissed:n.PropTypes.bool},t.contextTypes={executeAction:n.PropTypes.func.isRequired},r);module.exports=l}.apply(exports,t))&&(module.exports=r)},428:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(101),e(103)],void 0!==(r=function(require,exports,module){"use strict";var _=e(2),t=e(101),r=e(103),n=t({storeName:"AssetAdminStore",uploadStatus:{state:r.IDLE},selectedAssets:[],uploadedAssets:[],uploadAttempts:{success:[],error:[]},assets:null,assetMap:{},assetsListReady:!1,noticeMessageDismissed:!1,getCourse:function getCourse(){return this.course},getAssets:function getAssets(){return this.assets},getNextPageIndex:function getNextPageIndex(){return this.nextPageIndex},getSelectedAssets:function getSelectedAssets(){return this.selectedAssets},getUploadedAssets:function getUploadedAssets(){return this.uploadedAssets},getUploadAttempts:function getUploadAttempts(){return this.uploadAttempts},getUploadStatus:function getUploadStatus(){return this.uploadStatus},getAssetMap:function getAssetMap(){return this.assetMap},isAssetsListReady:function isAssetsListReady(){return this.assetsListReady},isNoticeMessageDismissed:function isNoticeMessageDismissed(){return this.noticeMessageDismissed},resetAssets:function resetAssets(){this.selectedAssets=[],this.uploadedAssets=[],this.uploadAttempts.success=[],this.uploadAttempts.error=[],this.uploadStatus.state=r.IDLE}});n.handlers={INITIALIZED:function INITIALIZED(e){this.noticeMessageDismissed=e.noticeDismissed,e.course&&(this.course=e.course),this.resetAssets(),this.emitChange()},RECEIVED_ASSETS_LIST:function RECEIVED_ASSETS_LIST(e){var t=e.assets,r=e.assetMap,n=e.nextPageIndex;e.isInitialFetch?(this.assets=t,this.resetAssets()):this.assets=this.assets.concat(t),r&&Object.assign(this.assetMap,r),this.assetsListReady=!0,this.nextPageIndex=n,this.emitChange()},START_RECEIVING_ASSETS:function START_RECEIVING_ASSETS(){this.assetsListReady=!1,this.emitChange()},SELECT_ASSET:function SELECT_ASSET(e){var t=e.asset;_(this.selectedAssets).chain().where({id:t.id}).isEmpty().value()?(e.allowMultiple||(this.selectedAssets=[]),this.selectedAssets.push(t)):this.selectedAssets=_(this.selectedAssets).without(t),this.emitChange()},NOTICE_MESSAGE_DISMISSED:function NOTICE_MESSAGE_DISMISSED(){this.noticeMessageDismissed=!0,this.emitChange()},RESET_ASSETS:function RESET_ASSETS(){this.resetAssets(),this.emitChange()},UPLOAD_STATUS_UPDATED:function UPLOAD_STATUS_UPDATED(e){this.uploadStatus.state=e.state,this.uploadStatus.progress=e.progress,e.files&&(this.uploadStatus.files=e.files),e.uploadedAssets&&(this.uploadedAssets=e.uploadedAssets),e.uploadAttempts&&(this.uploadAttempts=e.uploadAttempts),this.emitChange()}},module.exports=n}.apply(exports,t))&&(module.exports=r)},429:function(module,exports,e){var t,r;t=[e,exports,module,e(4),e(24),e(10)],void 0!==(r=function(require,exports,module){"use strict";var t=e(4),r=e(24),n=e(10),o=r("/api/authoringAssets.v1/",{type:"rest"}),i=r("/api/onDemandCourses.v1/",{type:"rest"}),a="AssetAdminModalNoticeDismissed",s={getCourse:function getCourse(e){var r=new n(e);return t(i.get(r.toString()))},getAssetsListByCourse:function getAssetsListByCourse(e){var r=(new n).addQueryParam("q","listByCourse").addQueryParam("courseId",e.courseId).addQueryParam("limit",20).addQueryParam("start",e.nextPageIndex||0).addQueryParam("fields","name,filename,createdAt,typeName,pageCount,audioDuration,videoDuration,tags");return e.assetType&&r.addQueryParam("typeName",e.assetType),e.keyword&&r.addQueryParam("name",e.keyword),t(o.get(r.toString()))},getAssetsById:function getAssetsById(e,r){var i=(new n).addQueryParam("q","fromCourse").addQueryParam("courseId",e).addQueryParam("assetIds",r.join()).addQueryParam("fields","name,filename,typeName");return t(o.get(i.toString()))},getAssetsListByCourseByFileExtension:function getAssetsListByCourseByFileExtension(e,r){var i=(new n).addQueryParam("q","listByCourse").addQueryParam("courseId",e).addQueryParam("fields","name,filename,typeName").addQueryParam("fileExtension",r);return t(o.get(i.toString()))},deleteAssets:function deleteAssets(e){var r=(new n).addQueryParam("action","hide").addQueryParam("assetIds",e);return t(o.post(r.toString()))},dismissNotice:function dismissNotice(){localStorage.setItem("AssetAdminModalNoticeDismissed",!0)},isNoticeDismissed:function isNoticeDismissed(){return null!==localStorage.getItem("AssetAdminModalNoticeDismissed")}};module.exports=s}.apply(exports,t))&&(module.exports=r)},430:function(module,exports,e){var t,r;t=[e,exports,module,e(40),e(96)],void 0!==(r=function(require,exports,module){"use strict";var t=e(40),r=e(96),n="up.asset_admin",o={track:function track(e,n,o,i){var a="up.asset_admin."+e+"."+n,s=Object.assign({user_id:r.id},o);i?t.pushV2([a,s,i]):t.pushV2([a,s])}};module.exports=o}.apply(exports,t))&&(module.exports=r)},431:function(module,exports,e){var t,r;t=[e,exports,module,e(80)],void 0!==(r=function(require,exports,module){"use strict";var t=e(80),r={initialize:function initialize(e,r){return this.assetManager=new t,this.actionContext=e,this.assetManager.initializeBulkUploader(r.container,r.assetType,{context:{courseId:r.courseId},pendingAssetCreation:{typeName:"pending",pdfTemplate:r.pdfTemplate,tags:[]},assetCreationUrl:"/api/authoringAssetCreationAttempts.v1"}),this.assetManager},openFileBrowser:function openFileBrowser(){this.assetManager.selectFile()},startUpload:function startUpload(){this.assetManager.upload()},getProgressPercentage:function getProgressPercentage(e){var t=e.bytes_received,r=e.bytes_expected;return Math.round(t/r*100)}};module.exports=r}.apply(exports,t))&&(module.exports=r)},432:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(221),e(32),e(370)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=e(1),r=e(221),n=e(32);e(370);var o=function(e){function AuthorEvaluatorSaveModal(){return _classCallCheck(this,AuthorEvaluatorSaveModal),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(AuthorEvaluatorSaveModal,e),AuthorEvaluatorSaveModal.prototype.render=function render(){return t.createElement(r,{size:"small",allowClose:!1,withTitle:!0,heading:n("Saving"),className:"rc-AuthorEvaluatorSaveModal"},t.createElement("div",{className:"horizontal-box align-items-spacearound body-2-text"},n("Please do not refresh the page.")))},AuthorEvaluatorSaveModal}(t.Component);module.exports=o}.apply(exports,t))&&(module.exports=r)},433:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(32),i=(r=t=function(e){function AuthoringEvaluatorCreate(){var t,r,n;_classCallCheck(this,AuthoringEvaluatorCreate);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.state={evaluatorId:"",createInProgress:!1},r.handleCreate=function(){var e=r.state.evaluatorId;r.setState({createInProgress:!0}),r.props.onClickCreate(e)},n=t,_possibleConstructorReturn(r,n)}return _inherits(AuthoringEvaluatorCreate,e),AuthoringEvaluatorCreate.prototype.render=function render(){var e=this,t=this.state.createInProgress;return n.createElement("div",{className:"rc-AuthoringEvaluatorCreate"},n.createElement("h3",{style:{paddingTop:20,paddingBottom:5},className:"headline-1-text"},o("Evaluator Id")),n.createElement("div",{className:"caption-text",style:{paddingBottom:10}},o("Enter an existing evaluator id to clone")),n.createElement("input",{type:"text",style:{width:300,padding:8},onChange:function onChange(t){return e.setState({evaluatorId:t.target.value})}}),n.createElement("div",{style:{paddingTop:40}},n.createElement("button",{disabled:t,className:"primary",onClick:this.handleCreate},o(t?"Creating...":"Create Evaluator"))))},AuthoringEvaluatorCreate}(n.Component),t.propTypes={onClickCreate:n.PropTypes.func.isRequired},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},434:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(439),e(444),e(436),e(432),e(145),e(276),e(61),e(106),e(142),e(220),e(32),e(371)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o=e(1),i=e(439),a=e(444),s=e(436),c=e(432),u=e(145),l=e(276),p=e(61),d=e(106),f=e(142),h=e(220),m=e(32);e(371);var g=(r=t=function(e){function AuthoringEvaluatorEditor(t){_classCallCheck(this,AuthoringEvaluatorEditor);var r=_possibleConstructorReturn(this,e.call(this,t));n.call(r);var o=t.starterCode;return r.state={starterCode:o,evaluation:null,evaluationRunner:null,authoringEvaluator:null,publishInProgress:!1,hasValidTestCases:!1,hasError:!1,runInProgress:!1,hasHarnessChanged:!1},r}return _inherits(AuthoringEvaluatorEditor,e),AuthoringEvaluatorEditor.prototype.componentDidMount=function componentDidMount(){var e=this,t=this.props.publishedEvaluatorId,r=f.getUnversionedId(t);h.get(r).then(function(t){var r=new f(t),n=new l(r.draft.id),o=n.evaluation;e.setState({authoringEvaluator:r,evaluationRunner:n,evaluation:o})})},AuthoringEvaluatorEditor.prototype.render=function render(){var e=this.state,t=e.authoringEvaluator,r=e.starterCode,n=e.evaluation,u=e.runInProgress,l=e.publishInProgress,p=e.hasHarnessChanged,d=r.language;if(null==t||null==n)return null;var f=t.draft,h=this.state.hasValidTestCases;return o.createElement("div",{className:"rc-AuthoringEvaluatorEditor"},o.createElement(s,{language:d,evaluatorDraft:f,onChange:this.handleEvaluatorDraftChange}),o.createElement(a,{language:d,onChange:this.handleTestCaseChange,onCancel:this.handleEvaluationCancel,setValidation:this.setHasValidTestCases,handleRun:this.handleEvaluationRun,authoringEvaluator:t,evaluation:n,runInProgress:u,hasHarnessChanged:p}),o.createElement(i,{starterCode:r,onChange:this.handleStarterCodeChange}),o.createElement("div",{className:"horizontal-box align-items-right",style:{paddingTop:40}},o.createElement("div",null,o.createElement("button",{style:{marginRight:20},className:"primary remove-execution-btn",onClick:this.props.onRemove},m("Remove Execution")),o.createElement("button",{disabled:!h||l,className:"primary",onClick:this.handlePublish},m(l?"Saving...":"Save")))),this.state.hasError&&o.createElement("div",{className:"caption-text color-secondary-text align-right",style:{marginTop:8}},m("An error has occurred.")),l&&o.createElement(c,null))},AuthoringEvaluatorEditor}(o.Component),t.propTypes={publishedEvaluatorId:o.PropTypes.string.isRequired,starterCode:o.PropTypes.instanceOf(u).isRequired,onPublish:o.PropTypes.func.isRequired,onRemove:o.PropTypes.func.isRequired,courseId:o.PropTypes.string.isRequired},n=function _initialiseProps(){var e=this;this.handleEvaluationRun=function(t){if(e.setState({runInProgress:!0}),null==e.state.authoringEvaluator)return;var r=function runEvaluation(r){r.run(t,function(t){return e.setState({evaluation:t,runInProgress:!1})})};e.state.hasHarnessChanged?h.save(e.state.authoringEvaluator).then(function(t){var n=new f(t),o=new l(n.draft.id);e.setState({authoringEvaluator:n,evaluationRunner:o,hasHarnessChanged:!1}),r(o)}).catch(function(t){e.setState({hasError:!0})}):r(e.state.evaluationRunner)},this.handleEvaluationCancel=function(){if(null==e.state.evaluationRunner)return;e.state.evaluationRunner.cancel(function(t){return e.setState({evaluation:t})})},this.handleEvaluatorDraftChange=function(t){if(null==e.state.authoringEvaluator)return;var r=e.state.authoringEvaluator,n=r.id,o=r.metadata,i=r.testCases,a=i.map(function(e){return e.toJSON()}),s=new f({id:n,testCases:a,metadata:o,draft:t});e.setState({authoringEvaluator:s,hasHarnessChanged:!0})},this.handleTestCaseChange=function(t){var r=t.testCases;if(null==e.state.authoringEvaluator)return;var n=e.state.authoringEvaluator,o=n.id,i=n.metadata,a=n.draft,s=r.map(function(e){return e.toJSON()}),c=new f({id:o,testCases:s,metadata:i,draft:a});e.setState({authoringEvaluator:c})},this.handleStarterCodeChange=function(t){e.setState({starterCode:t})},this.handlePublish=function(){if(e.setState({publishInProgress:!0,hasError:!1}),null==e.state.authoringEvaluator)return;h.save(e.state.authoringEvaluator).then(function(t){var r=new f(t);return e.setState({authoringEvaluator:r,hasHarnessChanged:!1}),h.publish(r)}).then(function(t){var r=e.state.starterCode.expression,n=new f(t),o=n.versionedId;e.setState({publishInProgress:!1,authoringEvaluator:n}),e.props.onPublish(o,r)}).catch(function(t){e.setState({publishInProgress:!1,hasError:!0})})},this.setHasValidTestCases=function(t){e.setState({hasValidTestCases:t})}},r);module.exports=g}.apply(exports,t))&&(module.exports=r)},435:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(175),e(61),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(175),i=e(61),a=e(32),s=(r=t=function(e){function CodeOutput(){return _classCallCheck(this,CodeOutput),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CodeOutput,e),CodeOutput.prototype.render=function render(){var e=this.props,t=e.evaluation,r=e.evaluatorDraftId,i=e.onCancel,s=t.active,c=t.response;return n.createElement("div",{className:"rc-CodeOutput"},!s&&!c&&n.createElement("div",{className:"caption-text color-secondary-text",style:{margin:16}},a("Run the code on the left to see the output that learners will see when running your code.")),n.createElement(o,{onCancel:i,evaluation:t,evaluatorId:r}))},CodeOutput}(n.Component),t.propTypes={evaluatorDraftId:n.PropTypes.string.isRequired,evaluation:n.PropTypes.instanceOf(i).isRequired,onCancel:n.PropTypes.func.isRequired},r);module.exports=s}.apply(exports,t))&&(module.exports=r)},436:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(437),e(219),e(14),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(437),i=e(219),a=e(14),s=e(32),c=(r=t=function(e){function EvaluatorDraftEditor(){var t,r,n;_classCallCheck(this,EvaluatorDraftEditor);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.handleHarnessChange=function(e){var t=r.props.evaluatorDraft,n=t.id,o=t.isPublished,a=t.versionedEngineId,s={harness:e,versionedEngineId:a},c=new i({id:n,evaluator:s,isPublished:o});r.props.onChange(c.toJSON())},r.onChangeVersionedEngineId=function(e){if(e.target instanceof HTMLInputElement){var t=e.target.value,n=r.props.evaluatorDraft,o=n.id,a=n.isPublished,s=r.props.evaluatorDraft.harness.toJSON(),c={harness:s,versionedEngineId:t},u=new i({id:o,evaluator:c,isPublished:a});r.props.onChange(u.toJSON())}},n=t,_possibleConstructorReturn(r,n)}return _inherits(EvaluatorDraftEditor,e),EvaluatorDraftEditor.prototype.render=function render(){var e=this.props,t=e.evaluatorDraft,r=e.language,i=t.versionedEngineId,c=t.harness,u=a.isSuperuser();return n.createElement("div",{className:"rc-EvaluatorDraftEditor"},n.createElement("div",{className:"horizontal-box align-items-vertical-center"},n.createElement("h3",{className:"body-2-text"},s("Versioned Engine Id:")),!u&&n.createElement("p",{style:{paddingLeft:20}},i),u&&n.createElement("input",{size:30,maxLength:68,style:{marginLeft:20},value:i,onChange:this.onChangeVersionedEngineId})),n.createElement(o,{harness:c,language:r,onChange:this.handleHarnessChange}))},EvaluatorDraftEditor}(n.Component),t.propTypes={language:n.PropTypes.string,evaluatorDraft:n.PropTypes.instanceOf(i).isRequired,onChange:n.PropTypes.func.isRequired},r);module.exports=c}.apply(exports,t))&&(module.exports=r)},437:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(438),e(441),e(144),e(146),e(143)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(438),i=e(441),a=e(144),s=e(146),c=e(143),u=(r=t=function(e){function HarnessEditor(){return _classCallCheck(this,HarnessEditor),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(HarnessEditor,e),HarnessEditor.prototype.render=function render(){var e=this.props.harness;if(e instanceof a)return n.createElement(o,this.props);if(e instanceof s)return n.createElement(i,this.props);return null},HarnessEditor}(n.Component),t.propTypes={harness:n.PropTypes.instanceOf(c),language:n.PropTypes.string,onChange:n.PropTypes.func.isRequired},r);module.exports=u}.apply(exports,t))&&(module.exports=r)},438:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(217),e(144)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(217),i=e(144),a=(r=t=function(e){function ReplHarnessEditor(){var t,r,n;_classCallCheck(this,ReplHarnessEditor);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=new i({preamble:e});r.props.onChange(t.toJSON())},n=t,_possibleConstructorReturn(r,n)}return _inherits(ReplHarnessEditor,e),ReplHarnessEditor.prototype.render=function render(){var e=this.props,t=e.harness.preamble,r=e.language;return n.createElement("div",{className:"rc-ReplHarnessEditor"},n.createElement(o,{preamble:t,language:r,onChange:this.handleChange}))},ReplHarnessEditor}(n.Component),t.propTypes={harness:n.PropTypes.instanceOf(i),language:n.PropTypes.string,onChange:n.PropTypes.func.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},439:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(111),e(145),e(105),e(104),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(111),i=e(145),a=e(105),s=e(104),c=e(32),u=(r=t=function(e){function SimpleStarterCodeEditor(){var t,r,n;_classCallCheck(this,SimpleStarterCodeEditor);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=r.props.starterCode.language,n=new i({expression:e,language:t});r.props.onChange(n)},n=t,_possibleConstructorReturn(r,n)}return _inherits(SimpleStarterCodeEditor,e),SimpleStarterCodeEditor.prototype.render=function render(){var e=this.props.starterCode,t=e.expression,r=e.language;return n.createElement("div",{className:"rc-SimpleStarterCodeEditor"},n.createElement(a,{style:{paddingTop:20,paddingBottom:5,display:"inline-block"}},c("Starter Code")),n.createElement(s,{style:{marginLeft:20,display:"inline-block"}},c("Visible to learners")),n.createElement(o,{value:t,language:r,onChange:this.handleChange}))},SimpleStarterCodeEditor}(n.Component),t.propTypes={starterCode:n.PropTypes.instanceOf(i).isRequired,onChange:n.PropTypes.func.isRequired},r);module.exports=u}.apply(exports,t))&&(module.exports=r)},440:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(6),e(111),e(435),e(175),e(61),e(107),e(32),e(372)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(6),i=e(111),a=e(435),s=e(175),c=e(61),u=e(107),l=e(32);e(372);var p=(r=t=function(e){function TestCaseEditor(){var t,r,n;_classCallCheck(this,TestCaseEditor);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.handleRun=function(){var e=r.props.testCaseRunner.testCase.expression;r.props.handleRun(e)},r.onChangeExpression=function(e){var t=r.props.testCaseRunner,n=t.copy();n.testCase.expression=e,r.props.onChange(n)},r.onChangeTitle=function(e){var t=r.props.testCaseRunner,n=t.copy();e.target instanceof HTMLInputElement&&(n.testCase.name=e.target.value),r.props.onChange(n)},n=t,_possibleConstructorReturn(r,n)}return _inherits(TestCaseEditor,e),TestCaseEditor.prototype.render=function render(){var e=this.props,t=e.testCaseRunner,r=e.isTestCaseAdded,u=e.selectedTestCaseIndex,p=e.language,d=e.onCancel,f=e.evaluatorDraftId,h=e.titleRow,m=e.onOverwriteOutput,g=e.runInProgress,y=t.response,v=t.testCase.expression,b=""===v,C=t.testCase.result&&t.testCase.result.toJSON(),E=new c({active:!1,fail:!1,response:C}),w=y&&y.toJSON(),S=new c({active:!1,fail:!1,response:w}),O=null;return null==w||w.hasSuccessResult||null==w.logUrls||(O=w.logUrls.stderrUrl),n.createElement("div",{className:"rc-TestCaseEditor"},n.createElement("div",{className:"row"},n.createElement("div",{className:"column"},h)),n.createElement("div",{className:"row"},n.createElement("div",{className:"column"},n.createElement("div",{className:"horizontal-box align-items-spacebetween flex-1",style:{padding:"8px 12px"}},l("Input"),n.createElement("button",{className:"button-link body-2-text caption-text",onClick:this.handleRun,disabled:b},l("Run")))),r&&n.createElement("div",{className:"column"},n.createElement("div",{className:"flex-1",style:{padding:"8px 12px"}},l("Output")),n.createElement("button",{className:"button-link body-2-text",disabled:!t.isFailed,onClick:m,style:{marginRight:12}},l("Overwrite"))),n.createElement("div",{className:o("column","horizontal-box","align-items-spacebetween",{"flex-2":!r})},n.createElement("div",{className:"flex-1",style:{padding:"8px 12px"}},l("Expected Output")))),n.createElement("div",{className:"row"},n.createElement("div",{className:"column"},n.createElement("div",{className:"flex-1 align-self-start"},n.createElement(i,{key:u,value:v,language:p,onChange:this.onChangeExpression}),b&&n.createElement("p",{className:"caption-text color-secondary-text",style:{paddingLeft:16}},l("Add some code to run this test case.")))),n.createElement("div",{className:o("column","vertical-box",{"flex-2":!r})},n.createElement(a,{evaluatorDraftId:f,evaluation:S,onCancel:d,runInProgress:g}),null!=w&&n.createElement("div",{className:"caption-text color-secondary-text",style:{padding:"8px 12px"}},l("Evaluation ID:"),"   ",w.id,O&&n.createElement("div",null,n.createElement("a",{href:O},l("stderr logs"))))),r&&n.createElement("div",{className:"column vertical-box"},n.createElement(s,{evaluatorId:f,evaluation:E,onCancel:function onCancel(){}}))))},TestCaseEditor}(n.Component),t.propTypes={testCaseRunner:n.PropTypes.instanceOf(u).isRequired,isTestCaseAdded:n.PropTypes.bool.isRequired,selectedTestCaseIndex:n.PropTypes.number,language:n.PropTypes.string.isRequired,onChange:n.PropTypes.func.isRequired,onCancel:n.PropTypes.func.isRequired,handleRun:n.PropTypes.func.isRequired,evaluatorDraftId:n.PropTypes.string.isRequired,titleRow:n.PropTypes.node.isRequired,onOverwriteOutput:n.PropTypes.func.isRequired,runInProgress:n.PropTypes.bool},r);module.exports=p}.apply(exports,t))&&(module.exports=r)},441:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(111),e(217),e(105),e(104),e(146),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(111),i=e(217),a=e(105),s=e(104),c=e(146),u=e(32),l=(r=t=function(e){function TestCaseHarnessEditor(){var t,r,n;_classCallCheck(this,TestCaseHarnessEditor);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.handleChange=function(e,t){var n=new c({preamble:e,testCase:t});r.props.onChange(n.toJSON())},r.handlePreambleChange=function(e){var t=r.props.harness.testCase;r.handleChange(e,t)},r.handleTestCaseChange=function(e){var t=r.props.harness.preamble;r.handleChange(t,e)},n=t,_possibleConstructorReturn(r,n)}return _inherits(TestCaseHarnessEditor,e),TestCaseHarnessEditor.prototype.render=function render(){var e=this.props,t=e.harness,r=t.preamble,c=t.testCase,l=e.language;return n.createElement("div",{className:"rc-TestCaseHarnessEditor"},n.createElement(i,{preamble:r,language:l,onChange:this.handlePreambleChange}),n.createElement(a,{style:{paddingTop:20,paddingBottom:5}},u("Grading Feedback Code")),n.createElement(s,{style:{paddingBottom:10}},u("This code will be used to evaluate and provide feedback to the learner on their submission.")),null!=c&&n.createElement(o,{value:c,language:l,onChange:this.handleTestCaseChange}))},TestCaseHarnessEditor}(n.Component),t.propTypes={harness:n.PropTypes.instanceOf(c),language:n.PropTypes.string,onChange:n.PropTypes.func.isRequired},r);module.exports=l}.apply(exports,t))&&(module.exports=r)},442:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(218),e(221),e(61),e(107),e(32),e(374)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(218),i=e(221),a=e(61),s=e(107),c=e(32);e(374);var u=(r=t=function(e){function TestCaseRunner(t,r){_classCallCheck(this,TestCaseRunner);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.handleCancel=function(){n.props.onCancel(),n.props.onClose()},n.runNextTestCase=function(){var e=n.props,t=e.onClose,r=e.handleRun,o=e.testCaseRunners,i=n.state.currentTestCaseIndex,a=o.find(function(e,t){return t>i});if(null==a)t();else{var s=o.indexOf(a);n.setState({currentTestCaseIndex:s}),r(a.testCase.expression)}},n.state={currentTestCaseIndex:-1},n}return _inherits(TestCaseRunner,e),TestCaseRunner.prototype.componentWillMount=function componentWillMount(){this.runNextTestCase()},TestCaseRunner.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){if(this.props.evaluation!==e.evaluation&&null!=e.evaluation.response){var t=e.evaluation.response,r=e.evaluation.response.id,n=e.testCaseRunners[this.state.currentTestCaseIndex],o=n.copy();o.testCase.latestEvaluationId=r,o.response=t,this.props.onChange(this.state.currentTestCaseIndex,o),this.runNextTestCase()}},TestCaseRunner.prototype.render=function render(){var e=this.props.testCaseRunners,t=this.state.currentTestCaseIndex;return n.createElement(i,{allowClose:!1,withTitle:!0,withFooter:!0,heading:c("Running test cases"),cancelLabel:c("Cancel"),onCancel:this.handleCancel,hideConfirm:!0,className:"rc-TestCaseRunner"},n.createElement("div",null,e.map(function(e,r){return n.createElement("span",{style:{marginRight:20},key:r},n.createElement(o,{name:e.testCase.name,onClick:function onClick(){},index:r,isFailed:e.isFailed,isPassed:e.isPassed,isSelected:r===t}))})))},TestCaseRunner}(n.Component),t.propTypes={evaluation:n.PropTypes.instanceOf(a).isRequired,handleRun:n.PropTypes.func.isRequired,onCancel:n.PropTypes.func.isRequired,onClose:n.PropTypes.func.isRequired,onChange:n.PropTypes.func.isRequired,testCaseRunners:n.PropTypes.arrayOf(n.PropTypes.instanceOf(s)).isRequired},r);module.exports=u}.apply(exports,t))&&(module.exports=r)},443:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(107),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(107),i=e(32),a=(r=t=function(e){function TestCaseTitleRow(){return _classCallCheck(this,TestCaseTitleRow),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(TestCaseTitleRow,e),TestCaseTitleRow.prototype.render=function render(){var e=this.props,t=e.isTestCaseAdded,r=e.testCaseRunner,o=e.onChange,a=e.onDelete,s=e.onAddTestCase,c=e.onDuplicate,u=""!==r.testCase.expression&&""!==r.testCase.name&&null!=r.response;return n.createElement("div",{className:"rc-TestCaseTitleRow horizontal-box align-items-spacebetween flex-1",style:{padding:"4px 12px"}},n.createElement("input",{type:"text",maxLength:80,onChange:o,placeholder:i("Enter test case title"),style:{border:"none",width:500},className:"body-2-text",value:r.testCase.name}),!t&&n.createElement("div",null,n.createElement("button",{className:"button-link body-2-text cancel",onClick:a,style:{marginRight:12}},i("Cancel")),n.createElement("button",{className:"button-link body-2-text add",disabled:!u,onClick:s},i("Add"))),t&&n.createElement("div",null,n.createElement("button",{className:"button-link body-2-text delete",onClick:a,style:{marginRight:12}},i("Delete")),n.createElement("button",{className:"button-link body-2-text duplicate",onClick:c,style:{marginRight:12}},i("Duplicate"))))},TestCaseTitleRow}(n.Component),t.propTypes={isTestCaseAdded:n.PropTypes.bool.isRequired,testCaseRunner:n.PropTypes.instanceOf(o).isRequired,onChange:n.PropTypes.func.isRequired,onDelete:n.PropTypes.func.isRequired,onAddTestCase:n.PropTypes.func.isRequired,onDuplicate:n.PropTypes.func.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},444:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(105),e(104),e(440),e(218),e(443),e(442),e(142),e(61),e(106),e(107),e(32)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(1),o=e(105),i=e(104),a=e(440),s=e(218),c=e(443),u=e(442),l=e(142),p=e(61),d=e(106),f=e(107),h=e(32),m=(r=t=function(e){function TestCasesSandbox(t,r){_classCallCheck(this,TestCasesSandbox);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.handleDelete=function(){var e=n.state,t=e.testCaseRunners,r=e.selectedTestCaseIndex;if(null!=e.newTestCaseRunner)n.setState({newTestCaseRunner:null});else if(null!=r){var o=t.slice();o.splice(r,1),n.setState({testCaseRunners:o,selectedTestCaseIndex:null,newTestCaseRunner:null})}},n.handleDuplicate=function(){var e=n.getCurrentTestCase();if(null!=e){var t=n.state.testCaseRunners.length,r=e.copy();r.testCase.name="Test case "+(t+1),n.setState({newTestCaseRunner:r,selectedTestCaseIndex:null})}},n.handleOverwriteOutput=function(){var e=n.getCurrentTestCase();if(null!=e){var t=e.copy();t.testCase.result=t.response,n.updateTestCase(t)}},n.handleRun=function(){n.setState({isRunning:!0})},n.onChangeTitle=function(e){var t=n.getCurrentTestCase();if(!t)return;var r=t.copy();e.target instanceof HTMLInputElement&&(r.testCase.name=e.target.value),n.onChangeTestCase(r)},n.onChangeTestCase=function(e){e.response=null,e.testCase.latestEvaluationId=null,n.updateTestCase(e)},n.getRunningTestCases=function(){var e=n.state,t=e.isRunning,r=e.testCaseRunners,o=e.runningAll,i=n.getCurrentTestCase();return o?r:t&&null!=i?[i]:[]},n.getCurrentTestCase=function(){var e=n.state,t=e.newTestCaseRunner,r=e.selectedTestCaseIndex,o=e.testCaseRunners;if(null!=t)return t;if(null!=r)return o[r];return null},n.getUncheckedTestCaseIndex=function(){for(var e=n.state.testCaseRunners,t=0;t<e.length;){if(null==e[t].response)return t;t+=1}return null},n.updateTestCase=function(e){var t=n.state,r=t.selectedTestCaseIndex,o=t.newTestCaseRunner;if(null==r&&o)n.setState({newTestCaseRunner:e});else if(null!=r){var i=n.state.testCaseRunners.slice();i[r]=e,n.setState({testCaseRunners:i})}},n.createNewTestCase=function(){var e=n.state.testCaseRunners.length,t=new d({name:"Submission example "+(e+1),expression:"",result:null,latestEvaluationId:null}),r=new f({testCase:t,response:null});n.setState({newTestCaseRunner:r,selectedTestCaseIndex:null})},n.addNewTestCase=function(){var e=n.state.newTestCaseRunner;if(null==e)return;e.testCase.result=e.response;var t=n.state.testCaseRunners.slice();t.push(e),n.setState({testCaseRunners:t,selectedTestCaseIndex:t.length-1,newTestCaseRunner:null})},n.selectTestCase=function(e){n.setState({selectedTestCaseIndex:e,newTestCaseRunner:null})},n.areTestCasesValid=function(e){return _(e.testCaseRunners).every(function(e){return e.isPassed})&&e.testCaseRunners.length>0&&null==e.newTestCaseRunner},n.runAllTestCases=function(){n.setState({runningAll:!0,isRunning:!0})},n.changeRunningTestCase=function(e,t){var r=n.state,o=r.runningAll,i=r.testCaseRunners;if(o){var a=i.slice();a[e]=t,n.setState({testCaseRunners:a})}else n.updateTestCase(t)},n.closeTestCaseRunner=function(){n.setState({isRunning:!1,runningAll:!1})},n.state={selectedTestCaseIndex:null,testCaseRunners:t.authoringEvaluator.testCases.map(function(e){return new f({testCase:e,response:null})}),newTestCaseRunner:null,runningAll:!1,isRunning:!1},n}return _inherits(TestCasesSandbox,e),TestCasesSandbox.prototype.componentDidMount=function componentDidMount(){this.props.setValidation(this.areTestCasesValid(this.state))},TestCasesSandbox.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){if(this.props.authoringEvaluator.draft.id!==e.authoringEvaluator.draft.id||!this.props.hasHarnessChanged&&e.hasHarnessChanged){var t=this.state.testCaseRunners.map(function(e){var t=e.copy();return t.response=null,t.testCase.latestEvaluationId=null,t});this.setState({testCaseRunners:t})}},TestCasesSandbox.prototype.componentWillUpdate=function componentWillUpdate(e,t){if(this.state!==t){e.setValidation(this.areTestCasesValid(t));var r=t.testCaseRunners.map(function(e){return e.testCase});_(this.state.testCaseRunners).isEqual(t.testCaseRunners)||this.props.onChange({testCases:r})}},TestCasesSandbox.prototype.render=function render(){var e=this,t=this.props,r=t.language,l=t.onCancel,p=t.handleRun,d=t.authoringEvaluator,f=t.evaluation,m=t.runInProgress,g=this.state,y=g.isRunning,v=g.testCaseRunners,b=g.selectedTestCaseIndex,C=g.newTestCaseRunner,E=g.runningAll,w=d.draft,S=this.getCurrentTestCase(),O=null!=v.find(function(e){return null==e.response}),T=null!=v.find(function(e){return""===e.testCase.expression}),P=null!=C||0===v.length||!O||T,M=S&&n.createElement(c,{testCaseRunner:S,isTestCaseAdded:null!=b,onDelete:this.handleDelete,onChange:this.onChangeTitle,onAddTestCase:this.addNewTestCase,onDuplicate:this.handleDuplicate});return n.createElement("div",{className:"rc-TestCasesSandbox"},n.createElement("div",{className:"horizontal-box align-items-spacebetween"},n.createElement(o,{style:{paddingTop:20,paddingBottom:5}},h("Submission Sandbox")),n.createElement("button",{onClick:this.runAllTestCases,className:"button-link body-2-text",disabled:P},h("Run all submission examples"))),n.createElement(i,{style:{paddingBottom:10}},h("Verify that the starter code and / or grading feedback code does what you expect with examples of\n               possible learner submissions.\n               Provide at least one submission example and run all examples at least once.")),n.createElement("div",{style:{marginBottom:12}},v.map(function(t,r){return n.createElement("span",{style:{marginRight:20},key:r},n.createElement(s,{name:t.testCase.name,onClick:e.selectTestCase,index:r,isFailed:t.isFailed,isPassed:t.isPassed,isSelected:r===b}))}),n.createElement("button",{onClick:this.createNewTestCase,className:"button-link body-2-text",disabled:null!=C},h("+ Add submission example"))),null!=S&&!E&&n.createElement(a,{titleRow:M,testCaseRunner:S,isTestCaseAdded:null!=b,selectedTestCaseIndex:b,language:r,onChange:this.onChangeTestCase,onCancel:l,onOverwriteOutput:this.handleOverwriteOutput,handleRun:this.handleRun,runInProgress:m,evaluatorDraftId:w.id}),y&&n.createElement(u,{evaluation:f,handleRun:p,onCancel:l,onClose:this.closeTestCaseRunner,onChange:this.changeRunningTestCase,testCaseRunners:this.getRunningTestCases()}))},TestCasesSandbox}(n.Component),t.propTypes={language:n.PropTypes.string.isRequired,onChange:n.PropTypes.func.isRequired,onCancel:n.PropTypes.func.isRequired,setValidation:n.PropTypes.func.isRequired,handleRun:n.PropTypes.func.isRequired,authoringEvaluator:n.PropTypes.instanceOf(l).isRequired,evaluation:n.PropTypes.instanceOf(p).isRequired,runInProgress:n.PropTypes.bool,hasHarnessChanged:n.PropTypes.bool.isRequired},r);module.exports=m}.apply(exports,t))&&(module.exports=r)},445:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(6),e(376)],void 0!==(r=function(require,exports,module){"use strict";var t=e(1),r=e(6);e(376);var n=function ValidationErrorText(e){var n=e.children,o=e.className,i=e.style;return t.createElement("div",{className:r("rc-ValidationErrorText",o),style:i},n)};n.propTypes={children:t.PropTypes.node.isRequired,className:t.PropTypes.string,style:t.PropTypes.object},module.exports=n}.apply(exports,t))&&(module.exports=r)},450:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(6),e(1),e(25),e(79),e(174),e(222),e(131),e(459),e(223),e(511),e(451),e(274),e(152),e(8),e(377)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(6),o=e(1),i=e(25),a=e(79),s=a.Tooltip,c=a.OverlayTrigger,u=e(174),l=e(222),p=e(131),d=e(459),f=e(223),h=e(511),m=e(451),g=e(274),y=g.H1,v=g.H2,b=g.H3,C=g.Bold,E=g.Italic,w=g.Underline,S=g.Divider,O=g.Link,T=g.OrderedList,P=g.UnorderedList,M=g.Image,A=g.Table,x=g.Code,k=e(152),R=e(8),N=R.FormattedHTMLMessage,I=function getHTML(e,t){var r=p.getValue(t),n="";try{n=e.toHTML(r)}catch(e){n=""}return""!==n&&"<p></p>"!==n||(n="<p><br></p>"),n};e(377);var D=(r=t=function(e){function CMLEditor(){var t,r,n;_classCallCheck(this,CMLEditor);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.handleChange=function(){var e=r.scribe.getHTML();r.acceptChanges&&r.currentHTML!==e&&(r.currentHTML=e,r.props.onKeyPress(),r.changeHandler())},r.changeHandler=function(){var e=r.htmlConverter.toCML(r.currentHTML,!0),t=p.getDtdId(r.props.cml),n=p.create(e,t);r.props.onChange(n,r.currentHTML)},r.focus=function(){h(i.findDOMNode(r.refs.editor))},n=t,_possibleConstructorReturn(r,n)}return _inherits(CMLEditor,e),CMLEditor.prototype.componentWillMount=function componentWillMount(){var e=this;this.converter=new u,this.htmlConverter=new l,this.converter.on("assetsAvailable",function(){var t=I(e.converter,e.props.cml);e.scribe.setContent(t)}),this.unsupportedBlocks=p.getUnsupportedBlocks(this.props.cml),this.isDisabled=0!==this.unsupportedBlocks.length,this.changeHandler=_(this.changeHandler).debounce(this.props.changeDelay)},CMLEditor.prototype.componentDidMount=function componentDidMount(){var e=this,t=this.props,r=t.blocks,n=t.placeholder,o=t.disabledPlugins,a=t.imageUploadOptions,s=t.assetAdminOptions,c=t.codeBlockOptions,u=t.onFocus,l=t.onBlur,p=i.findDOMNode(this.refs.editor),f=i.findDOMNode(this),h=i.findDOMNode(this.refs.toolbar),m=this.props.isFocused&&!this.isDisabled,g=I(this.converter,this.props.cml),y=this.handleChange,v={el:p,content:g,blocks:r,placeholder:n,disabledPlugins:o,imageUploadOptions:a,assetAdminOptions:s,codeBlockOptions:c,showToolbarByDefault:m,onContentChange:y,editorContainer:f,toolbarContainer:h,onFocus:u,onBlur:l};this.scribe=d.createInstance(v),this.scribe.setContent(g),this.props.isFocused&&!this.isDisabled&&(this.focus(),this.scribe.trigger("content-changed")),setTimeout(function(){return e.acceptChanges=!0},0)},CMLEditor.prototype.componentDidUpdate=function componentDidUpdate(e,t){e.isFocused||!this.props.isFocused||this.isDisabled||this.focus()},CMLEditor.prototype.componentWillUnmount=function componentWillUnmount(){d.destroyInstance(this.scribe)},CMLEditor.prototype.render=function render(){var e=this.isDisabled,t=this.props,r=t.blocks,i=t.toolbarStyle,a=t.style,u=o.createElement("div",{className:"rc-CMLEditor"},o.createElement("div",{id:this.props.id,ref:"editor",contentEditable:!0,className:n("scribe-editor",{disabled:e}),style:a}),o.createElement(m,{ref:"toolbar",blocks:r,style:i}));if(e){var l=o.createElement(s,null,o.createElement(N,{message:k("\n              This field contains unsupported object(s) <strong>{blockNames}</strong> and cannot be edited here.\n            "),blockNames:_(this.unsupportedBlocks).map(function(e){return e.nodeName.toLowerCase()}).join(", ")}));return o.createElement(c,{placement:"bottom",overlay:l},u)}return u},CMLEditor}(o.Component),t.propTypes={id:o.PropTypes.string,cml:f.isRequired,blocks:o.PropTypes.array,isFocused:o.PropTypes.bool,placeholder:o.PropTypes.string,changeDelay:o.PropTypes.number,disabledPlugins:o.PropTypes.array,toolbarStyle:o.PropTypes.object,style:o.PropTypes.object,assetAdminOptions:o.PropTypes.object,imageUploadOptions:o.PropTypes.object,codeBlockOptions:o.PropTypes.object,onKeyPress:o.PropTypes.func,onChange:o.PropTypes.func,onFocus:o.PropTypes.func,onBlur:o.PropTypes.func},t.defaultProps={blocks:[y,v,b,C,E,w,S,O,T,P,M,A,x],placeholder:"",changeDelay:500,toolbarStyle:{},disabledPlugins:[],onKeyPress:function onKeyPress(){},onChange:function onChange(){},onFocus:function onFocus(){},onBlur:function onBlur(){}},r);module.exports=D}.apply(exports,t))&&(module.exports=r)},451:function(module,exports,e){var t,r;t=[e,exports,module,e(6),e(1),e(79),e(378)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o,i=e(6),a=e(1),s=e(79),c=s.Tooltip,u=s.OverlayTrigger;e(378);var l=(r=t=function(e){function ToolbarButton(){return _classCallCheck(this,ToolbarButton),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ToolbarButton,e),ToolbarButton.prototype.render=function render(){var e=this.props.block,t=e.commandName;if("divider"===e.commandName)return a.createElement("div",{key:t,className:"scribe-toolbar-divider"});var r=e.commandName,n=e.disabledTags?e.disabledTags.join(","):"",o=e.tooltip,s=i("scribe-toolbar-button","scribe-toolbar-"+r),l=a.createElement("button",{key:t,"data-command-name":r,"data-disabled-tags":n,className:s}),p=function renderBtnWithTooltip(){var e=a.createElement(c,null,o);return a.createElement(u,{key:t,placement:"top",overlay:e,delayShow:600},l)};return o?p():l},ToolbarButton}(a.Component),t.propTypes={block:a.PropTypes.object.isRequired},r),p=(o=n=function(e){function CMLEditorToolbar(){return _classCallCheck(this,CMLEditorToolbar),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CMLEditorToolbar,e),CMLEditorToolbar.prototype.render=function render(){var e=this.props,t=e.blocks,r=e.style;if(0===t.length)return null;return a.createElement("div",{className:"rc-CMLEditorToolbar",style:r},t.map(function(e){return a.createElement(l,{key:e.commandName,block:e})}))},CMLEditorToolbar}(a.Component),n.propTypes={style:a.PropTypes.object.isRequired,blocks:a.PropTypes.array.isRequired},o);module.exports=p}.apply(exports,t))&&(module.exports=r)},452:function(module,exports,e){var t,r;t=[e,exports,module,e(59)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=e(59),r=function(e){function Asset(t,r){if(_classCallCheck(this,Asset),0===r.childNodes.length)throw new Error("Invalid asset");var n=r.getAttribute("data-id"),o=r.getAttribute("data-name"),i=r.getAttribute("data-type"),a=r.getAttribute("data-extension");return _possibleConstructorReturn(this,e.call(this,t,r,"div","asset",{id:n,name:o,extension:a,assetType:i}))}return _inherits(Asset,e),Asset}(t);module.exports=r}.apply(exports,t))&&(module.exports=r)},453:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(59)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_=e(2),r=e(59),n=function(e){function Code(r,n){_classCallCheck(this,Code);var o=n.getAttribute("data-language"),i=n.getAttribute("data-evaluator-id"),a={};o&&(a={language:o}),i&&(a=t({},a,{evaluatorId:i}));var s=_possibleConstructorReturn(this,e.call(this,r,n,"pre","code",a));return _(s.childNodes).each(function(e){if(3!==e.nodeType)throw new Error('Unsupported HTML element "'+e.tagName+'" inside "pre"');s.block.appendChild(e)}),s}return _inherits(Code,e),Code}(r);module.exports=n}.apply(exports,t))&&(module.exports=r)},454:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(59),e(108),e(52)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var _=e(2),t=e(59),r=e(108),n=e(52),o=function(e){function Heading(t,o,i){_classCallCheck(this,Heading);var a=_possibleConstructorReturn(this,e.call(this,t,o,"h"+i,"heading",{level:i}));return _(a.childNodes).each(function(e){var t=new r(a.doc,e);a.block.appendChild(t.block)}),n.hasMath(a.block)&&a.setBlockAttribute("hasMath",!0),a}return _inherits(Heading,e),Heading}(t);module.exports=o}.apply(exports,t))&&(module.exports=r)},455:function(module,exports,e){var t,r;t=[e,exports,module,e(59)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=e(59),r=function(e){function Image(t,r){if(_classCallCheck(this,Image),0===r.childNodes.length)throw new Error("Invalid image");var n=r.childNodes[0],o=n.getAttribute("src")||"",i=n.getAttribute("alt")||"",a=n.getAttribute("data-asset-id"),s={};return s=a?{assetId:a,alt:i}:{src:o,alt:i},_possibleConstructorReturn(this,e.call(this,t,n,"img","img",s))}return _inherits(Image,e),Image}(t);module.exports=r}.apply(exports,t))&&(module.exports=r)},456:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(59),e(108),e(52)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var _=e(2),t=e(59),r=e(108),n=e(52),o=function(e){function ListItem(t,o){_classCallCheck(this,ListItem);var i=_possibleConstructorReturn(this,e.call(this,t,o,"li","li",{})),a=i.doc.createElement("text");return _(i.childNodes).each(function(e){if("#text"===e.nodeName&&""===e.nodeValue.trim())return;var t=new r(i.doc,e);a.appendChild(t.block)}),n.hasMath(a)&&a.setAttribute("hasMath",!0),i.block.appendChild(a),i}return _inherits(ListItem,e),ListItem}(t),i=function(e){function List(t,r,n,i,a){_classCallCheck(this,List);var s=_possibleConstructorReturn(this,e.call(this,t,r,n,i,{bulletType:a}));return _(s.childNodes).each(function(e){if("#text"===e.nodeName&&""===e.nodeValue.trim())return;var t=new o(s.doc,e);s.block.appendChild(t.block)}),s}return _inherits(List,e),List}(t),a=function(e){function OrderedList(t,r){return _classCallCheck(this,OrderedList),_possibleConstructorReturn(this,e.call(this,t,r,"ol","list","numbers"))}return _inherits(OrderedList,e),OrderedList}(i),s=function(e){function UnorderedList(t,r){return _classCallCheck(this,UnorderedList),_possibleConstructorReturn(this,e.call(this,t,r,"ul","list","bullets"))}return _inherits(UnorderedList,e),UnorderedList}(i);module.exports={OrderedList:a,UnorderedList:s}}.apply(exports,t))&&(module.exports=r)},457:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(59),e(108),e(52)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var _=e(2),t=e(59),r=e(108),n=e(52),o=function(e){function TableCellHeader(t,n){_classCallCheck(this,TableCellHeader);var o=_possibleConstructorReturn(this,e.call(this,t,n,"th","th")),i=o.doc.createElement("text");return _(o.childNodes).each(function(e){if("#text"===e.nodeName&&""===e.textContent.trim())return;var t=new r(o.doc,e);i.appendChild(t.block)}),o.block.appendChild(i),o}return _inherits(TableCellHeader,e),TableCellHeader}(t),i=function(e){function TableCell(t,o){_classCallCheck(this,TableCell);var i=_possibleConstructorReturn(this,e.call(this,t,o,"td","td")),a=i.doc.createElement("text");return _(i.childNodes).each(function(e){if("#text"===e.nodeName&&""===e.textContent.trim())return;var t=new r(i.doc,e);a.appendChild(t.block)}),n.hasMath(a)&&a.setAttribute("hasMath",!0),i.block.appendChild(a),i}return _inherits(TableCell,e),TableCell}(t),a=function(e){function TableRow(t,r){_classCallCheck(this,TableRow);var n=_possibleConstructorReturn(this,e.call(this,t,r,"tr","tr"));return _(n.childNodes).each(function(e){if("#text"===e.nodeName&&""===e.textContent.trim())return;var t=e.tagName.toLowerCase(),r=void 0;r="th"===t?new o(n.doc,e):new i(n.doc,e),n.block.appendChild(r.block)}),n}return _inherits(TableRow,e),TableRow}(t),s=function(e){function Table(t,r){_classCallCheck(this,Table);var n=_possibleConstructorReturn(this,e.call(this,t,r,"table","table"));if(n.childNodes.length>1||"tbody"!==n.childNodes[0].tagName.toLowerCase())throw new Error("Missing or invalid <tbody> for table");var o=n.childNodes[0],i=_(o.childNodes).filter(function(e){return!("#text"===e.nodeName&&""===e.textContent.trim())});_(i).each(function(e){if("#text"===e.nodeName&&""===e.textContent.trim())return;var t=new a(n.doc,e);n.block.appendChild(t.block)});var s=i.length,c=0;return i[0]&&(c=i[0].childNodes.length),n.setBlockAttribute("rows",s),n.setBlockAttribute("columns",c),n}return _inherits(Table,e),Table}(t);module.exports=s}.apply(exports,t))&&(module.exports=r)},458:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(52),e(108),e(59)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var _=e(2),t=e(52),r=e(108),n=e(59),o=function(e){function Text(n,o){_classCallCheck(this,Text);var i=_possibleConstructorReturn(this,e.call(this,n,o,"p","text",{}));return _(i.childNodes).each(function(e){var t=new r(i.doc,e);i.block.appendChild(t.block)}),t.hasMath(i.block)&&i.setBlockAttribute("hasMath",!0),i}return _inherits(Text,e),Text}(n);module.exports=o}.apply(exports,t))&&(module.exports=r)},459:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(2),e(357),e(275)],void 0!==(r=function(require,exports,module){"use strict";var $=e(7),_=e(2),t=e(357),r=e(275),n={createInstance:function createInstance(e){var n=e.el,o=e.blocks,i=e.placeholder,a=e.editorContainer,s=e.disabledPlugins,c=e.showToolbarByDefault,u=e.toolbarContainer,l=e.assetAdminOptions,p=e.imageUploadOptions,d=e.codeBlockOptions,f=e.onContentChange,h=e.onFocus,m=e.onBlur,g=new t(n,{allowBlockElements:!0}),y={p:{},strike:{},sub:{},sup:{},audio:{controls:!0},source:{src:!0},pre:{},div:{}},v=_(s).indexBy("id");return g.on("content-changed",f),g.el.addEventListener("focus",h),g.el.addEventListener("blur",m),o.forEach(function(e){if(e.plugin){var t=null;switch(e.commandName){case"imageUpload":t=p;break;case"code":t={editorContainer:a,codeBlockOptions:d};break;case"asset":t=l}g.use(e.plugin(t))}e.tags&&e.tags.forEach(function(e){return y[e.name]=e.value||{}})}),_(r).each(function(e){if(!_(v).has(e.id))switch(e.id){case r.Placeholder.id:a&&g.use(e.run(i,a));break;case r.Toolbar.id:u&&g.use(e.run(u));break;case r.ToolbarVisibility.id:a&&u&&g.use(e.run(a,u,c));break;case r.Sanitizer.id:g.use(e.run({tags:y}));break;default:g.use(e.run())}}),g},destroyInstance:function destroyInstance(e){$(".scribe-marker").remove()}};module.exports=n}.apply(exports,t))&&(module.exports=r)},497:function(module,exports,e){var t,r;t=[e,exports,module,e(6),e(1)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(6),o=e(1),i=(r=t=function(e){function Box(){return _classCallCheck(this,Box),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(Box,e),Box.prototype.render=function render(){var e=n(this.props.className,{"horizontal-box":this.props.horizontal,"vertical-box":this.props.vertical,"align-items-vertical-center":this.props.alignItemsVerticalCenter});return o.createElement("div",{className:e},this.props.children)},Box}(o.Component),t.propTypes={horizontal:o.PropTypes.bool,vertical:o.PropTypes.bool,className:o.PropTypes.string,children:o.PropTypes.node,alignItemsVerticalCenter:o.PropTypes.bool},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},498:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(6)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r,n,_=e(2),o=e(1),i=e(6),a=(n=r=function(e){function Button(){return _classCallCheck(this,Button),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(Button,e),Button.prototype.render=function render(){var e=this.props,r=e.primary,n=e.secondary,a=e.passive,s=e.nostyle,c=e.cozy,u=e.comfy,l=e.fullbleed,p=i(this.props.className,{primary:r,secondary:n,passive:a,nostyle:s,cozy:c,comfy:u,fullbleed:l});return o.createElement("button",t({className:p},_(this.props).omit("className","primary","secondary")),this.props.children)},Button}(o.Component),r.propTypes={children:o.PropTypes.node,primary:o.PropTypes.bool,secondary:o.PropTypes.bool,passive:o.PropTypes.bool,nostyle:o.PropTypes.bool,cozy:o.PropTypes.bool,comfy:o.PropTypes.bool,fullbleed:o.PropTypes.bool,className:o.PropTypes.string},n);module.exports=a}.apply(exports,t))&&(module.exports=r)},510:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(1),e(544),e(419),e(418)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,$=e(7),n=e(1),o=e(544);e(419),e(418);var i=(r=t=function(e){function SelectizeComponent(){return _classCallCheck(this,SelectizeComponent),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(SelectizeComponent,e),SelectizeComponent.prototype.componentDidMount=function componentDidMount(){var e=this.props,t=e.disabled,r=e.focus,n=e.options,o=this.select,i=$(o).selectize(n);this.selectizeInstance=i[0].selectize,t&&i[0].selectize.disable(),n.selected&&i[0].selectize.setValue(n.selected,!0),r&&this.selectizeInstance.focus()},SelectizeComponent.prototype.shouldComponentUpdate=function shouldComponentUpdate(e,t){if(e.disabled!==this.props.disabled){var r=this.select,n=$(r).selectize(this.props.options);return e.disabled?n[0].selectize.disable():n[0].selectize.enable(),!0}return!1},SelectizeComponent.prototype.render=function render(){var e=this;return n.createElement("div",{className:"rc-Selectize"},n.createElement("select",{ref:function ref(t){e.select=t},placeholder:this.props.placeholder}))},SelectizeComponent}(n.Component),t.propTypes={options:n.PropTypes.object.isRequired,placeholder:n.PropTypes.string.isRequired,disabled:n.PropTypes.bool,focus:n.PropTypes.bool},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},511:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";var e=function placeCaretAtEnd(e){var t=e.tagName.toLowerCase();if(e.focus(),"textarea"===t||"input"===t){if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=e.value.length;else if(void 0!==e.createTextRange){var r=e.createTextRange();r.collapse(!1),r.select()}}else if(void 0!==window.getSelection&&void 0!==document.createRange){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(n)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!1),i.select()}};module.exports=e}.apply(exports,t))&&(module.exports=r)},513:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(25),e(80),e(421),e(150),e(514)],void 0!==(r=function(require,exports,module){"use strict";var t=e(1),r=e(25),n=e(80),o=e(421),i=e(150),a=i.findBlockContainer,s=i.findSelectedElement,c=i.isEmptyParagraphBlock,u=e(514),l=u.insertAsset,p=u.isAssetBlock,d=u.isRemoveButton,f=u.initializeAssetBlocks;module.exports=function(e){return function(i){var u=new i.api.Command("asset"),h=new n,m=null,g=null,y=function handleAssetModalSelect(e){i.transactionManager.run(function(){return l(i,g,h,e)}),r.unmountComponentAtNode(m)},v=function handleAssetModalCancel(){r.unmountComponentAtNode(m)},b=function handleBackspace(e){i.transactionManager.run(function(){var t=s(i),r=t.previousSibling,n=t.nextSibling;c(i,t)&&(!r&&p(n)?(e.preventDefault(),i.el.removeChild(t)):p(r)&&(e.preventDefault(),p(n)?i.el.removeChild(t):i.el.removeChild(r)))})},C=function handleKeydown(e){8===e.keyCode&&b(e)},E=function handleMousedown(e){i.transactionManager.run(function(){var t=e.target;d(t)&&(e.preventDefault(),i.el.removeChild(a(i,t)))})},w=function handleContentChange(){return f(i.el)};u.execute=function(){g=s(i),m=document.createElement("div"),document.body.appendChild(m),r.render(t.createElement(o,{courseId:e.context.courseId,onSelect:y,onCancel:v}),m)},u.queryEnabled=function(){return!0},i.on("content-changed",w),i.el.addEventListener("keydown",C),i.el.addEventListener("mousedown",E),i.commands.asset=u}}}.apply(exports,t))&&(module.exports=r)},514:function(module,exports,e){var t,r;t=[e,exports,module,e(4),e(7),e(2),e(1),e(185),e(150)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(4),$=e(7),_=e(2),o=e(1),i=e(185),a=e(150),s=a.isEmptyParagraphBlock,c=function(e){function RemoveAssetButton(){return _classCallCheck(this,RemoveAssetButton),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(RemoveAssetButton,e),RemoveAssetButton.prototype.render=function render(){return o.createElement("a",{title:"Delete",className:"cml-remove-asset-button"},"×")},RemoveAssetButton}(o.Component),u=(r=t=function(e){function AssetNode(){var t,r,n;_classCallCheck(this,AssetNode);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.getNameAndExtension=function(e){var t=e.lastIndexOf("."),r="",n=e;return t>-1&&(n=e.substring(0,t),r=e.substring(t+1)),{name:n,extension:r}},n=t,_possibleConstructorReturn(r,n)}return _inherits(AssetNode,e),AssetNode.prototype.render=function render(){var e=this.props,t=e.id,r=e.url,n=e.filename,i=e.typeName,a=this.getNameAndExtension(n),s=a.name,c=a.extension;return o.createElement("div",{className:"cml-asset","data-id":t,"data-name":s,"data-type":i,"data-extension":c},o.createElement("a",{className:"cml-asset-link",href:r},n))},AssetNode}(o.Component),t.propTypes={id:o.PropTypes.string.isRequired,url:o.PropTypes.string.isRequired,filename:o.PropTypes.string.isRequired,typeName:o.PropTypes.string.isRequired},r),l=function initializeAssetBlocks(e){var t=$(e).find(".cml-asset:not([data-initialized=true])");t.attr("data-initialized",!0),t.append($(i.renderToStaticMarkup(o.createElement(c,null))).get(0))},p=function injectAsset(e,t,r,n){var a=r.id,c=r.typeName,l=r.filename,p=$(i.renderToStaticMarkup(o.createElement(u,{id:a,url:n,filename:l,typeName:c}))).get(0);s(e,t)?(t.nextSibling||t.parentNode.appendChild(document.createElement("p")),t.parentNode.replaceChild(p,t)):t.nextSibling?t.parentNode.insertBefore(p,t.nextSibling):(t.parentNode.appendChild(p),t.parentNode.appendChild(document.createElement("p")))},d=function insertAsset(e,t,r,o){var i=_(o).pluck("id");n(r.getAssetMap(i)).then(function(r){return _(o).map(function(n){return p(e,t,n,r[n.id].url.url)})})},f=function isAssetBlock(e){return e&&$(e).hasClass("cml-asset")},h=function isRemoveButton(e){return e&&$(e).hasClass("cml-remove-asset-button")};module.exports={initializeAssetBlocks:l,insertAsset:d,isAssetBlock:f,isRemoveButton:h}}.apply(exports,t))&&(module.exports=r)},515:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";var e=/https?:\/\/[^ \r\n\t]+/gim,t=function getLinkedNodesFromText(t,r){r=r||[],e.exec("");var n=e.exec(t);if(n){var o=n[0],i=t.split(o);i[0]&&r.push(document.createTextNode(i[0]));var a=document.createElement("a");return a.setAttribute("href",o),a.innerHTML=o,r.push(a),getLinkedNodesFromText(i[1],r)}return t&&r.push(document.createTextNode(t)),r};module.exports=function(){return function(r){function handleKeydown(n){var o=n.keyCode;if(9===o||13===o||32===o){var i=new r.api.Selection,a=i.range;if(!a)return;var s=a.endContainer,c=s.parentNode;if(3===s.nodeType){var u=s.textContent;e.test(u)&&r.transactionManager.run(function(){t(u).forEach(function(e){c.insertBefore(e,s)}),a.setEndAfter(s),c.removeChild(s),a.collapse(),i.selection.removeAllRanges(),i.selection.addRange(a)})}}}r.el.addEventListener("keydown",handleKeydown)}}}.apply(exports,t))&&(module.exports=r)},516:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(2),e(174),e(222)],void 0!==(r=function(require,exports,module){"use strict";var $=e(7),_=e(2),t=e(174),r=e(222),n="text/html",o="text/plain",i=function pasteText(e,t){var r=t.getData("text/plain");r=$("<div/>").text(r).html(),r=r.replace(/[\n]+/g,"<p>"),e.insertHTML(r)},a=function getHTMLAfterInsert(e,t){var r=new e.api.Selection;r.placeMarkers();var n=e.getHTML();e.insertHTML(t);var o=e.getHTML();return e.setHTML(n),r.selectMarkers(),e.el.focus(),o},s=function pasteHTML(e,n){var o=n.getData("text/html"),s=a(e,o),c=new r,u=new t;try{var l=c.toCML(s,!0);s=u.toHTML(l),e.insertHTML(o)}catch(t){console.log("HTML formatting not supported, pasting as text.",t),i(e,n)}};module.exports=function(){return function(e){e.el.addEventListener("paste",function(t){if(t.preventDefault(),t.stopPropagation(),t.clipboardData){var r=t.clipboardData;_(r.types).contains("text/html")?s(e,r):i(e,r)}}),e.el.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation()})}}}.apply(exports,t))&&(module.exports=r)},517:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(2),e(1),e(25),e(178),e(527),e(519),e(524),e(150)],void 0!==(r=function(require,exports,module){"use strict";var $=e(7),_=e(2),t=e(1),r=e(25),n=e(178),o=e(527),i=e(519),a=e(524),s=e(150),c=s.findBlockContainer,u=s.isEmptyParagraphBlock,l="scribe-plugin-code-command";module.exports=function(e){var s=e.editorContainer,l=e.codeBlockOptions,p=s;return function(e){var s=null,d=null,f=null,h=new e.api.SimpleCommand("code","CODE"),m=new o(e),g=function handleBlockRemove(t){e.transactionManager.run(function(){return m.getCodeElementAtIndex(t).remove()})},y=function handleBlockChange(t,r,n,o){var i=m.getAceEditorAtIndex(t),a=m.getCodeElementAtIndex(t);i.setValue(n),i.setLanguage(o||""),e.transactionManager.run(function(){a.textContent=n,a.setAttribute("data-language",o||""),a.setAttribute("data-evaluator-id",r||"")})},v=function positionAndSizeEditor(e,t){var r=t.offsetTop,n=t.offsetLeft,o=t.offsetWidth,i=e.el.parentNode;i.style.position="absolute",i.style.top=r+2+"px",i.style.left=n+2+"px",i.style.width=o-2+"px";var a=e.resizeHeight(),s=document.getElementsByClassName("rc-ScribeCodeEditor"),c=s.length?s[0].offsetHeight:0;$(t).height(a+c)},b=function renderAceEditor(n,o){var a=o.innerText,c=o.getAttribute("data-language"),u=o.getAttribute("data-evaluator-id"),d=document.createElement("div");d.style.position="relative",d.setAttribute("class","scribe-plugin-code-command"),p.appendChild(d);var f=document.createElement("div");d.appendChild(f);var h=document.createElement("div");d.appendChild(h);var v=new s({value:a,language:c,el:h,onChange:function onChange(t){return e.transactionManager.run(function(){return m.getCodeElementAtIndex(n).innerText=t})},onFocus:function onFocus(t){return e.trigger("content-changed")}});return o===m.focusedCodeElement&&setTimeout(function(){return v.editor.focus()},0),r.render(t.createElement(i,{aceEditor:v,languageValue:c,evaluatorId:u,codeBlockOptions:l,onRemove:function onRemove(){return g(n)},onChange:function onChange(e,t,r){return y(n,e,t,r)}}),f),v},C=function removeAceEditors(){$(".scribe-plugin-code-command",p).remove(),m.clearAceEditorCache()},E=function update(e){if(s){var t=m.getAllCodeElements();t.length!==_(m.aceEditors).values().length&&C(),t.map(function(e,t){var r=m.getAceEditorAtIndex(e);r||(r=b(e,t),m.setAceEditorAtIndex(r,e)),v(r,t)})}},w=function handleCreateCodeBlock(t){e.transactionManager.run(function(){var r=document.createElement("pre");r.setAttribute("data-language",t||""),u(e,f)?(f.nextSibling||f.parentNode.appendChild(document.createElement("p")),f.parentNode.replaceChild(r,f)):f.nextSibling?f.parentNode.insertBefore(r,f.nextSibling):(f.parentNode.appendChild(r),f.parentNode.appendChild(document.createElement("p"))),m.setFocusOnCodeElement(r)}),r.unmountComponentAtNode(d)},S=function handleCodeBlockCancel(){r.unmountComponentAtNode(d)};h.execute=function(){var n=new e.api.Selection,o=n.range;if(o){if(f=c(e,o.endContainer),d=document.createElement("div"),!f.parentElement.nextSibling)throw new Error("could not find toolbar element rc-CMLEditorToolbar to append code language selector to");f.parentElement.nextSibling.appendChild(d),r.render(t.createElement(a,{onSelect:w,onCancel:S}),d)}},h.queryEnabled=function(){if(!(new e.api.Selection).range)return!1;return!0},h.queryState=function(){},n(function(e){s=e,E()}),e.on("content-changed",E),e.el.addEventListener("keydown",E),e.commands.code=h}}}.apply(exports,t))&&(module.exports=r)},518:function(module,exports,e){var t,r;t=[e,exports,module,e(24),e(10),e(4)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=e(10),n=e(4),o=t("/api/authoringEvaluatorTemplates.v1",{type:"rest"}),i=["name","tags"];exports.getEvaluatorTemplatesForTag=function(e,t){var a=(new r).addQueryParam("fields",i.join(",")).addQueryParam("q","tag").addQueryParam("tag",e).addQueryParam("courseId",t);return n(o.get(a.toString()))},exports.getTestCaseHarnessEvaluatorTemplates=function(){var e=(new r).addQueryParam("fields",i.join(",")).addQueryParam("q","withTestCaseHarness");return n(o.get(e.toString()))}}.apply(exports,t))&&(module.exports=r)},519:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(526),e(525),e(54),e(405)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,_=e(2),o=e(1),i=e(526),a=e(525),s=e(54);e(405);var c=(r=t=function(e){function ScribeCodeEditor(t){_classCallCheck(this,ScribeCodeEditor);var r=_possibleConstructorReturn(this,e.call(this,t));n.call(r);var o=t.aceEditor,i=t.evaluatorId,a=t.languageValue;return r.state={value:o.value,evaluatorId:i,languageValue:a},o.onChange(function(e){return r.setState({value:e})}),r}return _inherits(ScribeCodeEditor,e),ScribeCodeEditor.prototype.render=function render(){var e=this.props,t=e.onRemove,r=e.codeBlockOptions,n=this.state,s=n.value,c=n.evaluatorId,u=n.languageValue;return o.createElement("div",{className:"rc-ScribeCodeEditor horizontal-box align-items-spacebetween"},o.createElement(i,{value:s,evaluatorId:c,codeBlockOptions:r,languageValue:u,onEvaluatorChange:this.handleEvaluatorChange}),o.createElement(a,{onClick:t}))},ScribeCodeEditor}(o.Component),t.propTypes={evaluatorId:o.PropTypes.string,codeBlockOptions:o.PropTypes.object,languageValue:o.PropTypes.oneOf(_(s).pluck("value")),aceEditor:o.PropTypes.object.isRequired,onRemove:o.PropTypes.func.isRequired,onChange:o.PropTypes.func.isRequired},n=function _initialiseProps(){var e=this;this.handleEvaluatorChange=function(t,r){var n=e.state.languageValue;e.props.onChange(t,r,n),e.setState({evaluatorId:t,value:r})}},r);module.exports=c}.apply(exports,t))&&(module.exports=r)},520:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(6),e(521),e(54),e(522),e(406)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(1),o=e(6),i=e(521),a=e(54),s=e(522);e(406);var c=(r=t=function(e){function ScribeCodeEditorEvaluatorConfig(t){_classCallCheck(this,ScribeCodeEditorEvaluatorConfig);var r=_possibleConstructorReturn(this,e.call(this,t));return r.handleClose=function(){r.setState({isOpen:!1})},r.handleSave=function(e,t){r.props.onEvaluatorChange(e,t)},r.handleOpen=function(){r.setState({isOpen:!0})},r.state={isOpen:!1},r}return _inherits(ScribeCodeEditorEvaluatorConfig,e),ScribeCodeEditorEvaluatorConfig.prototype.render=function render(){var e=this.state.isOpen,t=this.props,r=t.evaluatorId,a=t.value,c=t.language,u=t.courseId,l=t.branchId,p=t.itemId,d=o("rc-ScribeCodeEditorEvaluatorConfig",{interactive:!!r});return n.createElement("div",{className:d},r&&n.createElement(i,{isOpen:e,value:a,language:c,evaluatorId:r,courseId:u,onSave:this.handleSave,onRequestClose:this.handleClose}),n.createElement(s,{language:c,evaluatorId:r,courseId:u,branchId:l,itemId:p,onSave:this.handleSave,value:a,handleOpen:this.handleOpen}))},ScribeCodeEditorEvaluatorConfig}(n.Component),t.propTypes={courseId:n.PropTypes.string.isRequired,branchId:n.PropTypes.string.isRequired,itemId:n.PropTypes.string.isRequired,evaluatorId:n.PropTypes.string,value:n.PropTypes.string.isRequired,language:n.PropTypes.oneOf(_(a).pluck("value")),onEvaluatorChange:n.PropTypes.func.isRequired},r);module.exports=c}.apply(exports,t))&&(module.exports=r)},521:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(535),e(145),e(434),e(54),e(113),e(407)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(1),o=e(535),i=e(145),a=e(434),s=e(54),c=e(113);e(407);var u=(r=t=function(e){function ScribeCodeEditorEvaluatorConfigModal(){var t,r,n;_classCallCheck(this,ScribeCodeEditorEvaluatorConfigModal);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.handlePublish=function(e,t){r.props.onSave(e,t)},r.handleRemove=function(){var e=r.props.value;r.props.onSave("",e,!0)},n=t,_possibleConstructorReturn(r,n)}return _inherits(ScribeCodeEditorEvaluatorConfigModal,e),ScribeCodeEditorEvaluatorConfigModal.prototype.render=function render(){var e=this.props,t=e.value,r=e.evaluatorId,s=e.language,u=e.courseId,l=e.isOpen,p=e.onRequestClose,d=e.allowClose,f=new i({expression:t,language:s});return n.createElement(o,{size:"large",isOpen:l,title:c("Interactive Settings"),onRequestClose:p,className:"rc-ScribeCodeEditorEvaluatorConfigModal",allowClose:d},n.createElement("div",{style:{paddingTop:20}},n.createElement(a,{publishedEvaluatorId:r,starterCode:f,courseId:u,onPublish:this.handlePublish,onRemove:this.handleRemove})))},ScribeCodeEditorEvaluatorConfigModal}(n.Component),t.propTypes={isOpen:n.PropTypes.bool.isRequired,value:n.PropTypes.string.isRequired,courseId:n.PropTypes.string.isRequired,evaluatorId:n.PropTypes.string.isRequired,language:n.PropTypes.oneOf(_(s).pluck("value")),onRequestClose:n.PropTypes.func.isRequired,onSave:n.PropTypes.func.isRequired,allowClose:n.PropTypes.bool},t.defaultProps={allowClose:!0},r);module.exports=u}.apply(exports,t))&&(module.exports=r)},522:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(2),e(6),e(79),e(445),e(433),e(28),e(220),e(54),e(518),e(113),e(408)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),_=e(2),o=e(6),i=e(79),a=i.DropdownMenu,s=i.MenuItem,c=e(445),u=e(433),l=e(28),p=e(220),d=e(54),f=e(518),h=f.getEvaluatorTemplatesForTag,m=e(113);e(408);var g="CUSTOM_EVALUATOR_ID",y=(r=t=function(e){function ScribeCodeEditorEvaluatorDropdown(t,r){_classCallCheck(this,ScribeCodeEditorEvaluatorDropdown);var n=_possibleConstructorReturn(this,e.call(this,t,r));return n.handleCreate=function(e){var t=n.props,r=t.courseId,o=t.branchId,i=t.itemId;n.setState({loading:!0,isDropdownOpen:!1,errorMessage:void 0}),p.create({courseId:r,branchId:o,itemId:i,evaluatorId:e}).then(function(e){n.props.onSave(e.id,n.props.value),n.setState({loading:!1,isModalOpen:!1}),n.props.handleOpen()}).catch(function(){n.setState({loading:!1,isModalOpen:!1,errorMessage:m("Error while cloning evaluator.")})}).done()},n.handleSelect=function(e){e===g?n.setState({isModalOpen:!0,isDropdownOpen:!1,isLoading:!1}):n.handleCreate(e)},n.handleClick=function(){n.props.evaluatorId?n.props.handleOpen():n.state.isDropdownOpen?n.setState({isDropdownOpen:!1}):(n.setState({errorMessage:void 0,loading:!0}),h(n.props.language,n.props.courseId).then(function(e){n.setState({evaluators:e.elements,isDropdownOpen:!0,loading:!1})}).catch(function(e){n.setState({errorMessage:m("An unknown error has occurred."),isDropdownOpen:!1,loading:!1})}).done())},n.onCloseModal=function(){n.setState({isModalOpen:!1})},n.state={loading:!1,isDropdownOpen:!1,isModalOpen:!1,errorMessage:void 0,evaluators:[]},n}return _inherits(ScribeCodeEditorEvaluatorDropdown,e),ScribeCodeEditorEvaluatorDropdown.prototype.renderButton=function renderButton(){var e=this.props.evaluatorId,t=this.state.loading,r=o("evaluator-config-link",{"button-link":!e});return n.createElement("button",{onClick:this.handleClick,className:r},!t&&m(e?"Interactive Settings":"Make it interactive"),t&&n.createElement("span",{className:"cif-spin cif-spinner",style:{marginLeft:32}}))},ScribeCodeEditorEvaluatorDropdown.prototype.renderDropdown=function renderDropdown(){var e=this.state,t=e.evaluators,r=e.loading;return n.createElement(a,{id:"code-editor-dropdown",defaultOpen:!0,noCaret:!0,onSelect:this.handleSelect,rootCloseEvent:"click"},!r&&t.map(function(e){return n.createElement(s,{key:e.id,eventKey:e.id},e.name)}),!r&&n.createElement(s,{key:g,eventKey:g},n.createElement("span",{className:""},m("Enter a custom evaluator"))))},ScribeCodeEditorEvaluatorDropdown.prototype.renderCreationModal=function renderCreationModal(){return n.createElement(l,{modalName:m("Clone a custom evaluator"),handleClose:this.onCloseModal},n.createElement(u,{onClickCreate:this.handleCreate}))},ScribeCodeEditorEvaluatorDropdown.prototype.render=function render(){var e=this.state,t=e.isDropdownOpen,r=e.isModalOpen,o=e.errorMessage;return n.createElement("div",{className:"rc-ScribeCodeEditorEvaluatorDropdown"},this.renderButton(),t&&this.renderDropdown(),r&&this.renderCreationModal(),o&&n.createElement(c,{style:{display:"inline-block",marginLeft:16}},o))},ScribeCodeEditorEvaluatorDropdown}(n.Component),t.propTypes={language:n.PropTypes.oneOf(_(d).pluck("value")).isRequired,courseId:n.PropTypes.string.isRequired,branchId:n.PropTypes.string.isRequired,itemId:n.PropTypes.string.isRequired,evaluatorId:n.PropTypes.string,value:n.PropTypes.string.isRequired,onSave:n.PropTypes.func.isRequired,handleOpen:n.PropTypes.func.isRequired},r);module.exports=y}.apply(exports,t))&&(module.exports=r)},523:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(54),e(113)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(1),o=e(54),i=e(113),a=(r=t=function(e){function ScribeCodeEditorLanguageDisplay(){return _classCallCheck(this,ScribeCodeEditorLanguageDisplay),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ScribeCodeEditorLanguageDisplay,e),ScribeCodeEditorLanguageDisplay.prototype.render=function render(){var e=this.props.languageValue,t=o.find(function(t){return t.value===e}),r=t?t.name:i("Generic code block");return n.createElement("div",{className:"rc-ScribeCodeEditorLanguageDisplay"},"< / >","   ",r)},ScribeCodeEditorLanguageDisplay}(n.Component),t.propTypes={languageValue:n.PropTypes.oneOf(_(o).pluck("value"))},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},524:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(510),e(54),e(409)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(510),i=e(54);e(409);var a=(r=t=function(e){function ScribeCodeEditorLanguagePicker(){return _classCallCheck(this,ScribeCodeEditorLanguagePicker),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ScribeCodeEditorLanguagePicker,e),ScribeCodeEditorLanguagePicker.prototype.componentDidMount=function componentDidMount(){this.selectize.selectizeInstance.open()},ScribeCodeEditorLanguagePicker.prototype.render=function render(){var e=this,t={maxItems:1,create:!1,persist:!1,sortField:"name",labelField:"name",searchField:"name",valueField:"value",options:i,onChange:this.props.onSelect,onDropdownClose:this.props.onCancel};return n.createElement("div",{className:"rc-ScribeCodeEditorLanguagePicker"},n.createElement(o,{placeholder:"",options:t,ref:function ref(t){e.selectize=t}}))},ScribeCodeEditorLanguagePicker}(n.Component),t.propTypes={onSelect:n.PropTypes.func.isRequired,onCancel:n.PropTypes.func.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},525:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(12),e(113),e(410)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(12),i=e(113);e(410);var a=(r=t=function(e){function ScribeCodeEditorRemoveButton(){return _classCallCheck(this,ScribeCodeEditorRemoveButton),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ScribeCodeEditorRemoveButton,e),ScribeCodeEditorRemoveButton.prototype.render=function render(){var e=this.props.onClick;return n.createElement("div",{className:"rc-ScribeCodeEditorRemoveButton"},n.createElement("button",{title:i("Delete code block"),className:"remove-code-block-btn",onClick:e},n.createElement(o,{className:"remove-code-block-icon",name:"close"})))},ScribeCodeEditorRemoveButton}(n.Component),t.propTypes={onClick:n.PropTypes.func.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},526:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1),e(523),e(520),e(54),e(411)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,_=e(2),n=e(1),o=e(523),i=e(520),a=e(54);e(411);var s=(r=t=function(e){function ScribeCodeEditorToolbar(){return _classCallCheck(this,ScribeCodeEditorToolbar),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ScribeCodeEditorToolbar,e),ScribeCodeEditorToolbar.prototype.render=function render(){var e=this.props,t=e.value,r=e.evaluatorId,a=e.codeBlockOptions,s=e.languageValue,c=e.onEvaluatorChange,u=a&&a.context||{},l=u.courseId,p=u.itemId,d=u.branchId,f=a&&a.ecbEnabled;return n.createElement("div",{className:"rc-ScribeCodeEditorToolbar horizontal-box caption-text"},n.createElement(o,{languageValue:s}),f&&n.createElement(i,{value:t,language:s,evaluatorId:r,courseId:l,itemId:p,branchId:d,onEvaluatorChange:c}))},ScribeCodeEditorToolbar}(n.Component),t.propTypes={value:n.PropTypes.string,evaluatorId:n.PropTypes.string,codeBlockOptions:n.PropTypes.object,languageValue:n.PropTypes.oneOf(_(a).pluck("value")),onEvaluatorChange:n.PropTypes.func.isRequired},r);module.exports=s}.apply(exports,t))&&(module.exports=r)},527:function(module,exports,e){var t,r;t=[e,exports,module,e(7)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $=e(7),t=function(){function CodeIndexer(e){_classCallCheck(this,CodeIndexer),this.scribe=e,this.aceEditors={},this.focusedCodeElement=null}return CodeIndexer.prototype.getAllCodeElements=function getAllCodeElements(){return $(this.scribe.el).find("pre")},CodeIndexer.prototype.getCodeElementAtIndex=function getCodeElementAtIndex(e){return this.getAllCodeElements().get(e)},CodeIndexer.prototype.setFocusOnCodeElement=function setFocusOnCodeElement(e){this.focusedCodeElement=e},CodeIndexer.prototype.getAceEditorAtIndex=function getAceEditorAtIndex(e){return this.aceEditors[e]},CodeIndexer.prototype.setAceEditorAtIndex=function setAceEditorAtIndex(e,t){this.aceEditors[t]=e},CodeIndexer.prototype.clearAceEditorCache=function clearAceEditorCache(){this.aceEditors={}},CodeIndexer}();module.exports=t}.apply(exports,t))&&(module.exports=r)},528:function(module,exports,e){var t,r;t=[e,exports,module,e(529),e(80),e(412)],void 0!==(r=function(require,exports,module){"use strict";var t=e(529),r=e(80);e(412),module.exports=function(e){function isFirefox(){return navigator.userAgent.search("Firefox")>-1}function setRangeToEndOfElement(e,t){var r=new e.api.Selection,n=r.range;n.selectNodeContents(t),n.collapse(),r.selection.removeAllRanges(),r.selection.addRange(n)}function moveCursorToAdjacentBlock(e,t,r){var n=new e.api.Selection,o=n.range;if(r){var i=t.nextSibling;i&&(o.setStart(i,0),n.selection.removeAllRanges(),n.selection.addRange(o))}else{var a=t.previousSibling;a&&(o.setStart(a,0),n.selection.removeAllRanges(),n.selection.addRange(o))}}return function(n){function handleKeydown(e){if(8===e.keyCode)handleBackspace(e);else{var r=new n.api.Selection,o=r.range;if(!o)return;var i=t.findBlockContainer(n,o.endContainer);t.isImageBlock(i)&&(38!==e.keyCode&&40!==e.keyCode?(e.preventDefault(),t.select(n,i)):isFirefox()&&moveCursorToAdjacentBlock(n,i,40===e.keyCode))}}function handleKeyup(e){if(38===e.keyCode||40===e.keyCode){var r=new n.api.Selection,o=r.range;if(!o)return;var i=t.findBlockContainer(n,o.endContainer);t.cleanupSelection(n),t.isImageBlock(i)&&(e.preventDefault(),t.select(n,i))}}function handleBackspace(e){var r=new n.api.Selection,o=r.range,i=t.findBlockContainer(n,o.endContainer),a=i.previousSibling;t.isImageBlock(i)?(e.preventDefault(),n.transactionManager.run(function(){a&&setRangeToEndOfElement(n,a),n.el.removeChild(i)})):o.collapsed&&0===o.startOffset&&a&&t.isImageBlock(a)&&(e.preventDefault(),t.select(n,a))}function handleMousedown(e){var r=t.findBlockContainer(n,e.target);t.cleanupSelection(n),t.isImageBlock(r)&&(e.preventDefault(),t.select(n,r))}function handleContentChange(){var e=n.el.childNodes,r=e[e.length-1];if(t.isImageBlock(r)){var o=document.createElement("p");n.el.appendChild(o)}}var o=new n.api.Command("insertImage"),i=new r;o.execute=function(){t.insertImage(n,i,e)},o.queryState=function(){return(new n.api.Selection).getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},o.queryEnabled=function(){return!0},n.el.addEventListener("keydown",handleKeydown),n.el.addEventListener("keyup",handleKeyup),n.el.addEventListener("mousedown",handleMousedown),n.on("content-changed",handleContentChange),n.commands.imageUpload=o}}}.apply(exports,t))&&(module.exports=r)},529:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(7)],void 0!==(r=function(require,exports,module){"use strict";function getFigure(e,t){var r=$("<figure>",{contentEditable:!0}),n=$("<img>",{src:t,"data-asset-id":e,draggable:!1});return r.append(n),r.get(0)}function showLoader(e){var n=$("<div>",{class:t,html:"Uploading..."}),o=$(e.el),i=o.offset(),a=i.left+o.width()/2-30,s=i.top+o.height()/2;n.css({left:a,top:s}),o.addClass(r).attr("contenteditable",!1),$(document.body).append(n)}function hideLoader(e){$(e.el).removeClass(r).attr("contenteditable",!0),$("."+t).remove()}var _=e(2),$=e(7),t="scribe-image-upload-command-loader",r="scribe-image-upload-command-in-progress",n={isImageBlock:function isImageBlock(e){return e&&"FIGURE"===e.nodeName},findBlockContainer:function findBlockContainer(e,t){for(;t&&!e.element.isBlockElement(t);)t=t.parentNode;return t},select:function select(e,t){var r=new e.api.Selection,n=r.range;n||(n=document.createRange()),$(t).addClass("selected"),n.selectNode(t.childNodes[0]),r.selection.removeAllRanges(),r.selection.addRange(n),e.trigger("content-changed")},insertImage:function insertImage(e,t,r){var n=this;t.isInitialized()||(t.initializeImageUploader(r),t.once("select",function(){n.uploadImage(e,t)})),t.selectFile()},uploadImage:function uploadImage(e,t){var r=this;showLoader(e),t.upload().then(function(n){var o=n.id;return t.getAssetMap([o]).then(function(t){r.injectImage(e,o,t[o].url.url)})}).finally(function(){hideLoader(e),t.destroyUploader()})},injectImage:function injectImage(e,t,r){e.transactionManager.run(function(){var o=new e.api.Selection,i=o.range,a=n.findBlockContainer(e,i.endContainer),s=_(e.el.childNodes).indexOf(a)+1,c=a.nextSibling,u=getFigure(t,r);c?e.el.insertBefore(u,c):(e.el.appendChild(u),e.el.appendChild(document.createElement("p"))),setTimeout(function(){n.select(e,e.el.childNodes[s])},100)})},cleanupSelection:function cleanupSelection(e){$("figure.selected",e.el).removeClass("selected")}};module.exports=n}.apply(exports,t))&&(module.exports=r)},530:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";module.exports=function(e){return function(t){var r=new t.api.Command("createLink");r.nodeName="A",r.execute=function(){var r=new t.api.Selection,n=r.range,o=r.getContaining(function(e){return e.nodeName===this.nodeName}.bind(this)),i=o?o.href:"http://",a=window.prompt("Enter a link.",i);if(o&&(n.selectNode(o),r.selection.removeAllRanges(),r.selection.addRange(n)),a){var s=/^https?\:\/\//,c=/^mailto\:/,u=/@/;if(!s.test(a))if(!c.test(a)&&u.test(a)){var l=window.confirm("The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?");a=l?"mailto:"+a:""}else{var p=window.confirm("The URL you entered appears to be a link. Do you want to add the required “http://” prefix?");a=p?"http://"+a:""}e&&e.filter&&e.filter.regex.test(a)&&(a="",window.alert(e.filter.message)),a&&t.api.SimpleCommand.prototype.execute.call(this,a)}},r.queryState=function(){return!!(new t.api.Selection).getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},t.commands.linkPrompt=r}}}.apply(exports,t))&&(module.exports=r)},531:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";module.exports=function(){return function(e){e.el.addEventListener("keypress",function(e){13===e.keyCode&&e.shiftKey&&(e.preventDefault(),e.stopPropagation())})}}}.apply(exports,t))&&(module.exports=r)},532:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(2)],void 0!==(r=function(require,exports,module){"use strict";var $=e(7),_=e(2);module.exports=function(e,t,r){return function(n){function hideToolbar(){$(t).hide()}function showToolbar(){$(t).show()}function doesNotBelongToScribe(t){return t===document||document.activeElement!==n.el&&(!(!t||t===e)&&doesNotBelongToScribe(t.parentNode))}function handleBlur(e){doesNotBelongToScribe(e.relatedTarget)&&hideToolbar()}function handleDocumentClick(e){doesNotBelongToScribe(e.target)&&hideToolbar()}var o=t.querySelectorAll("[data-command-name]");_(o).each(function(e){e.addEventListener("blur",handleBlur)}),n.el.addEventListener("focus",showToolbar),document.addEventListener("click",handleDocumentClick),t.addEventListener("mousedown",function(e){if("BUTTON"!==e.target.nodeName)return e.preventDefault(),!1}),r||hideToolbar()}}}.apply(exports,t))&&(module.exports=r)},533:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";module.exports=function(e){return function(t){var r=e.querySelectorAll("[data-command-name]");Array.prototype.forEach.call(r,function(e){function update(){var n=new t.api.Selection,o=e.getAttribute("data-disabled-tags")||"";o=o.split(",");var i=n.getContaining(function(e){var t=e.nodeName.toLowerCase();return-1!==o.indexOf(t)}),a=function queryState(){try{return r.queryState()}catch(e){return!1}},s=function queryEnabled(){try{return r.queryEnabled()}catch(e){return!1}};n.range&&a()?e.classList.add("active"):e.classList.remove("active"),n.range&&s()&&!i?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}var r=t.getCommand(e.getAttribute("data-command-name"));e.addEventListener("click",function(){t.el.focus(),r.execute()}),t.el.addEventListener("keyup",update),t.el.addEventListener("mouseup",update),t.el.addEventListener("focus",update),t.el.addEventListener("blur",update),t.on("content-changed",update)})}}}.apply(exports,t))&&(module.exports=r)},534:function(module,exports,e){var t,r;t=[e,exports,module,e(7),e(1),e(151),e(414)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,$=e(7),n=e(1),o=e(151);e(414);var i=(r=t=function(e){function TeachInfiniteScroll(){var t,r,n;_classCallCheck(this,TeachInfiniteScroll);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.scrollListener=function(e){var t=!1;if(r.context.scrollContainer&&r.context.scrollContainer!==window){var n=e.target;t=$(n).scrollTop()+$(n).innerHeight()>=n.scrollHeight-100}else t=$(window).scrollTop()>$(document).height()-$(window).height()-100;!r.props.isLoading&&t&&r.props.onInfiniteScroll()},n=t,_possibleConstructorReturn(r,n)}return _inherits(TeachInfiniteScroll,e),TeachInfiniteScroll.prototype.componentDidMount=function componentDidMount(){this.attachScrollListener()},TeachInfiniteScroll.prototype.componentWillUnmount=function componentWillUnmount(){this.detachScrollListener()},TeachInfiniteScroll.prototype.attachScrollListener=function attachScrollListener(){$(this.context.scrollContainer||window).get(0).addEventListener("scroll",this.scrollListener)},TeachInfiniteScroll.prototype.detachScrollListener=function detachScrollListener(){$(this.context.scrollContainer||window).get(0).removeEventListener("scroll",this.scrollListener)},TeachInfiniteScroll.prototype.render=function render(){return n.createElement("div",{className:"rc-TeachInfiniteScroll"},this.props.children,this.props.isLoading&&n.createElement(o,null))},TeachInfiniteScroll}(n.Component),t.propTypes={onInfiniteScroll:n.PropTypes.func.isRequired,children:n.PropTypes.any.isRequired,isLoading:n.PropTypes.bool},t.contextTypes={scrollContainer:n.PropTypes.oneOfType([n.PropTypes.object,n.PropTypes.string])},t.defaultProps={isLoading:!1},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},535:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(356),e(6),e(556),e(12),e(57),e(415)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o,i=e(1),a=e(356),s=e(6),c=e(556),u=e(12),l=e(57);e(415);var p=(r=t=function(e){function ModalCloseX(){return _classCallCheck(this,ModalCloseX),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ModalCloseX,e),ModalCloseX.prototype.render=function render(){var e="?";return i.createElement("a",{className:"nostyle close-x",onClick:this.props.onRequestClose,"aria-label":c("Close"),role:"button",href:"?",ref:"closeButton"},i.createElement(u,{name:"close"}))},ModalCloseX}(i.Component),t.propTypes={onRequestClose:i.PropTypes.func.isRequired},r),d=(o=n=function(e){function Modal(){var t,r,n;_classCallCheck(this,Modal);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.onRequestClose=function(){r.props.allowClose&&(l.trackComponent(r.context._eventData,r.props.data,r.props.trackingName,"close"),r.props.onRequestClose())},r.onRequestCloseX=function(e){e.preventDefault(),r.onRequestClose()},n=t,_possibleConstructorReturn(r,n)}return _inherits(Modal,e),Modal.prototype.componentDidMount=function componentDidMount(){l.trackComponent(this.context._eventData,this.props.data,this.props.trackingName,"show")},Modal.prototype.render=function render(){var e=s("rc-UIModal",this.props.size,this.props.className);return i.createElement(a,{className:e,overlayClassName:"rc-ModalOverlay",isOpen:this.props.isOpen,onAfterOpen:this.props.onAfterOpen,onRequestClose:this.onRequestClose},this.props.title&&i.createElement("h1",{className:"title headline-4-text flex-1"},this.props.title),this.props.allowClose&&i.createElement(p,{onRequestClose:this.onRequestCloseX}),this.props.children)},Modal}(i.Component),n.propTypes={isOpen:i.PropTypes.bool.isRequired,onRequestClose:i.PropTypes.func.isRequired,onAfterOpen:i.PropTypes.func,children:i.PropTypes.node.isRequired,title:i.PropTypes.string,allowClose:i.PropTypes.bool,size:i.PropTypes.oneOf(["default","small","large","x-large"]),className:i.PropTypes.string,trackingName:i.PropTypes.string,data:i.PropTypes.object},n.contextTypes={_eventData:i.PropTypes.object},n.defaultProps={size:"default",allowClose:!0,isOpen:!0},o);module.exports=d}.apply(exports,t))&&(module.exports=r)},536:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(){return function(e){function moveChildren(e,t){for(var r,n=e.firstChild;n;)r=n.nextSibling,t.appendChild(n),n=r}function copyAttributes(e,t){if(e.hasAttributes())for(var r=0,n=e.attributes.length;r<n;r++){var o=e.attributes[r].cloneNode(!1);t.attributes.setNamedItem(o)}}function replaceNode(e,t){var r=document.createElement(t);moveChildren(e,r),copyAttributes(e,r),e.parentNode.replaceChild(r,e)}function traverse(e){for(var r=e.firstElementChild,n;r;){n=r.nextElementSibling,traverse(r);var o=t[r.nodeName];o&&replaceNode(r,o),r=n}}var t={B:"strong",I:"em"};e.registerHTMLFormatter("normalize",function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,traverse(t),t.innerHTML}return traverse(e),e})}}}.apply(exports,t))&&(module.exports=r)},537:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(){return function(e){e.registerPlainTextFormatter(function(e){return e.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.apply(exports,t))&&(module.exports=r)},538:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(e){return function(t){var r="<h"+e+">",n="H"+e,o="h"+e,i=new t.api.Command("formatBlock");i.execute=function(){this.queryState()?t.api.Command.prototype.execute.call(this,"<p>"):t.api.Command.prototype.execute.call(this,r)},i.queryState=function(){return!!(new t.api.Selection).getContaining(function(e){return e.nodeName===n})},i.queryEnabled=function(){var e=new t.api.Selection,r=e.getContaining(function(e){return"OL"===e.nodeName||"UL"===e.nodeName});return t.api.Command.prototype.queryEnabled.apply(this,arguments)&&t.allowsBlockElements()&&!r},t.commands[o]=i}}}.apply(exports,t))&&(module.exports=r)},539:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(){return function(e){var t=new e.api.Command("unlink");t.execute=function(){var t=new e.api.Selection;t.selection.isCollapsed?e.transactionManager.run(function(){var r=t.getContaining(function(e){return"A"===e.nodeName});r&&(t.placeMarkers(),e.element.unwrap(r.parentNode,r),t.selectMarkers())}):e.api.Command.prototype.execute.apply(this,arguments)},t.queryEnabled=function(){var t=new e.api.Selection;return t.selection.isCollapsed?!!t.getContaining(function(e){return"A"===e.nodeName}):e.api.Command.prototype.queryEnabled.apply(this,arguments)},e.commands.unlink=t}}}.apply(exports,t))&&(module.exports=r)},540:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var module=t[r]={exports:{},id:r,loaded:!1};return e[r].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,e){e(1);var t="scribe-plugin-placeholder";module.exports=function(e,r){return function(n){function getStyle(e,t){var r;return e.currentStyle?r=e.currentStyle[t]:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),parseInt(r,10)}function isEditorEmpty(){var e=n.el.childNodes,t=e.length;if(0===t)return!0;if(1===t){var r=e[0];if("p"===r.nodeName.toLowerCase()&&""===r.textContent)return!0}return!1}function show(){if(0!==r.getElementsByClassName(t).length)return;var o=document.createElement("div"),i=2;o.className=t,o.innerText=e,o.style.top=getStyle(n.el,"padding-top")+getStyle(n.el,"border-top-width")+"px",o.style.left=getStyle(n.el,"padding-left")+2+"px",r.appendChild(o)}function hide(){Array.prototype.slice.call(r.getElementsByClassName(t)).forEach(function(e){r.removeChild(e)})}function update(){isEditorEmpty()?show():hide()}n.on("content-changed",update),n.el.addEventListener("blur",update),n.el.addEventListener("focus",update)}}},function(module,exports,e){}])}.apply(exports,t))&&(module.exports=r)},541:function(module,exports,e){var t,r;t=[e(828)],void 0!==(r=function(e){return function(t){return t.tags.em||(t.tags.em={}),t.tags.em.class="scribe-marker",t.tags.br={},function(r){var n=new e(t);r.registerHTMLFormatter("sanitize",n.clean.bind(n))}}}.apply(exports,t))&&(module.exports=r)},542:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(){function isUnorderedListChar(e){return"*"===e||"-"===e||"•"===e}var e={32:"Space",42:"*",45:"-",46:".",49:"1",8226:"•"};return function(t){function removeSelectedTextNode(){var e=new t.api.Selection,r=e.selection.anchorNode,n;if(r.nodeType===Node.TEXT_NODE?n=r:r.firstChild.nodeType===Node.TEXT_NODE&&(n=r.firstChild),!n)throw new Error("Cannot empty non-text node!");var o=n.parentNode;n.previousSibling&&o.removeChild(n.previousSibling),o.removeChild(n)}function input(i){var a;r=n,n=o,o=e[i.charCode];var s=new t.api.Selection,c=s.range.commonAncestorContainer,u=findBlockContainer(c);if(u&&"P"===u.tagName){var l=isUnorderedListChar(c.textContent[0]),p=1===s.range.endOffset;isUnorderedListChar(n)&&"Space"===o&&l&&p&&(a="insertUnorderedList");var d="1."===[c.previousSibling&&c.previousSibling.textContent,c.textContent].join("").slice(0,2);"1"===r&&"."===n&&"Space"===o&&d&&(a="insertOrderedList")}a&&(i.preventDefault(),t.transactionManager.run(function(){t.getCommand(a).execute(),removeSelectedTextNode()}))}function findBlockContainer(e){for(;e&&!t.element.isBlockElement(e);)e=e.parentNode;return e}var r,n,o;t.el.addEventListener("keypress",input)}}}.apply(exports,t))&&(module.exports=r)},543:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){return function(e){function __webpack_require__(r){if(t[r])return t[r].exports;var module=t[r]={exports:{},id:r,loaded:!1};return e[r].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,e){var t=e(1),r=e(6);module.exports=function(){return function(e){function findBlockContainer(t){for(;t&&!e.element.isBlockElement(t);)t=t.parentNode;return t}function handleKeydown(t){if(13===t.keyCode){var n=new e.api.Selection,o=n.range,i=o.endContainer,a=r.findTable(e,i),s=r.findTableCell(e,i),c=Array.prototype.indexOf.call(e.el.childNodes,a)+1,u=null;s&&(t.preventDefault(),u=document.createElement("p"),a.nextSibling?e.el.insertBefore(u,a.nextSibling):e.el.appendChild(u),o.setStart(e.el.childNodes[c],0),o.collapse(!0),n.selection.removeAllRanges(),n.selection.addRange(o))}}function handleRightClick(t){var n=t.target||t.toElement;if(!n)return;var i=r.findTableCell(e,n),a=r.findTable(e,i);a&&(t.preventDefault(),t.stopPropagation(),o.show(a,i))}var n=new e.api.Command("insertTable"),o=new t(e);n.nodeName="TABLE",n.execute=function(){var t=r.createTable(3,3);e.transactionManager.run(function(){var n=new e.api.Selection,o=findBlockContainer(n.range.endContainer),i=o.nextSibling;i?e.el.insertBefore(t,i):e.el.appendChild(t);var a=t.childNodes[0],s=a.childNodes[0],c=s.childNodes[0];r.select(e,c)})},n.queryState=function(){return(new e.api.Selection).getContaining(function(e){return e.nodeName===this.nodeName}.bind(this))},n.queryEnabled=function(){return!0},e.el.addEventListener("keydown",handleKeydown),e.el.addEventListener("contextmenu",handleRightClick),e.commands.table=n}}},function(module,exports,e){e(2);var t=e(6),r=[{id:0,text:"Insert row above"},{id:1,text:"Insert row below"},{id:2,text:"Insert column left"},{id:3,text:"Insert column right"},{id:4,text:"Delete row"},{id:5,text:"Delete column"},{id:6,text:"Delete table"}],n="scribe-table-context-menu",o="scribe-table-context-menu-action",i=function(e){for(var t=0,r=0;e;)t+=e.offsetTop,r+=e.offsetLeft,e!==document.body&&(t-=e.scrollTop),e=e.offsetParent;return{top:t,left:r}},a=function(e){return this.show=function(e,t){this.hide();var n=document.createElement("div"),o=i(t);n.className="scribe-table-context-menu",n.style.top=o.top+20+"px",n.style.left=o.left+20+"px",r.forEach(function(r){var o=document.createElement("div");o.className="scribe-table-context-menu-action",o.textContent=r.text,o.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),this.handleAction(e,t,r)}.bind(this)),n.appendChild(o)}.bind(this)),document.body.appendChild(n),document.addEventListener("click",function(e){3!==e.which&&this.hide()}.bind(this))},this.hide=function(){var e=document.getElementsByClassName("scribe-table-context-menu")[0];e&&e.parentNode.removeChild(e),document.removeEventListener("click",this.hide)},this.handleAction=function(r,n,o){var i=t.findCellPosition(r,n);switch(this.hide(),o.id){case 0:t.insertRow(e,r,i.rowIndex);break;case 1:t.insertRow(e,r,i.rowIndex+1);break;case 2:t.insertColumn(e,r,i.columnIndex);break;case 3:t.insertColumn(e,r,i.columnIndex+1);break;case 4:t.removeRow(e,r,i.rowIndex);break;case 5:t.removeColumn(e,r,i.columnIndex);break;case 6:t.removeTable(e,r)}},this};module.exports=a},function(module,exports){},,,,function(module,exports){var e={createTableCell:function(){return document.createElement("td")},createTableRow:function(t){for(var r=document.createElement("tr"),n=0;n<t;n++)r.appendChild(e.createTableCell());return r},createTable:function(t,r){for(var n=document.createElement("table"),o=document.createElement("tbody"),i=0;i<t;i++)o.appendChild(e.createTableRow(r));return n.appendChild(o),n},getColumnCount:function(e){return e.childNodes[0].childNodes[0].childNodes.length},getRowCount:function(e){return e.childNodes[0].childNodes.length},findTable:function(e,t){for(;t&&t!==e.el&&"TABLE"!==t.nodeName;)t=t.parentNode;return t&&"TABLE"!==t.nodeName&&(t=null),t},findTableCell:function(e,t){for(;t&&t!==e.el&&"TD"!==t.nodeName;)t=t.parentNode;return t&&"TD"!==t.nodeName&&(t=null),t},findCellPosition:function(e,t){var r=e.childNodes[0],n=Array.prototype.slice.call(r.childNodes),o={rowIndex:-1,columnIndex:-1};return n.every(function(e,r){if(Array.prototype.slice.call(e.childNodes).every(function(e,n){if(e===t)return o={rowIndex:r,columnIndex:n},!1;return!0}),-1!==o.rowIndex)return!1;return!0}),o},insertRow:function(t,r,n){var o=e.getColumnCount(r),i=r.childNodes[0],a=i.childNodes[n],s=e.createTableRow(o);t.transactionManager.run(function(){i.insertBefore(s,a),this.select(t,s.childNodes[0])}.bind(this))},removeRow:function(t,r,n){if(1===this.getRowCount(r))return void this.removeTable(t,r);var o=r.childNodes[0],i=o.childNodes[n];t.transactionManager.run(function(){o.removeChild(i),n>=e.getRowCount(r)&&n--,this.select(t,o.childNodes[n].childNodes[0])}.bind(this))},insertColumn:function(t,r,n){var o=r.childNodes[0],i=Array.prototype.slice.call(o.childNodes);t.transactionManager.run(function(){i.forEach(function(t){var r=e.createTableCell();t.insertBefore(r,t.childNodes[n])}),this.select(t,o.childNodes[0].childNodes[n])}.bind(this))},removeColumn:function(e,t,r){var n=this.getColumnCount(t),o=t.childNodes[0],i=Array.prototype.slice.call(o.childNodes);if(1===n)return void this.removeTable(e,t);e.transactionManager.run(function(){i.forEach(function(e){e.removeChild(e.childNodes[r])}),this.select(e,o.childNodes[0].childNodes[0])}.bind(this))},removeTable:function(e,t){e.transactionManager.run(function(){e.el.removeChild(t),this.select(e,e.el.childNodes[0])}.bind(this))},select:function(e,t){var r=new e.api.Selection;r.range.setStart(t,0),r.range.collapse(!0),r.selection.removeAllRanges(),r.selection.addRange(r.range)}};module.exports=e}])}.apply(exports,t))&&(module.exports=r)},544:function(module,exports,e){var t,r,n,t,o,t,i;(function($){!function(r,n){t=n,i="function"==typeof t?t.call(exports,e,exports,module):t}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=n(String(e||"").toLowerCase()))||!e.length)return[];var t,r,i,s,c=[],u=e.split(/ +/);for(t=0,r=u.length;t<r;t++){if(i=o(u[t]),this.settings.diacritics)for(s in a)a.hasOwnProperty(s)&&(i=i.replace(new RegExp(s,"g"),a[s]));c.push({string:u[t],regex:new RegExp(i,"i")})}return c},e.prototype.iterator=function(e,t){var r;r=i(e)?Array.prototype.forEach||function(e){for(var t=0,r=this.length;t<r;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},r.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var r,n,o,i;r=this,e=r.prepareSearch(e,t),o=e.tokens,n=e.options.fields,i=o.length;var a=function(e,t){var r,n;if(!e)return 0;if(e=String(e||""),-1===(n=e.search(t.regex)))return 0;return r=t.string.length/e.length,0===n&&(r+=.5),r},s=function(){var e=n.length;if(!e)return function(){return 0};if(1===e)return function(e,t){return a(t[n[0]],e)};return function(t,r){for(var o=0,i=0;o<e;o++)i+=a(r[n[o]],t);return i/e}}();if(!i)return function(){return 0};if(1===i)return function(e){return s(o[0],e)};return"and"===e.options.conjunction?function(e){for(var t,r=0,n=0;r<i;r++){if((t=s(o[r],e))<=0)return 0;n+=t}return n/i}:function(e){for(var t=0,r=0;t<i;t++)r+=s(o[t],e);return r/i}},e.prototype.getSortFunction=function(e,r){var n,o,i,a,s,c,u,l,p,d,f;if(i=this,e=i.prepareSearch(e,r),f=!e.query&&r.sort_empty||r.sort,p=function(e,t){if("$score"===e)return t.score;return i.items[t.id][e]},s=[],f)for(n=0,o=f.length;n<o;n++)(e.query||"$score"!==f[n].field)&&s.push(f[n]);if(e.query){for(d=!0,n=0,o=s.length;n<o;n++)if("$score"===s[n].field){d=!1;break}d&&s.unshift({field:"$score",direction:"desc"})}else for(n=0,o=s.length;n<o;n++)if("$score"===s[n].field){s.splice(n,1);break}for(l=[],n=0,o=s.length;n<o;n++)l.push("desc"===s[n].direction?-1:1);return c=s.length,c?1===c?(a=s[0].field,u=l[0],function(e,r){return u*t(p(a,e),p(a,r))}):function(e,r){var n,o,i,a,u;for(n=0;n<c;n++)if(u=s[n].field,o=l[n]*t(p(u,e),p(u,r)))return o;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=r({},t);var n=t.fields,o=t.sort,a=t.sort_empty;return n&&!i(n)&&(t.fields=[n]),o&&!i(o)&&(t.sort=[o]),a&&!i(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var r=this,n,o,i,a,s,c;return i=this.prepareSearch(e,t),t=i.options,e=i.query,c=t.score||r.getScoreFunction(i),e.length?r.iterator(r.items,function(e,r){o=c(e),(!1===t.filter||o>0)&&i.items.push({score:o,id:r})}):r.iterator(r.items,function(e,t){i.items.push({score:1,id:t})}),s=r.getSortFunction(i,t),s&&i.items.sort(s),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i};var t=function(e,t){if("number"==typeof e&&"number"==typeof t)return e>t?1:e<t?-1:0;if(e=s(String(e||"")),t=s(String(t||"")),e>t)return 1;if(t>e)return-1;return 0},r=function(e,t){var r,n,o,i;for(r=1,n=arguments.length;r<n;r++){if(!(i=arguments[r]))continue;for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e},n=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},o=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},i=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},s=function(){var e,t,r,n,o="",i={};for(r in a)if(a.hasOwnProperty(r))for(n=a[r].substring(2,a[r].length-1),o+=n,e=0,t=n.length;e<t;e++)i[n.charAt(e)]=r;var s=new RegExp("["+o+"]","g");return function(e){return e.replace(s,function(e){return i[e]}).toLowerCase()}}();return e}),function(r,n){t=n,o="function"==typeof t?t.call(exports,e,exports,module):t}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var r,n,o,i=this,a=[];if(i.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(r=0,n=e.length;r<n;r++)"string"==typeof e[r]?a.push(e[r]):(i.plugins.settings[e[r].name]=e[r].options,a.push(e[r].name));else if(e)for(o in e)e.hasOwnProperty(o)&&(i.plugins.settings[o]=e[o],a.push(o));for(;a.length;)i.require(a.shift())},e.prototype.loadPlugin=function(t){var r=this,n=r.plugins,o=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=o.fn.apply(r,[r.plugins.settings[t]||{}]),n.names.push(t)},e.prototype.require=function(e){var t=this,r=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(r.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return r.loaded[e]},e.define=function(t,r){e.plugins[t]={name:t,fn:r}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(a,s){r=[e(7),i,o],t=s,void 0!==(n="function"==typeof t?t.apply(exports,r):t)&&(module.exports=n)}(this,function($,e,t){"use strict";var r=function(e,t){if("string"==typeof t&&!t.length)return;var r="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var o=e.data.search(r);if(o>=0&&e.data.length>0){var i=e.data.match(r),a=document.createElement("span");a.className="highlight";var s=e.splitText(o),c=s.splitText(i[0].length),u=s.cloneNode(!0);a.appendChild(u),s.parentNode.replaceChild(a,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=n(e.childNodes[l]);return t};return e.each(function(){n(this)})},n=function(){};n.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var r=arguments.length;if(0===r)return delete this._events;if(1===r)return delete this._events[e];if(this._events=this._events||{},e in this._events==!1)return;this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events==!1)return;for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["on","off","trigger"],r=0;r<t.length;r++)e.prototype[t[r]]=n.prototype[t[r]]};var o=/Mac/.test(navigator.userAgent),i=65,a=188,s=13,c=27,u=37,l=38,p=80,d=39,f=40,h=78,m=8,g=46,y=16,v=o?91:17,b=o?18:17,C=9,E=1,w=2,S=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,O=function(e){return void 0!==e},T=function(e){if(void 0===e||null===e)return null;if("boolean"==typeof e)return e?"1":"0";return e+""},P=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},M=function(e){return(e+"").replace(/\$/g,"$$$$")},A={};A.before=function(e,t,r){var n=e[t];e[t]=function(){return r.apply(e,arguments),n.apply(e,arguments)}},A.after=function(e,t,r){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return r.apply(e,arguments),t}};var x=function(e){var t=!1;return function(){if(t)return;t=!0,e.apply(this,arguments)}},k=function(e,t){var r;return function(){var n=this,o=arguments;window.clearTimeout(r),r=window.setTimeout(function(){e.apply(n,o)},t)}},R=function(e,t,r){var n,o=e.trigger,i={};e.trigger=function(){var r=arguments[0];if(-1===t.indexOf(r))return o.apply(e,arguments);i[r]=arguments},r.apply(e,[]),e.trigger=o;for(n in i)i.hasOwnProperty(n)&&o.apply(e,i[n])},N=function(e,t,r,n){e.on(t,r,function(t){for(var r=t.target;r&&r.parentNode!==e[0];)r=r.parentNode;return t.currentTarget=r,n.apply(this,[t])})},I=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var r=document.selection.createRange(),n=document.selection.createRange().text.length;r.moveStart("character",-e.value.length),t.start=r.text.length-n,t.length=n}return t},D=function(e,t,r){var n,o,i={};if(r)for(n=0,o=r.length;n<o;n++)i[r[n]]=e.css(r[n]);else i=e.css();t.css(i)},L=function(e,t){if(!e)return 0;var r=$("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(e).appendTo("body");D(t,r,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=r.width();return r.remove(),n},j=function(e){var t=null,r=function(r,n){var o,i,a,s,c,u,l,p;if(r=r||window.event||{},n=n||{},r.metaKey||r.altKey)return;if(!n.force&&!1===e.data("grow"))return;o=e.val(),r.type&&"keydown"===r.type.toLowerCase()&&(i=r.keyCode,a=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||32===i,46===i||8===i?(p=I(e[0]),p.length?o=o.substring(0,p.start)+o.substring(p.start+p.length):8===i&&p.start?o=o.substring(0,p.start-1)+o.substring(p.start+1):46===i&&void 0!==p.start&&(o=o.substring(0,p.start)+o.substring(p.start+1))):a&&(u=r.shiftKey,l=String.fromCharCode(r.keyCode),l=u?l.toUpperCase():l.toLowerCase(),o+=l)),s=e.attr("placeholder"),!o&&s&&(o=s),(c=L(o,e)+4)!==t&&(t=c,e.width(c),e.triggerHandler("resize"))};e.on("keydown keyup update blur",r),r()},z=function(t,r){var n,o,i,a,s,c=this;s=t[0],s.selectize=c;var u=window.getComputedStyle&&window.getComputedStyle(s,null);if(a=u?u.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,a=a||t.parents("[dir]:first").attr("dir")||"",$.extend(c,{order:0,settings:r,$input:t,tabIndex:t.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++z.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:t.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===r.loadThrottle?c.onSearchChange:k(c.onSearchChange,r.loadThrottle)}),c.sifter=new e(this.options,{diacritics:r.diacritics}),c.settings.options){for(o=0,i=c.settings.options.length;o<i;o++)c.registerOption(c.settings.options[o]);delete c.settings.options}if(c.settings.optgroups){for(o=0,i=c.settings.optgroups.length;o<i;o++)c.registerOptionGroup(c.settings.optgroups[o]);delete c.settings.optgroups}c.settings.mode=c.settings.mode||(1===c.settings.maxItems?"single":"multi"),"boolean"!=typeof c.settings.hideSelected&&(c.settings.hideSelected="multi"===c.settings.mode),c.initializePlugins(c.settings.plugins),c.setupCallbacks(),c.setupTemplates(),c.setup()};return n.mixin(z),t.mixin(z),$.extend(z.prototype,{setup:function(){var e=this,t=e.settings,r=e.eventNS,n=$(window),i=$(document),a=e.$input,s,c,u,l,p,d,f,h,m,g,y;if(f=e.settings.mode,g=a.attr("class")||"",s=$("<div>").addClass(t.wrapperClass).addClass(g).addClass(f),c=$("<div>").addClass(t.inputClass).addClass("items").appendTo(s),u=$('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",a.is(":disabled")?"-1":e.tabIndex),d=$(t.dropdownParent||s),l=$("<div>").addClass(t.dropdownClass).addClass(f).hide().appendTo(d),p=$("<div>").addClass(t.dropdownContentClass).appendTo(l),e.settings.copyClassesToDropdown&&l.addClass(g),s.css({width:a[0].style.width}),e.plugins.names.length&&(y="plugin-"+e.plugins.names.join(" plugin-"),s.addClass(y),l.addClass(y)),(null===t.maxItems||t.maxItems>1)&&1===e.tagType&&a.attr("multiple","multiple"),e.settings.placeholder&&u.attr("placeholder",t.placeholder),!e.settings.splitOn&&e.settings.delimiter){var C=e.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");e.settings.splitOn=new RegExp("\\s*"+C+"+\\s*")}a.attr("autocorrect")&&u.attr("autocorrect",a.attr("autocorrect")),a.attr("autocapitalize")&&u.attr("autocapitalize",a.attr("autocapitalize")),e.$wrapper=s,e.$control=c,e.$control_input=u,e.$dropdown=l,e.$dropdown_content=p,l.on("mouseenter","[data-selectable]",function(){return e.onOptionHover.apply(e,arguments)}),l.on("mousedown click","[data-selectable]",function(){return e.onOptionSelect.apply(e,arguments)}),N(c,"mousedown","*:not(input)",function(){return e.onItemSelect.apply(e,arguments)}),j(u),c.on({mousedown:function(){return e.onMouseDown.apply(e,arguments)},click:function(){return e.onClick.apply(e,arguments)}}),u.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return e.onKeyDown.apply(e,arguments)},keyup:function(){return e.onKeyUp.apply(e,arguments)},keypress:function(){return e.onKeyPress.apply(e,arguments)},resize:function(){e.positionDropdown.apply(e,[])},blur:function(){return e.onBlur.apply(e,arguments)},focus:function(){return e.ignoreBlur=!1,e.onFocus.apply(e,arguments)},paste:function(){return e.onPaste.apply(e,arguments)}}),i.on("keydown"+r,function(t){e.isCmdDown=t[o?"metaKey":"ctrlKey"],e.isCtrlDown=t[o?"altKey":"ctrlKey"],e.isShiftDown=t.shiftKey}),i.on("keyup"+r,function(t){t.keyCode===b&&(e.isCtrlDown=!1),16===t.keyCode&&(e.isShiftDown=!1),t.keyCode===v&&(e.isCmdDown=!1)}),i.on("mousedown"+r,function(t){if(e.isFocused){if(t.target===e.$dropdown[0]||t.target.parentNode===e.$dropdown[0])return!1;e.$control.has(t.target).length||t.target===e.$control[0]||e.blur(t.target)}}),n.on(["scroll"+r,"resize"+r].join(" "),function(){e.isOpen&&e.positionDropdown.apply(e,arguments)}),n.on("mousemove"+r,function(){e.ignoreHover=!1}),this.revertSettings={$children:a.children().detach(),tabindex:a.attr("tabindex")},a.attr("tabindex",-1).hide().after(e.$wrapper),$.isArray(t.items)&&(e.setValue(t.items),delete t.items),S&&a.on("invalid"+r,function(t){t.preventDefault(),e.isInvalid=!0,e.refreshState()}),e.updateOriginalInput(),e.refreshItems(),e.refreshState(),e.updatePlaceholder(),e.isSetup=!0,a.is(":disabled")&&e.disable(),e.on("change",this.onChange),a.data("selectize",e),a.addClass("selectized"),e.trigger("initialize"),!0===t.preload&&e.onSearchChange("")},setupTemplates:function(){var e=this,t=e.settings.labelField,r=e.settings.optgroupLabelField,n={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[r])+"</div>"},option:function(e,r){return'<div class="option">'+r(e[t])+"</div>"},item:function(e,r){return'<div class="item">'+r(e[t])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};e.settings.render=$.extend({},n,e.settings.render)},setupCallbacks:function(){var e,t,r={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in r)r.hasOwnProperty(e)&&(t=this.settings[r[e]])&&this.on(e,t)},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,r=e.isDefaultPrevented(),n=$(e.target);if(t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?t.isOpen?t.close():t.open():r||t.setActiveItem(null),!1}else r||window.setTimeout(function(){t.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var t=this;t.isFull()||t.isInputHidden||t.isLocked?e.preventDefault():t.settings.splitOn&&setTimeout(function(){for(var e=$.trim(t.$control_input.val()||"").split(t.settings.splitOn),r=0,n=e.length;r<n;r++)t.createItem(e[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter)return this.createItem(),e.preventDefault(),!1},onKeyDown:function(e){var t=e.target===this.$control_input[0],r=this;if(r.isLocked)return void(9!==e.keyCode&&e.preventDefault());switch(e.keyCode){case 65:if(r.isCmdDown)return void r.selectAll();break;case 27:return void(r.isOpen&&(e.preventDefault(),e.stopPropagation(),r.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!r.isOpen&&r.hasOptions)r.open();else if(r.$activeOption){r.ignoreHover=!0;var n=r.getAdjacentOption(r.$activeOption,1);n.length&&r.setActiveOption(n,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(r.$activeOption){r.ignoreHover=!0;var i=r.getAdjacentOption(r.$activeOption,-1);i.length&&r.setActiveOption(i,!0,!0)}return void e.preventDefault();case 13:return void(r.isOpen&&r.$activeOption&&(r.onOptionSelect({currentTarget:r.$activeOption}),e.preventDefault()));case 37:return void r.advanceSelection(-1,e);case 39:return void r.advanceSelection(1,e);case 9:return r.settings.selectOnTab&&r.isOpen&&r.$activeOption&&(r.onOptionSelect({currentTarget:r.$activeOption}),r.isFull()||e.preventDefault()),void(r.settings.create&&r.createItem()&&e.preventDefault());case 8:case 46:return void r.deleteSelection(e)}if((r.isFull()||r.isInputHidden)&&!(o?e.metaKey:e.ctrlKey))return void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var r=t.$control_input.val()||"";t.lastValue!==r&&(t.lastValue=r,t.onSearchChange(r),t.refreshOptions(),t.trigger("type",r))},onSearchChange:function(e){var t=this,r=t.settings.load;if(!r)return;if(t.loadedSearches.hasOwnProperty(e))return;t.loadedSearches[e]=!0,t.load(function(n){r.apply(t,[e,n])})},onFocus:function(e){var t=this,r=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;if(t.ignoreFocus)return;t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),r||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()},onBlur:function(e,t){var r=this;if(!r.isFocused)return;if(r.isFocused=!1,r.ignoreFocus)return;if(!r.ignoreBlur&&document.activeElement===r.$dropdown_content[0])return r.ignoreBlur=!0,void r.onFocus(e);var n=function(){r.close(),r.setTextboxValue(""),r.setActiveItem(null),r.setActiveOption(null),r.setCaret(r.items.length),r.refreshState(),(t||document.body).focus(),r.ignoreFocus=!1,r.trigger("blur")};r.ignoreFocus=!0,r.settings.create&&r.settings.createOnBlur?r.createItem(null,!1,n):n()},onOptionHover:function(e){if(this.ignoreHover)return;this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,r,n,o=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),r=$(e.currentTarget),r.hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):void 0!==(t=r.attr("data-value"))&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(t),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&o.setActiveOption(o.getOption(t)))},onItemSelect:function(e){var t=this;if(t.isLocked)return;"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,r=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||r.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){R(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(e,t){var r=this,n,o,i,a,s,c,u,l;if("single"===r.settings.mode)return;if(e=$(e),!e.length)return $(r.$activeItems).removeClass("active"),r.$activeItems=[],void(r.isFocused&&r.showInput());if("mousedown"===(n=t&&t.type.toLowerCase())&&r.isShiftDown&&r.$activeItems.length){for(l=r.$control.children(".active:last"),a=Array.prototype.indexOf.apply(r.$control[0].childNodes,[l[0]]),s=Array.prototype.indexOf.apply(r.$control[0].childNodes,[e[0]]),a>s&&(u=a,a=s,s=u),o=a;o<=s;o++)c=r.$control[0].childNodes[o],-1===r.$activeItems.indexOf(c)&&($(c).addClass("active"),r.$activeItems.push(c));t.preventDefault()}else"mousedown"===n&&r.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(i=r.$activeItems.indexOf(e[0]),r.$activeItems.splice(i,1),e.removeClass("active")):r.$activeItems.push(e.addClass("active")[0]):($(r.$activeItems).removeClass("active"),r.$activeItems=[e.addClass("active")[0]]);r.hideInput(),this.isFocused||r.focus()},setActiveOption:function(e,t,r){var n,o,i,a,s,c=this;if(c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,e=$(e),!e.length)return;c.$activeOption=e.addClass("active"),!t&&O(t)||(n=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),t=c.$dropdown_content.scrollTop()||0,i=c.$activeOption.offset().top-c.$dropdown_content.offset().top+t,a=i,s=i-n+o,i+o>n+t?c.$dropdown_content.stop().animate({scrollTop:s},r?c.settings.scrollDuration:0):i<t&&c.$dropdown_content.stop().animate({scrollTop:a},r?c.settings.scrollDuration:0))},selectAll:function(){var e=this;if("single"===e.settings.mode)return;e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus()},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;if(e.isDisabled)return;e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0)},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(e){var t,r,n,o,i,a=this,s=a.settings,c=this.getSearchOptions();if(s.score&&"function"!=typeof(i=a.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==a.lastQuery?(a.lastQuery=e,o=a.sifter.search(e,$.extend(c,{score:i})),a.currentResults=o):o=$.extend(!0,{},a.currentResults),s.hideSelected)for(t=o.items.length-1;t>=0;t--)-1!==a.items.indexOf(T(o.items[t].id))&&o.items.splice(t,1);return o},refreshOptions:function(e){var t,n,o,i,a,s,c,u,l,p,d,f,h,m,g,y;void 0===e&&(e=!0);var v=this,b=$.trim(v.$control_input.val()),C=v.search(b),E=v.$dropdown_content,w=v.$activeOption&&T(v.$activeOption.attr("data-value"));for(i=C.items.length,"number"==typeof v.settings.maxOptions&&(i=Math.min(i,v.settings.maxOptions)),a={},s=[],t=0;t<i;t++)for(c=v.options[C.items[t].id],u=v.render("option",c),l=c[v.settings.optgroupField]||"",p=$.isArray(l)?l:[l],n=0,o=p&&p.length;n<o;n++)l=p[n],v.optgroups.hasOwnProperty(l)||(l=""),a.hasOwnProperty(l)||(a[l]=[],s.push(l)),a[l].push(u);for(this.settings.lockOptgroupOrder&&s.sort(function(e,t){return(v.optgroups[e].$order||0)-(v.optgroups[t].$order||0)}),d=[],t=0,i=s.length;t<i;t++)l=s[t],v.optgroups.hasOwnProperty(l)&&a[l].length?(f=v.render("optgroup_header",v.optgroups[l])||"",f+=a[l].join(""),d.push(v.render("optgroup",$.extend({},v.optgroups[l],{html:f})))):d.push(a[l].join(""));if(E.html(d.join("")),v.settings.highlight&&C.query.length&&C.tokens.length)for(t=0,i=C.tokens.length;t<i;t++)r(E,C.tokens[t].regex);if(!v.settings.hideSelected)for(t=0,i=v.items.length;t<i;t++)v.getOption(v.items[t]).addClass("selected");h=v.canCreate(b),h&&(E.prepend(v.render("option_create",{input:b})),y=$(E[0].childNodes[0])),v.hasOptions=C.items.length>0||h,v.hasOptions?(C.items.length>0?(g=w&&v.getOption(w),g&&g.length?m=g:"single"===v.settings.mode&&v.items.length&&(m=v.getOption(v.items[0])),m&&m.length||(m=y&&!v.settings.addPrecedence?v.getAdjacentOption(y,1):E.find("[data-selectable]:first"))):m=y,v.setActiveOption(m),e&&!v.isOpen&&v.open()):(v.setActiveOption(null),e&&v.isOpen&&v.close())},addOption:function(e){var t,r,n,o=this;if($.isArray(e)){for(t=0,r=e.length;t<r;t++)o.addOption(e[t]);return}(n=o.registerOption(e))&&(o.userOptions[n]=!0,o.lastQuery=null,o.trigger("option_add",n,e))},registerOption:function(e){var t=T(e[this.settings.valueField]);if(!t||this.options.hasOwnProperty(t))return!1;return e.$order=e.$order||++this.order,this.options[t]=e,t},registerOptionGroup:function(e){var t=T(e[this.settings.optgroupValueField]);if(!t)return!1;return e.$order=e.$order||++this.order,this.optgroups[t]=e,t},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var r=this,n,o,i,a,s,c,u;if(e=T(e),i=T(t[r.settings.valueField]),null===e)return;if(!r.options.hasOwnProperty(e))return;if("string"!=typeof i)throw new Error("Value must be set in option data");u=r.options[e].$order,i!==e&&(delete r.options[e],-1!==(a=r.items.indexOf(e))&&r.items.splice(a,1,i)),t.$order=t.$order||u,r.options[i]=t,s=r.renderCache.item,c=r.renderCache.option,s&&(delete s[e],delete s[i]),c&&(delete c[e],delete c[i]),-1!==r.items.indexOf(i)&&(n=r.getItem(e),o=$(r.render("item",t)),n.hasClass("active")&&o.addClass("active"),n.replaceWith(o)),r.lastQuery=null,r.isOpen&&r.refreshOptions(!1)},removeOption:function(e,t){var r=this;e=T(e);var n=r.renderCache.item,o=r.renderCache.option;n&&delete n[e],o&&delete o[e],delete r.userOptions[e],delete r.options[e],r.lastQuery=null,r.trigger("option_remove",e),r.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(e,t){var r=this.$dropdown.find("[data-selectable]"),n=r.index(e)+t;return n>=0&&n<r.length?r.eq(n):$()},getElementWithValue:function(e,t){if(void 0!==(e=T(e))&&null!==e)for(var r=0,n=t.length;r<n;r++)if(t[r].getAttribute("data-value")===e)return $(t[r]);return $()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(e,t){for(var r=$.isArray(e)?e:[e],n=0,o=r.length;n<o;n++)this.isPending=n<o-1,this.addItem(r[n],t)},addItem:function(e,t){R(this,t?[]:["change"],function(){var r,n,o,i=this,a=i.settings.mode,s,c,u,l;if(e=T(e),-1!==i.items.indexOf(e))return void("single"===a&&i.close());if(!i.options.hasOwnProperty(e))return;if("single"===a&&i.clear(t),"multi"===a&&i.isFull())return;r=$(i.render("item",i.options[e])),l=i.isFull(),i.items.splice(i.caretPos,0,e),i.insertAtCaret(r),(!i.isPending||!l&&i.isFull())&&i.refreshState(),i.isSetup&&(o=i.$dropdown_content.find("[data-selectable]"),i.isPending||(n=i.getOption(e),u=i.getAdjacentOption(n,1).attr("data-value"),i.refreshOptions(i.isFocused&&"single"!==a),u&&i.setActiveOption(i.getOption(u))),!o.length||i.isFull()?i.close():i.positionDropdown(),i.updatePlaceholder(),i.trigger("item_add",e,r),i.updateOriginalInput({silent:t}))})},removeItem:function(e,t){var r=this,n,o,i;n="object"==typeof e?e:r.getItem(e),e=T(n.attr("data-value")),-1!==(o=r.items.indexOf(e))&&(n.remove(),n.hasClass("active")&&(i=r.$activeItems.indexOf(n[0]),r.$activeItems.splice(i,1)),r.items.splice(o,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(e)&&r.removeOption(e,t),o<r.caretPos&&r.setCaret(r.caretPos-1),r.refreshState(),r.updatePlaceholder(),r.updateOriginalInput({silent:t}),r.positionDropdown(),r.trigger("item_remove",e,n))},createItem:function(e,t){var r=this,n=r.caretPos;e=e||$.trim(r.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof t&&(t=!0),!r.canCreate(e))return o(),!1;r.lock();var i="function"==typeof r.settings.create?this.settings.create:function(e){var t={};return t[r.settings.labelField]=e,t[r.settings.valueField]=e,t},a=x(function(e){if(r.unlock(),!e||"object"!=typeof e)return o();var i=T(e[r.settings.valueField]);if("string"!=typeof i)return o();r.setTextboxValue(""),r.addOption(e),r.setCaret(n),r.addItem(i),r.refreshOptions(t&&"single"!==r.settings.mode),o(e)}),s=i.apply(this,[e,a]);return void 0!==s&&a(s),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",void 0)),t.refreshClasses()},refreshClasses:function(){var e=this,t=e.isFull(),r=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",r).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!$.isEmptyObject(e.options)).toggleClass("has-items",e.items.length>0),e.$control_input.data("grow",!t&&!r)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,r,n,o,i=this;if(e=e||{},1===i.tagType){for(n=[],t=0,r=i.items.length;t<r;t++)o=i.options[i.items[t]][i.settings.labelField]||"",n.push('<option value="'+P(i.items[t])+'" selected="selected">'+P(o)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),i.$input.html(n.join(""))}else i.$input.val(i.getValue()),i.$input.attr("value",i.$input.val());i.isSetup&&(e.silent||i.trigger("change",i.$input.val()))},updatePlaceholder:function(){if(!this.settings.placeholder)return;var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})},open:function(){var e=this;if(e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull())return;e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown)},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;if(!t.items.length)return;t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear")},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length);0===t?this.$control.prepend(e):$(this.$control[0].childNodes[t]).before(e),this.setCaret(t+1)},deleteSelection:function(e){var t,r,n,o,i,a,s,c,u,l=this;if(n=e&&8===e.keyCode?-1:1,o=I(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(s=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),i=[],l.$activeItems.length){for(u=l.$control.children(".active:"+(n>0?"last":"first")),a=l.$control.children(":not(input)").index(u),n>0&&a++,t=0,r=l.$activeItems.length;t<r;t++)i.push($(l.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(n<0&&0===o.start&&0===o.length?i.push(l.items[l.caretPos-1]):n>0&&o.start===l.$control_input.val().length&&i.push(l.items[l.caretPos]));if(!i.length||"function"==typeof l.settings.onDelete&&!1===l.settings.onDelete.apply(l,[i]))return!1;for(void 0!==a&&l.setCaret(a);i.length;)l.removeItem(i.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),s&&(c=l.getOption(s),c.length&&l.setActiveOption(c)),!0},advanceSelection:function(e,t){var r,n,o,i,a,s,c=this;if(0===e)return;c.rtl&&(e*=-1),r=e>0?"last":"first",n=I(c.$control_input[0]),c.isFocused&&!c.isInputHidden?(i=c.$control_input.val().length,(a=e<0?0===n.start&&0===n.length:n.start===i)&&!i&&c.advanceCaret(e,t)):(s=c.$control.children(".active:"+r),s.length&&(o=c.$control.children(":not(input)").index(s),c.setActiveItem(null),c.setCaret(e>0?o+1:o)))},advanceCaret:function(e,t){var r=this,n,o;if(0===e)return;n=e>0?"next":"prev",r.isShiftDown?(o=r.$control_input[n](),o.length&&(r.hideInput(),r.setActiveItem(o),t&&t.preventDefault())):r.setCaret(r.caretPos+e)},setCaret:function(e){var t=this;if(e="single"===t.settings.mode?t.items.length:Math.max(0,Math.min(t.items.length,e)),!t.isPending){var r,n,o,i,a;for(i=t.$control.children(":not(input)"),r=0,n=i.length;r<n;r++)a=$(i[r]).detach(),r<e?t.$control_input.before(a):t.$control.append(a)}t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,r=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(r.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:r.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),$(window).off(t),$(document).off(t),$(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var r,n,o,i="",a=!1,s=this,c=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;if("option"!==e&&"item"!==e||(r=T(t[s.settings.valueField]),a=!!r),a&&(O(s.renderCache[e])||(s.renderCache[e]={}),s.renderCache[e].hasOwnProperty(r)))return s.renderCache[e][r];return i=s.settings.render[e].apply(this,[t,P]),"option"!==e&&"option_create"!==e||(i=i.replace(c,"<$1 data-selectable")),"optgroup"===e&&(n=t[s.settings.optgroupValueField]||"",i=i.replace(c,'<$1 data-group="'+M(P(n))+'"')),"option"!==e&&"item"!==e||(i=i.replace(c,'<$1 data-value="'+M(P(r||""))+'"')),a&&(s.renderCache[e][r]=i),i},clearCache:function(e){var t=this;void 0===e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var r=t.settings.createFilter;return e.length&&("function"!=typeof r||r.apply(t,[e]))&&("string"!=typeof r||new RegExp(r).test(e))&&(!(r instanceof RegExp)||r.test(e))}}),z.count=0,z.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},$.fn.selectize=function(e){var t=$.fn.selectize.defaults,r=$.extend({},t,e),n=r.dataAttr,o=r.labelField,i=r.valueField,a=r.optgroupField,s=r.optgroupLabelField,c=r.optgroupValueField,u=function(e,t){var a,s,c,u,l=e.attr(n);if(l)for(t.options=JSON.parse(l),a=0,s=t.options.length;a<s;a++)t.items.push(t.options[a][i]);else{var p=$.trim(e.val()||"");if(!r.allowEmptyOption&&!p.length)return;for(c=p.split(r.delimiter),a=0,s=c.length;a<s;a++)u={},u[o]=c[a],u[i]=c[a],t.options.push(u);t.items=c}},l=function(e,t){var u,l,p,d,f=0,h=t.options,m={},g=function(e){var t=n&&e.attr(n);if("string"==typeof t&&t.length)return JSON.parse(t);return null},y=function(e,n){e=$(e);var s=T(e.attr("value"));if(!s&&!r.allowEmptyOption)return;if(m.hasOwnProperty(s)){if(n){var c=m[s][a];c?$.isArray(c)?c.push(n):m[s][a]=[c,n]:m[s][a]=n}return}var u=g(e)||{};u[o]=u[o]||e.text(),u[i]=u[i]||s,u[a]=u[a]||n,m[s]=u,h.push(u),e.is(":selected")&&t.items.push(s)},v=function(e){var r,n,o,i,a;for(e=$(e),o=e.attr("label"),o&&(i=g(e)||{},i[s]=o,i[c]=o,t.optgroups.push(i)),a=$("option",e),r=0,n=a.length;r<n;r++)y(a[r],o)};for(t.maxItems=e.attr("multiple")?null:1,d=e.children(),u=0,l=d.length;u<l;u++)p=d[u].tagName.toLowerCase(),"optgroup"===p?v(d[u]):"option"===p&&y(d[u])};return this.each(function(){if(this.selectize)return;var n,o=$(this),i=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||r.allowEmptyOption||(a=o.children('option[value=""]').text());var s={placeholder:a,options:[],optgroups:[],items:[]};"select"===i?l(o,s):u(o,s),n=new z(o,$.extend(!0,{},t,s,e))})},$.fn.selectize.defaults=z.defaults,$.fn.selectize.support={validity:S},z.define("drag_drop",function(e){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"!==this.settings.mode)return;var t=this;t.lock=function(){var e=t.lock;return function(){var r=t.$control.data("sortable");return r&&r.disable(),e.apply(t,arguments)}}(),t.unlock=function(){var e=t.unlock;return function(){var r=t.$control.data("sortable");return r&&r.enable(),e.apply(t,arguments)}}(),t.setup=function(){var e=t.setup;return function(){e.apply(this,arguments);var r=t.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:t.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),r.css({overflow:"visible"})},stop:function(){r.css({overflow:"hidden"});var e=t.$activeItems?t.$activeItems.slice():null,n=[];r.children("[data-value]").each(function(){n.push($(this).attr("data-value"))}),t.setValue(n),t.setActiveItem(e)}})}}()}),z.define("dropdown_header",function(e){var t=this;e=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},e),t.setup=function(){var r=t.setup;return function(){r.apply(t,arguments),t.$dropdown_header=$(e.html(e)),t.$dropdown.prepend(t.$dropdown_header)}}()}),z.define("optgroup_columns",function(e){var t=this;e=$.extend({equalizeWidth:!0,equalizeHeight:!0},e),this.getAdjacentOption=function(e,t){var r=e.closest("[data-group]").find("[data-selectable]"),n=r.index(e)+t;return n>=0&&n<r.length?r.eq(n):$()},this.onKeyDown=function(){var e=t.onKeyDown;return function(r){var n,o,i,a;if(this.isOpen&&(37===r.keyCode||39===r.keyCode))return t.ignoreHover=!0,a=this.$activeOption.closest("[data-group]"),n=a.find("[data-selectable]").index(this.$activeOption),a=37===r.keyCode?a.prev("[data-group]"):a.next("[data-group]"),i=a.find("[data-selectable]"),o=i.eq(Math.min(i.length-1,n)),void(o.length&&this.setActiveOption(o));return e.apply(this,arguments)}}();var r=function(){var e,t=r.width,n=document;return void 0===t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=r.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},n=function(){var n,o,i,a,s,c,u;if(u=$("[data-group]",t.$dropdown_content),!(o=u.length)||!t.$dropdown_content.width())return;if(e.equalizeHeight){for(i=0,n=0;n<o;n++)i=Math.max(i,u.eq(n).height());u.css({height:i})}e.equalizeWidth&&(c=t.$dropdown_content.innerWidth()-r(),a=Math.round(c/o),u.css({width:a}),o>1&&(s=c-a*(o-1),u.eq(o-1).css({width:s})))};(e.equalizeHeight||e.equalizeWidth)&&(A.after(this,"positionDropdown",n),A.after(this,"refreshOptions",n))}),z.define("remove_button",function(e){if("single"===this.settings.mode)return;e=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},e);var t=this,r='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+P(e.title)+'">'+e.label+"</a>",n=function(e,t){var r=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,r)+t+e.substring(r)};this.setup=function(){var o=t.setup;return function(){if(e.append){var i=t.settings.render.item;t.settings.render.item=function(e){return n(i.apply(this,arguments),r)}}o.apply(this,arguments),this.$control.on("click","."+e.className,function(e){if(e.preventDefault(),t.isLocked)return;var r=$(e.currentTarget).parent();t.setActiveItem(r),t.deleteSelection()&&t.setCaret(t.items.length)})}}()}),z.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var r=t.onKeyDown;return function(t){var n,o;if(8===t.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length)return o=this.options[this.items[n]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[o])),this.refreshOptions(!0)),void t.preventDefault();return r.apply(this,arguments)}}()}),z})}).call(exports,e(7))},549:function(module,exports,e){function universalModule(){function createClass(t,r,n,o){var i;if(o){var a=o.prototype;i=e.create(a)}else i=t.prototype;return e.keys(r).forEach(function(e){i[e]=r[e]}),e.keys(n).forEach(function(e){t[e]=n[e]}),i.constructor=t,t.prototype=i,t}function superCall(t,r,n,o){return e.getPrototypeOf(r)[n].apply(t,o)}function defaultSuperCall(e,t,r){superCall(e,t,"constructor",r)}function is(e,t){if(e===t)return 0!==e||0!==t||1/e==1/t;if(e!==e)return t!==t;if(e&&"function"==typeof e.equals)return e.equals(t);return!1}function invariant(e,t){if(!e)throw new Error(t)}function MakeRef(e){return e.value=!1,e}function SetRef(e){e&&(e.value=!0)}function OwnerID(){}function arrCopy(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function assertNotInfinite(e){invariant(e!==1/0,"Cannot perform this action with an infinite size.")}function ensureSize(e){return void 0===e.size&&(e.size=e.__iterate(returnTrue)),e.size}function wrapIndex(e,t){return t>=0?+t:ensureSize(e)+ +t}function returnTrue(){return!0}function wholeSlice(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function resolveBegin(e,t){return resolveIndex(e,t,0)}function resolveEnd(e,t){return resolveIndex(e,t,t)}function resolveIndex(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function hash(e){if(!e)return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if((0|e)===e)return e&p;e=""+e,t="string"}if("string"===t)return e.length>h?cachedHashString(e):hashString(e);if(e.hashCode)return hash("function"==typeof e.hashCode?e.hashCode():e.hashCode);return hashJSObj(e)}function cachedHashString(e){var t=y[e];return void 0===t&&(t=hashString(e),g===m&&(g=0,y={}),g++,y[e]=t),t}function hashString(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)&p;return t}function hashJSObj(e){var t=l&&l.get(e);if(t)return t;if(t=e[f])return t;if(!u){if(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[f])return t;if(t=getIENodeHash(e))return t}if(Object.isExtensible&&!Object.isExtensible(e))throw new Error("Non-extensible objects are not allowed as keys.");if(t=++d&p,l)l.set(e,t);else if(u)Object.defineProperty(e,f,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[f]=t;else{if(!e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[f]=t}return t}function getIENodeHash(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function iteratorValue(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function iteratorDone(){return{value:void 0,done:!0}}function hasIterator(e){return!!_iteratorFn(e)}function isIterator(e){return e&&"function"==typeof e.next}function getIterator(e){var t=_iteratorFn(e);return t&&t.call(e)}function _iteratorFn(e){var t=e&&(w&&e[w]||e[E]);if("function"==typeof t)return t}function isIterable(e){return!(!e||!e[A])}function isKeyed(e){return!(!e||!e[x])}function isIndexed(e){return!(!e||!e[k])}function isAssociative(e){return isKeyed(e)||isIndexed(e)}function isOrdered(e){return!(!e||!e[R])}function keyMapper(e,t){return t}function entryMapper(e,t){return[t,e]}function not(e){return function(){return!e.apply(this,arguments)}}function neg(e){return function(){return-e.apply(this,arguments)}}function quoteString(e){return"string"==typeof e?JSON.stringify(e):e}function defaultNegComparator(e,t){return e>t?-1:e<t?1:0}function deepEqual(e,t){var r=!isAssociative(e)&&!isAssociative(t);if(isOrdered(e)){if(!isOrdered(t))return!1;var n=e.entries();return t.every(function(e,t){var o=n.next().value;return o&&is(o[1],e)&&(r||is(o[0],t))})&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)e.cacheResult();else{o=!0;var _=e;e=t,t=_}var i=!0,s=t.__iterate(function(t,n){if(r?!e.has(t):o?!is(t,e.get(n,a)):!is(e.get(n,a),t))return i=!1,!1});return i&&e.size===s}function mixin(e,t){var r=e.prototype,n=function(e){r[e]=t[e]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function isSeq(e){return!(!e||!e[G])}function emptySequence(){return J||(J=new X([]))}function keyedSeqFromValue(e){var t=Array.isArray(e)?new X(e).fromEntrySeq():isIterator(e)?new Y(e).fromEntrySeq():hasIterator(e)?new K(e).fromEntrySeq():"object"==typeof e?new Q(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function indexedSeqFromValue(e){var t=maybeIndexedSeqFromValue(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function seqFromValue(e){var t=maybeIndexedSeqFromValue(e)||"object"==typeof e&&new Q(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function maybeIndexedSeqFromValue(e){return isArrayLike(e)?new X(e):isIterator(e)?new Y(e):hasIterator(e)?new K(e):void 0}function isArrayLike(e){return e&&"number"==typeof e.length}function seqIterate(e,t,r,n){assertNotInfinite(e.size);var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[r?i-a:a];if(!1===t(s[1],n?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,r)}function seqIterator(e,t,r,n){var o=e._cache;if(o){var i=o.length-1,a=0;return new O(function(){var e=o[r?i-a:a];return a++>i?iteratorDone():iteratorValue(t,n?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,r)}function fromJS(e,t){return t?_fromJSWith(t,e,"",{"":e}):_fromJSDefault(e)}function _fromJSWith(e,t,r,n){if(Array.isArray(t))return e.call(n,r,U(t).map(function(r,n){return _fromJSWith(e,r,n,t)}));if(isPlainObj(t))return e.call(n,r,F(t).map(function(r,n){return _fromJSWith(e,r,n,t)}));return t}function _fromJSDefault(e){if(Array.isArray(e))return U(e).map(_fromJSDefault).toList();if(isPlainObj(e))return F(e).map(_fromJSDefault).toMap();return e}function isPlainObj(e){return e&&e.constructor===Object}function isMap(e){return!(!e||!e[se])}function mapIteratorValue(e,t){return iteratorValue(e,t[0],t[1])}function mapIteratorFrame(e,t){return{node:e,index:0,__prev:t}}function makeMap(e,t,r,n){var o=Object.create(ce);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function emptyMap(){return Ce||(Ce=makeMap(0))}function updateMap(e,t,r){var n,o;if(e._root){var i=MakeRef(s),u=MakeRef(c);if(n=updateNode(e._root,e.__ownerID,0,void 0,t,r,i,u),!u.value)return e;o=e.size+(i.value?r===a?-1:1:0)}else{if(r===a)return e;o=1,n=new ue(e.__ownerID,[[t,r]])}if(e.__ownerID)return e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e;return n?makeMap(o,n):emptyMap()}function updateNode(e,t,r,n,o,i,s,c){if(!e){if(i===a)return e;return SetRef(c),SetRef(s),new ye(t,n,[o,i])}return e.update(t,r,n,o,i,s,c)}function isLeafNode(e){return e.constructor===ye||e.constructor===me}function mergeIntoNode(e,t,r,o,a){if(e.keyHash===o)return new me(t,o,[e.entry,a]);var s=(0===r?e.keyHash:e.keyHash>>>r)&i,c=(0===r?o:o>>>r)&i,u,l=s===c?[mergeIntoNode(e,t,r+n,o,a)]:(u=new ye(t,o,a),s<c?[e,u]:[u,e]);return new pe(t,1<<s|1<<c,l)}function createNodes(e,t,r,n){e||(e=new OwnerID);for(var o=new ye(e,hash(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}function packNodes(e,t,r,n){for(var o=0,i=0,a=new Array(r),s=0,c=1,u=t.length;s<u;s++,c<<=1){var l=t[s];void 0!==l&&s!==n&&(o|=c,a[i++]=l)}return new pe(e,o,a)}function expandNodes(e,t,r,n,i){for(var a=0,s=new Array(o),c=0;0!==r;c++,r>>>=1)s[c]=1&r?t[a++]:void 0;return s[n]=i,new fe(e,a+1,s)}function mergeIntoMapWith(e,t,r){for(var n=[],o=0;o<r.length;o++){var i=r[o],a=I(i);isIterable(i)||(a=a.map(function(e){return fromJS(e)})),n.push(a)}return mergeIntoCollectionWith(e,t,n)}function deepMerger(e){return function(t,r){return t&&t.mergeDeepWith&&isIterable(r)?t.mergeDeepWith(e,r):e?e(t,r):r}}function mergeIntoCollectionWith(e,t,r){if(0===r.length)return e;return e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,a,function(e){return e===a?r:t(e,r)})}:function(t,r){e.set(r,t)},o=0;o<r.length;o++)r[o].forEach(n)})}function updateInDeepMap(e,t,r,n,o){invariant(!e||e.set,"updateIn with invalid keyPath");var i=t[o],s=e?e.get(i,a):a,c=s===a?void 0:s,u=o===t.length-1?n(s===a?r:s):updateInDeepMap(c,t,r,n,o+1);return u===c?e:u===a?e&&e.remove(i):(e||emptyMap()).set(i,u)}function popCount(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function setIn(e,t,r,n){var o=n?e:arrCopy(e);return o[t]=r,o}function spliceIn(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,s=0;s<o;s++)s===t?(i[s]=r,a=-1):i[s]=e[s+a];return i}function spliceOut(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}function flipFactory(e){var t=makeSequence(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.contains(t)},t.contains=function(t){return e.has(t)},t.cacheResult=cacheResultThrough,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===C){var n=e.__iterator(t,r);return new O(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===b?v:b,r)},t}function mapFactory(e,t,r){var n=makeSequence(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,a);return i===a?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate(function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)},o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(C,o);return new O(function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return iteratorValue(n,s,t.call(r,a[1],s,e),o)})},n}function reverseFactory(e,t){var r=makeSequence(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=flipFactory(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.contains=function(t){return e.contains(t)},r.cacheResult=cacheResultThrough,r.__iterate=function(t,r){var n=this;return e.__iterate(function(e,r){return t(e,r,n)},!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function filterFactory(e,t,r,n){var o=makeSequence(e);return n&&(o.has=function(n){var o=e.get(n,a);return o!==a&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,a);return i!==a&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return e.__iterate(function(e,i,c){if(t.call(r,e,i,c))return s++,o(e,n?i:s-1,a)},i),s},o.__iteratorUncached=function(o,i){var a=e.__iterator(C,i),s=0;return new O(function(){for(;;){var i=a.next();if(i.done)return i;var c=i.value,u=c[0],l=c[1];if(t.call(r,l,u,e))return iteratorValue(o,n?u:s++,l,i)}})},o}function countByFactory(e,t,r){var n=ae().asMutable();return e.__iterate(function(o,i){n.update(t.call(r,o,i,e),0,function(e){return e+1})}),n.asImmutable()}function groupByFactory(e,t,r){var n=isKeyed(e),o=ae().asMutable();e.__iterate(function(i,a){o.update(t.call(r,i,a,e),[],function(e){return e.push(n?[a,i]:i),e})});var i=iterableClass(e);return o.map(function(t){return reify(e,i(t))})}function takeFactory(e,t){if(t>e.size)return e;t<0&&(t=0);var r=makeSequence(e);return r.size=e.size&&Math.min(e.size,t),r.__iterateUncached=function(r,n){var o=this;if(0===t)return 0;if(n)return this.cacheResult().__iterate(r,n);var i=0;return e.__iterate(function(e,n){return++i&&!1!==r(e,n,o)&&i<t}),i},r.__iteratorUncached=function(r,n){if(n)return this.cacheResult().__iterator(r,n);var o=t&&e.__iterator(r,n),i=0;return new O(function(){if(i++>t)return iteratorDone();return o.next()})},r}function takeWhileFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate(function(e,o,s){return t.call(r,e,o,s)&&++a&&n(e,o,i)}),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(C,o),s=!0;return new O(function(){if(!s)return iteratorDone();var e=a.next();if(e.done)return e;var o=e.value,c=o[0],u=o[1];if(!t.call(r,u,c,i))return s=!1,iteratorDone();return n===C?e:iteratorValue(n,c,u,e)})},n}function skipFactory(e,t,r){if(t<=0)return e;var n=makeSequence(e);return n.size=e.size&&Math.max(0,e.size-t),n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0,s=!0,c=0;return e.__iterate(function(e,o){if(!s||!(s=a++<t))return c++,n(e,r?o:c-1,i)}),c},n.__iteratorUncached=function(n,o){if(o)return this.cacheResult().__iterator(n,o);var i=t&&e.__iterator(n,o),a=0,s=0;return new O(function(){for(;a<t;)a++,i.next();var e=i.next();return r||n===b?e:n===v?iteratorValue(n,s++,void 0,e):iteratorValue(n,s++,e.value[1],e)})},n}function skipWhileFactory(e,t,r,n){var o=makeSequence(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,c=0;return e.__iterate(function(e,i,u){if(!s||!(s=t.call(r,e,i,u)))return c++,o(e,n?i:c-1,a)}),c},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=e.__iterator(C,i),c=!0,u=0;return new O(function(){var e,i,l;do{if(e=s.next(),e.done)return n||o===b?e:o===v?iteratorValue(o,u++,void 0,e):iteratorValue(o,u++,e.value[1],e);var p=e.value;i=p[0],l=p[1],c&&(c=t.call(r,l,i,a))}while(c);return o===C?e:iteratorValue(o,i,l,e)})},o}function concatFactory(e,t){var r=isKeyed(e),n=new X([e].concat(t)).map(function(e){return isIterable(e)?r&&(e=I(e)):e=r?keyedSeqFromValue(e):indexedSeqFromValue(Array.isArray(e)?e:[e]),e});r?n=n.toKeyedSeq():isIndexed(e)||(n=n.toSetSeq());var o=n.flatten(!0);return o.size=n.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),o}function flattenFactory(e,t,r){var n=makeSequence(e);return n.__iterateUncached=function(n,o){function flatDeep(e,s){var c=this;e.__iterate(function(e,o){return(!t||s<t)&&isIterable(e)?flatDeep(e,s+1):!1===n(e,r?o:i++,c)&&(a=!0),!a},o)}var i=0,a=!1;return flatDeep(e,0),i},n.__iteratorUncached=function(n,o){var i=e.__iterator(n,o),a=[],s=0;return new O(function(){for(;i;){var e=i.next();if(!1!==e.done){i=a.pop();continue}var c=e.value;if(n===C&&(c=c[1]),t&&!(a.length<t)||!isIterable(c))return r?e:iteratorValue(n,s++,c,e);a.push(i),i=c.__iterator(n,o)}return iteratorDone()})},n}function flatMapFactory(e,t,r){var n=iterableClass(e);return e.toSeq().map(function(o,i){return n(t.call(r,o,i,e))}).flatten(!0)}function interposeFactory(e,t){var r=makeSequence(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate(function(e,n){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)},n),i},r.__iteratorUncached=function(r,n){var o=e.__iterator(b,n),i=0,a;return new O(function(){if((!a||i%2)&&(a=o.next(),a.done))return a;return i%2?iteratorValue(r,i++,t):iteratorValue(r,i++,a.value,a)})},r}function sortFactory(e,t,r){t||(t=defaultComparator);var n=isKeyed(e),o=0,i=e.toSeq().map(function(t,n){return[n,t,o++,r?r(t,n,e):t]}).toArray();return i.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?F(i):isIndexed(e)?U(i):H(i)}function maxFactory(e,t,r){if(t||(t=defaultComparator),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return t(r[1],e[1])>0?r:e});return n&&n[0]}return e.reduce(function(e,r){return t(r,e)>0?r:e})}function reify(e,t){return isSeq(e)?t:e.constructor(t)}function validateEntry(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function resolveSize(e){return assertNotInfinite(e.size),ensureSize(e)}function iterableClass(e){return isKeyed(e)?I:isIndexed(e)?L:j}function makeSequence(e){return Object.create((isKeyed(e)?F:isIndexed(e)?U:H).prototype)}function cacheResultThrough(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):z.prototype.cacheResult.call(this)}function defaultComparator(e,t){return e>t?1:e<t?-1:0}function isList(e){return!(!e||!e[Ae])}function iterateVNode(e,t,r,a,s,c){var u,l=e&&e.array;if(0===t){var p=r<0?-r:0,d=a-r;for(d>o&&(d=o),u=p;u<d;u++)if(!1===s(l&&l[c?p+d-1-u:u]))return!1}else{var f=1<<t,h=t-n;for(u=0;u<=i;u++){var m=c?i-u:u,g=r+(m<<t);if(g<a&&g+f>0){if(!iterateVNode(l&&l[m],h,g,a,s,c))return!1}}}return!0}function listIteratorFrame(e,t,r,n,o){return{array:e,level:t,offset:r,max:n,rawMax:n-r>>t,index:0,__prev:o}}function makeList(e,t,r,n,o,i,a){var s=Object.create(xe);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function emptyList(){return Ie||(Ie=makeList(0,0,n))}function updateList(e,t,r){if((t=wrapIndex(e,t))>=e.size||t<0)return e.withMutations(function(e){t<0?setListBounds(e,t).set(0,r):setListBounds(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,o=e._root,i=MakeRef(c);if(t>=getTailOffset(e._capacity)?n=updateVNode(n,e.__ownerID,0,t,r,i):o=updateVNode(o,e.__ownerID,e._level,t,r,i),!i.value)return e;if(e.__ownerID)return e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e;return makeList(e._origin,e._capacity,e._level,o,n)}function updateVNode(e,t,r,o,a,s){var c=o>>>r&i,u=e&&c<e.array.length;if(!u&&void 0===a)return e;var l;if(r>0){var p=e&&e.array[c],d=updateVNode(p,t,r-n,o,a,s);if(d===p)return e;return l=editableVNode(e,t),l.array[c]=d,l}if(u&&e.array[c]===a)return e;return SetRef(s),l=editableVNode(e,t),void 0===a&&c===l.array.length-1?l.array.pop():l.array[c]=a,l}function editableVNode(e,t){if(t&&e&&t===e.ownerID)return e;return new ke(e?e.array.slice():[],t)}function listNodeFor(e,t){if(t>=getTailOffset(e._capacity))return e._tail;if(t<1<<e._level+n){for(var r=e._root,o=e._level;r&&o>0;)r=r.array[t>>>o&i],o-=n;return r}}function setListBounds(e,t,r){var o=e.__ownerID||new OwnerID,a=e._origin,s=e._capacity,c=a+t,u=void 0===r?s:r<0?s+r:a+r;if(c===a&&u===s)return e;if(c>=u)return e.clear();for(var l=e._level,p=e._root,d=0;c+d<0;)p=new ke(p&&p.array.length?[void 0,p]:[],o),l+=n,d+=1<<l;d&&(c+=d,a+=d,u+=d,s+=d);for(var f=getTailOffset(s),h=getTailOffset(u);h>=1<<l+n;)p=new ke(p&&p.array.length?[p]:[],o),l+=n;var m=e._tail,g=h<f?listNodeFor(e,u-1):h>f?new ke([],o):m;if(m&&h>f&&c<s&&m.array.length){p=editableVNode(p,o);for(var y=p,v=l;v>n;v-=n){var b=f>>>v&i;y=y.array[b]=editableVNode(y.array[b],o)}y.array[f>>>n&i]=m}if(u<s&&(g=g&&g.removeAfter(o,0,u)),c>=h)c-=h,u-=h,l=n,p=null,g=g&&g.removeBefore(o,0,c);else if(c>a||h<f){for(d=0;p;){var C=c>>>l&i;if(C!==h>>>l&i)break;C&&(d+=(1<<l)*C),l-=n,p=p.array[C]}p&&c>a&&(p=p.removeBefore(o,l,c-d)),p&&h<f&&(p=p.removeAfter(o,l,h-d)),d&&(c-=d,u-=d)}if(e.__ownerID)return e.size=u-c,e._origin=c,e._capacity=u,e._level=l,e._root=p,e._tail=g,e.__hash=void 0,e.__altered=!0,e;return makeList(c,u,l,p,g)}function mergeIntoListWith(e,t,r){for(var n=[],o=0,i=0;i<r.length;i++){var a=r[i],s=L(a);s.size>o&&(o=s.size),isIterable(a)||(s=s.map(function(e){return fromJS(e)})),n.push(s)}return o>e.size&&(e=e.setSize(o)),mergeIntoCollectionWith(e,t,n)}function getTailOffset(e){return e<o?0:e-1>>>n<<n}function isOrderedMap(e){return isMap(e)&&isOrdered(e)}function makeOrderedMap(e,t,r,n){var o=Object.create(De.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o}function emptyOrderedMap(){return Le||(Le=makeOrderedMap(emptyMap(),emptyList()))}function updateOrderedMap(e,t,r){var n=e._map,i=e._list,s=n.get(t),c=void 0!==s,u,l;if(r===a){if(!c)return e;i.size>=o&&i.size>=2*n.size?(l=i.filter(function(e,t){return void 0!==e&&s!==t}),u=l.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(u.__ownerID=l.__ownerID=e.__ownerID)):(u=n.remove(t),l=s===i.size-1?i.pop():i.set(s,void 0))}else if(c){if(r===i.get(s)[1])return e;u=n,l=i.set(s,[t,r])}else u=n.set(t,i.size),l=i.set(i.size,[t,r]);if(e.__ownerID)return e.size=u.size,e._map=u,e._list=l,e.__hash=void 0,e;return makeOrderedMap(u,l)}function isStack(e){return!(!e||!e[qe])}function makeStack(e,t,r,n){var o=Object.create(Fe);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function emptyStack(){return Be||(Be=makeStack(0))}function isSet(e){return!(!e||!e[We])}function updateSet(e,t){if(e.__ownerID)return e.size=t.size,e._map=t,e;return t===e._map?e:0===t.size?e.__empty():e.__make(t)}function makeSet(e,t){var r=Object.create(He);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptySet(){return Ve||(Ve=makeSet(emptyMap()))}function isOrderedSet(e){return isSet(e)&&isOrdered(e)}function makeOrderedSet(e,t){var r=Object.create($e);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function emptyOrderedSet(){return Xe||(Xe=makeOrderedSet(emptyOrderedMap()))}function makeRecord(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function recordName(e){return e._name||e.constructor.name}var e=Object,t={};t.createClass=createClass,t.superCall=superCall,t.defaultSuperCall=defaultSuperCall;var r="delete",n=5,o=1<<n,i=o-1,a={},s={value:!1},c={value:!1},u=function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}(),l="function"==typeof WeakMap&&new WeakMap,p=2147483647,d=0,f="__immutablehash__";"function"==typeof Symbol&&(f=Symbol(f));var h=16,m=255,g=0,y={},v=0,b=1,C=2,E="@@iterator",w="function"==typeof Symbol&&Symbol.iterator,S=w||E,O=function Iterator(e){this.next=e};t.createClass(O,{toString:function(){return"[Iterator]"}},{}),O.KEYS=v,O.VALUES=b,O.ENTRIES=C;var T=O.prototype;T.inspect=T.toSource=function(){return this.toString()},T[S]=function(){return this};var P=function Iterable(e){return isIterable(e)?e:z(e)},M=P;t.createClass(P,{toArray:function(){assertNotInfinite(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t}),e},toIndexedSeq:function(){return new Oe(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toKeyedSeq:function(){return new Se(this,!0)},toMap:function(){return assertNotInfinite(this.size),ae(this.toKeyedSeq())},toObject:function(){assertNotInfinite(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e},toOrderedMap:function(){return assertNotInfinite(this.size),De(this.toKeyedSeq())},toOrderedSet:function(){return assertNotInfinite(this.size),Ge(isKeyed(this)?this.valueSeq():this)},toSet:function(){return assertNotInfinite(this.size),Ue(isKeyed(this)?this.valueSeq():this)},toSetSeq:function(){return new Te(this)},toSeq:function(){return isIndexed(this)?this.toIndexedSeq():isKeyed(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return assertNotInfinite(this.size),je(isKeyed(this)?this.valueSeq():this)},toList:function(){return assertNotInfinite(this.size),Me(isKeyed(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){if(0===this.size)return e+t;return e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return reify(this,concatFactory(this,e))},contains:function(e){return this.some(function(t){return is(t,e)})},entries:function(){return this.__iterator(C)},every:function(e,t){var r=!0;return this.__iterate(function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1}),r},filter:function(e,t){return reify(this,filterFactory(this,e,t,!0))},find:function(e,t,r){var n=r;return this.__iterate(function(r,o,i){if(e.call(t,r,o,i))return n=r,!1}),n},forEach:function(e,t){return this.__iterate(t?e.bind(t):e)},join:function(e){e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!==n&&void 0!==n?n:""}),t},keys:function(){return this.__iterator(v)},map:function(e,t){return reify(this,mapFactory(this,e,t))},reduce:function(e,t,r){var n,o;return arguments.length<2?o=!0:n=t,this.__iterate(function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)}),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return reify(this,reverseFactory(this,!0))},slice:function(e,t){if(wholeSlice(e,t,this.size))return this;var r=resolveBegin(e,this.size),n=resolveEnd(t,this.size);if(r!==r||n!==n)return this.toSeq().cacheResult().slice(e,t);var o=0===r?this:this.skip(r);return reify(this,void 0===n||n===this.size?o:o.take(n-r))},some:function(e,t){return!this.every(not(e),t)},sort:function(e){return reify(this,sortFactory(this,e))},values:function(){return this.__iterator(b)},butLast:function(){return this.slice(0,-1)},count:function(e,t){return ensureSize(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return countByFactory(this,e,t)},equals:function(e){if(this===e)return!0;if(!e||"function"!=typeof e.equals)return!1;if(void 0!==this.size&&void 0!==e.size){if(this.size!==e.size)return!1;if(0===this.size&&0===e.size)return!0}if(void 0!==this.__hash&&void 0!==e.__hash&&this.__hash!==e.__hash)return!1;return this.__deepEquals(e)},__deepEquals:function(e){return deepEqual(this,e)},entrySeq:function(){var e=this;if(e._cache)return new X(e._cache);var t=e.toSeq().map(entryMapper).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(not(e),t)},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},first:function(){return this.find(returnTrue)},flatMap:function(e,t){return reify(this,flatMapFactory(this,e,t))},flatten:function(e){return reify(this,flattenFactory(this,e,!0))},fromEntrySeq:function(){return new Pe(this)},get:function(e,t){return this.find(function(_,t){return is(t,e)},void 0,t)},getIn:function(e,t){var r=this;if(e)for(var n=0;n<e.length;n++)if((r=r&&r.get?r.get(e[n],a):a)===a)return t;return r},groupBy:function(e,t){return groupByFactory(this,e,t)},has:function(e){return this.get(e,a)!==a},isSubset:function(e){return e="function"==typeof e.contains?e:M(e),this.every(function(t){return e.contains(t)})},isSuperset:function(e){return e.isSubset(this)},keySeq:function(){return this.toSeq().map(keyMapper).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(e){return maxFactory(this,e)},maxBy:function(e,t){return maxFactory(this,t,e)},min:function(e){return maxFactory(this,e?neg(e):defaultNegComparator)},minBy:function(e,t){return maxFactory(this,t?neg(t):defaultNegComparator,e)},rest:function(){return this.slice(1)},skip:function(e){return reify(this,skipFactory(this,e,!0))},skipLast:function(e){return reify(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(not(e),t)},sortBy:function(e,t){return reify(this,sortFactory(this,t,e))},take:function(e){return reify(this,takeFactory(this,e))},takeLast:function(e){return reify(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return reify(this,takeWhileFactory(this,e,t))},takeUntil:function(e,t){return this.takeWhile(not(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=this.size===1/0?0:this.reduce(function(e,t,r){return e+(hash(t)^(t===r?0:hash(r)))&p},0))}},{});var A="@@__IMMUTABLE_ITERABLE__@@",x="@@__IMMUTABLE_KEYED__@@",k="@@__IMMUTABLE_INDEXED__@@",R="@@__IMMUTABLE_ORDERED__@@",N=P.prototype;N[A]=!0,N[S]=N.values,N.toJSON=N.toJS,N.__toJS=N.toArray,N.__toStringMapper=quoteString,N.inspect=N.toSource=function(){return this.toString()},N.chain=N.flatMap,function(){try{Object.defineProperty(N,"length",{get:function(){if(!P.noLengthWarning){var e;try{throw new Error}catch(t){e=t.stack}if(-1===e.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+e),this.size}}})}catch(e){}}();var I=function KeyedIterable(e){return isKeyed(e)?e:F(e)};t.createClass(I,{flip:function(){return reify(this,flipFactory(this))},findKey:function(e,t){var r;return this.__iterate(function(n,o,i){if(e.call(t,n,o,i))return r=o,!1}),r},findLastKey:function(e,t){return this.toSeq().reverse().findKey(e,t)},keyOf:function(e){return this.findKey(function(t){return is(t,e)})},lastKeyOf:function(e){return this.toSeq().reverse().keyOf(e)},mapEntries:function(e,t){var r=this,n=0;return reify(this,this.toSeq().map(function(o,i){return e.call(t,[i,o],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return reify(this,this.toSeq().flip().map(function(n,o){return e.call(t,n,o,r)}).flip())}},{},P);var D=I.prototype;D[x]=!0,D[S]=N.entries,D.__toJS=N.toObject,D.__toStringMapper=function(e,t){return t+": "+quoteString(e)};var L=function IndexedIterable(e){return isIndexed(e)?e:U(e)};t.createClass(L,{toKeyedSeq:function(){return new Se(this,!1)},filter:function(e,t){return reify(this,filterFactory(this,e,t,!1))},findIndex:function(e,t){var r=this.toKeyedSeq().findKey(e,t);return void 0===r?-1:r},indexOf:function(e){var t=this.toKeyedSeq().keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.toKeyedSeq().lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return reify(this,reverseFactory(this,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=resolveBegin(e,this.size);var n=this.slice(0,e);return reify(this,1===r?n:n.concat(arrCopy(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.toKeyedSeq().findLastKey(e,t);return void 0===r?-1:r},first:function(){return this.get(0)},flatten:function(e){return reify(this,flattenFactory(this,e,!1))},get:function(e,t){return e=wrapIndex(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(_,t){return t===e},void 0,t)},has:function(e){return(e=wrapIndex(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return reify(this,interposeFactory(this,e))},last:function(){return this.get(-1)},skip:function(e){var t=this,r=skipFactory(t,e,!1);return isSeq(t)&&r!==t&&(r.get=function(r,n){return r=wrapIndex(this,r),r>=0?t.get(r+e,n):n}),reify(this,r)},skipWhile:function(e,t){return reify(this,skipWhileFactory(this,e,t,!1))},take:function(e){var t=this,r=takeFactory(t,e);return isSeq(t)&&r!==t&&(r.get=function(r,n){return r=wrapIndex(this,r),r>=0&&r<e?t.get(r,n):n}),reify(this,r)}},{},P),L.prototype[k]=!0,L.prototype[R]=!0;var j=function SetIterable(e){return isIterable(e)&&!isAssociative(e)?e:H(e)};t.createClass(j,{get:function(e,t){return this.has(e)?e:t},contains:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}},{},P),j.prototype.has=N.contains,P.isIterable=isIterable,P.isKeyed=isKeyed,P.isIndexed=isIndexed,P.isAssociative=isAssociative,P.isOrdered=isOrdered,P.Keyed=I,P.Indexed=L,P.Set=j,P.Iterator=O;var z=function Seq(e){return null===e||void 0===e?emptySequence():isIterable(e)?e.toSeq():seqFromValue(e)},q=z;t.createClass(z,{toSeq:function(){return this},toString:function(){return this.__toString("Seq {","}")},cacheResult:function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},__iterate:function(e,t){return seqIterate(this,e,t,!0)},__iterator:function(e,t){return seqIterator(this,e,t,!0)}},{of:function(){return q(arguments)}},P);var F=function KeyedSeq(e){return null===e||void 0===e?emptySequence().toKeyedSeq():isIterable(e)?isKeyed(e)?e.toSeq():e.fromEntrySeq():keyedSeqFromValue(e)},B=F;t.createClass(F,{toKeyedSeq:function(){return this},toSeq:function(){return this}},{of:function(){return B(arguments)}},z),mixin(F,I.prototype);var U=function IndexedSeq(e){return null===e||void 0===e?emptySequence():isIterable(e)?isKeyed(e)?e.entrySeq():e.toIndexedSeq():indexedSeqFromValue(e)},W=U;t.createClass(U,{toIndexedSeq:function(){return this},toString:function(){return this.__toString("Seq [","]")},__iterate:function(e,t){return seqIterate(this,e,t,!1)},__iterator:function(e,t){return seqIterator(this,e,t,!1)}},{of:function(){return W(arguments)}},z),mixin(U,L.prototype);var H=function SetSeq(e){return(null===e||void 0===e?emptySequence():isIterable(e)?isKeyed(e)?e.entrySeq():e:indexedSeqFromValue(e)).toSetSeq()},V=H;t.createClass(H,{toSetSeq:function(){return this}},{of:function(){return V(arguments)}},z),mixin(H,j.prototype),z.isSeq=isSeq,z.Keyed=F,z.Set=H,z.Indexed=U;var G="@@__IMMUTABLE_SEQ__@@";z.prototype[G]=!0;var X=function ArraySeq(e){this._array=e,this.size=e.length};t.createClass(X,{get:function(e,t){return this.has(e)?this._array[wrapIndex(this,e)]:t},__iterate:function(e,t){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===e(r[t?n-o:o],o,this))return o+1;return o},__iterator:function(e,t){var r=this._array,n=r.length-1,o=0;return new O(function(){return o>n?iteratorDone():iteratorValue(e,o,r[t?n-o++:o++])})}},{},U);var Q=function ObjectSeq(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length};t.createClass(Q,{get:function(e,t){if(void 0!==t&&!this.has(e))return t;return this._object[e]},has:function(e){return this._object.hasOwnProperty(e)},__iterate:function(e,t){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[t?o-i:i];if(!1===e(r[a],a,this))return i+1}return i},__iterator:function(e,t){var r=this._object,n=this._keys,o=n.length-1,i=0;return new O(function(){var a=n[t?o-i:i];return i++>o?iteratorDone():iteratorValue(e,a,r[a])})}},{},F),Q.prototype[R]=!0;var K=function IterableSeq(e){this._iterable=e,this.size=e.length||e.size};t.createClass(K,{__iterateUncached:function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=this._iterable,n=getIterator(r),o=0;if(isIterator(n))for(var i;!(i=n.next()).done&&!1!==e(i.value,o++,this););return o},__iteratorUncached:function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterable,n=getIterator(r);if(!isIterator(n))return new O(iteratorDone);var o=0;return new O(function(){var t=n.next();return t.done?t:iteratorValue(e,o++,t.value)})}},{},U);var Y=function IteratorSeq(e){this._iterator=e,this._iteratorCache=[]};t.createClass(Y,{__iterateUncached:function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r=this._iterator,n=this._iteratorCache,o=0;o<n.length;)if(!1===e(n[o],o++,this))return o;for(var i;!(i=r.next()).done;){var a=i.value;if(n[o]=a,!1===e(a,o++,this))break}return o},__iteratorUncached:function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,o=0;return new O(function(){if(o>=n.length){var t=r.next();if(t.done)return t;n[o]=t.value}return iteratorValue(e,o,n[o++])})}},{},U);var J,Z=function Collection(){throw TypeError("Abstract")};t.createClass(Z,{},{},P);var ee=function KeyedCollection(){t.defaultSuperCall(this,te.prototype,arguments)},te=ee;t.createClass(ee,{},{},Z),mixin(ee,I.prototype);var re=function IndexedCollection(){t.defaultSuperCall(this,ne.prototype,arguments)},ne=re;t.createClass(re,{},{},Z),mixin(re,L.prototype);var oe=function SetCollection(){t.defaultSuperCall(this,ie.prototype,arguments)},ie=oe;t.createClass(oe,{},{},Z),mixin(oe,j.prototype),Z.Keyed=ee,Z.Indexed=re,Z.Set=oe;var ae=function Map(e){return null===e||void 0===e?emptyMap():isMap(e)?e:emptyMap().merge(I(e))};t.createClass(ae,{toString:function(){return this.__toString("Map {","}")},get:function(e,t){return this._root?this._root.get(0,void 0,e,t):t},set:function(e,t){return updateMap(this,e,t)},setIn:function(e,t){return invariant(e.length>0,"Requires non-empty key path."),this.updateIn(e,function(){return t})},remove:function(e){return updateMap(this,e,a)},removeIn:function(e){return invariant(e.length>0,"Requires non-empty key path."),this.updateIn(e,function(){return a})},update:function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},updateIn:function(e,t,r){return r||(r=t,t=void 0),0===e.length?r(this):updateInDeepMap(this,e,t,r,0)},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this;return emptyMap()},merge:function(){return mergeIntoMapWith(this,void 0,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoMapWith(this,e,t)},mergeDeep:function(){return mergeIntoMapWith(this,deepMerger(void 0),arguments)},mergeDeepWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoMapWith(this,deepMerger(e),t)},sort:function(e){return De(sortFactory(this,e))},sortBy:function(e,t){return De(sortFactory(this,t,e))},withMutations:function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},asMutable:function(){return this.__ownerID?this:this.__ensureOwner(new OwnerID)},asImmutable:function(){return this.__ensureOwner()},wasAltered:function(){return this.__altered},__iterator:function(e,t){return new be(this,e,t)},__iterate:function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this.__altered=!1,this;return makeMap(this.size,this._root,e,this.__hash)}},{},ee),ae.isMap=isMap;var se="@@__IMMUTABLE_MAP__@@",ce=ae.prototype;ce[se]=!0,ce.delete=ce.remove;var ue=function ArrayMapNode(e,t){this.ownerID=e,this.entries=t},le=ue;t.createClass(ue,{get:function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(is(r,o[i][0]))return o[i][1];return n},update:function(e,t,r,n,o,i,s){for(var c=o===a,u=this.entries,l=0,p=u.length;l<p&&!is(n,u[l][0]);l++);var d=l<p;if(d?u[l][1]===o:c)return this;if(SetRef(s),(c||!d)&&SetRef(i),c&&1===u.length)return;if(!d&&!c&&u.length>=_e)return createNodes(e,u,n,o);var f=e&&e===this.ownerID,h=f?u:arrCopy(u);if(d?c?l===p-1?h.pop():h[l]=h.pop():h[l]=[n,o]:h.push([n,o]),f)return this.entries=h,this;return new le(e,h)}},{});var pe=function BitmapIndexedNode(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r},de=pe;t.createClass(pe,{get:function(e,t,r,o){void 0===t&&(t=hash(r));var a=1<<((0===e?t:t>>>e)&i),s=this.bitmap;return 0==(s&a)?o:this.nodes[popCount(s&a-1)].get(e+n,t,r,o)},update:function(e,t,r,o,s,c,u){void 0===r&&(r=hash(o));var l=(0===t?r:r>>>t)&i,p=1<<l,d=this.bitmap,f=0!=(d&p);if(!f&&s===a)return this;var h=popCount(d&p-1),m=this.nodes,g=f?m[h]:void 0,y=updateNode(g,e,t+n,r,o,s,c,u);if(y===g)return this;if(!f&&y&&m.length>=Ee)return expandNodes(e,m,d,l,y);if(f&&!y&&2===m.length&&isLeafNode(m[1^h]))return m[1^h];if(f&&y&&1===m.length&&isLeafNode(y))return y;var v=e&&e===this.ownerID,b=f?y?d:d^p:d|p,C=f?y?setIn(m,h,y,v):spliceOut(m,h,v):spliceIn(m,h,y,v);if(v)return this.bitmap=b,this.nodes=C,this;return new de(e,b,C)}},{});var fe=function HashArrayMapNode(e,t,r){this.ownerID=e,this.count=t,this.nodes=r},he=fe;t.createClass(fe,{get:function(e,t,r,o){void 0===t&&(t=hash(r));var a=(0===e?t:t>>>e)&i,s=this.nodes[a];return s?s.get(e+n,t,r,o):o},update:function(e,t,r,o,s,c,u){void 0===r&&(r=hash(o));var l=(0===t?r:r>>>t)&i,p=s===a,d=this.nodes,f=d[l];if(p&&!f)return this;var h=updateNode(f,e,t+n,r,o,s,c,u);if(h===f)return this;var m=this.count;if(f){if(!h&&--m<we)return packNodes(e,d,m,l)}else m++;var g=e&&e===this.ownerID,y=setIn(d,l,h,g);if(g)return this.count=m,this.nodes=y,this;return new he(e,m,y)}},{});var me=function HashCollisionNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r},ge=me;t.createClass(me,{get:function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(is(r,o[i][0]))return o[i][1];return n},update:function(e,t,r,n,o,i,s){void 0===r&&(r=hash(n));var c=o===a;if(r!==this.keyHash){if(c)return this;return SetRef(s),SetRef(i),mergeIntoNode(this,e,t,r,[n,o])}for(var u=this.entries,l=0,p=u.length;l<p&&!is(n,u[l][0]);l++);var d=l<p;if(d?u[l][1]===o:c)return this;if(SetRef(s),(c||!d)&&SetRef(i),c&&2===p)return new ye(e,this.keyHash,u[1^l]);var f=e&&e===this.ownerID,h=f?u:arrCopy(u);if(d?c?l===p-1?h.pop():h[l]=h.pop():h[l]=[n,o]:h.push([n,o]),f)return this.entries=h,this;return new ge(e,this.keyHash,h)}},{});var ye=function ValueNode(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r},ve=ye;t.createClass(ye,{get:function(e,t,r,n){return is(r,this.entry[0])?this.entry[1]:n},update:function(e,t,r,n,o,i,s){var c=o===a,u=is(n,this.entry[0]);if(u?o===this.entry[1]:c)return this;if(SetRef(s),c)return void SetRef(i);if(u){if(e&&e===this.ownerID)return this.entry[1]=o,this;return new ve(e,this.keyHash,[n,o])}return SetRef(i),mergeIntoNode(this,e,t,hash(n),[n,o])}},{}),ue.prototype.iterate=me.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},pe.prototype.iterate=fe.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},ye.prototype.iterate=function(e,t){return e(this.entry)};var be=function MapIterator(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&mapIteratorFrame(e._root)};t.createClass(be,{next:function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,o;if(r.entry){if(0===n)return mapIteratorValue(e,r.entry)}else if(r.entries){if(o=r.entries.length-1,n<=o)return mapIteratorValue(e,r.entries[this._reverse?o-n:n])}else if(o=r.nodes.length-1,n<=o){var i=r.nodes[this._reverse?o-n:n];if(i){if(i.entry)return mapIteratorValue(e,i.entry);t=this._stack=mapIteratorFrame(i,t)}continue}t=this._stack=this._stack.__prev}return iteratorDone()}},{},O);var Ce,_e=o/4,Ee=o/2,we=o/4,Se=function ToKeyedSequence(e,t){this._iter=e,this._useKeys=t,this.size=e.size};t.createClass(Se,{get:function(e,t){return this._iter.get(e,t)},has:function(e){return this._iter.has(e)},valueSeq:function(){return this._iter.valueSeq()},reverse:function(){var e=this,t=reverseFactory(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},map:function(e,t){var r=this,n=mapFactory(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},__iterate:function(e,t){var r=this,n;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?resolveSize(this):0,function(o){return e(o,t?--n:n++,r)}),t)},__iterator:function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(b,t),n=t?resolveSize(this):0;return new O(function(){var o=r.next();return o.done?o:iteratorValue(e,t?--n:n++,o.value,o)})}},{},F),Se.prototype[R]=!0;var Oe=function ToIndexedSequence(e){this._iter=e,this.size=e.size};t.createClass(Oe,{contains:function(e){return this._iter.contains(e)},__iterate:function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(b,t),n=0;return new O(function(){var t=r.next();return t.done?t:iteratorValue(e,n++,t.value,t)})}},{},U);var Te=function ToSetSequence(e){this._iter=e,this.size=e.size};t.createClass(Te,{has:function(e){return this._iter.contains(e)},__iterate:function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(b,t);return new O(function(){var t=r.next();return t.done?t:iteratorValue(e,t.value,t.value,t)})}},{},H);var Pe=function FromEntriesSequence(e){this._iter=e,this.size=e.size};t.createClass(Pe,{entrySeq:function(){return this._iter.toSeq()},__iterate:function(e,t){var r=this;return this._iter.__iterate(function(t){if(t)return validateEntry(t),e(t[1],t[0],r)},t)},__iterator:function(e,t){var r=this._iter.__iterator(b,t);return new O(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n)return validateEntry(n),e===C?t:iteratorValue(e,n[0],n[1],t)}})}},{},F),Oe.prototype.cacheResult=Se.prototype.cacheResult=Te.prototype.cacheResult=Pe.prototype.cacheResult=cacheResultThrough;var Me=function List(e){var t=emptyList();if(null===e||void 0===e)return t;if(isList(e))return e;e=L(e);var r=e.size;if(0===r)return t;if(r>0&&r<o)return makeList(0,r,n,null,new ke(e.toArray()));return t.merge(e)};t.createClass(Me,{toString:function(){return this.__toString("List [","]")},get:function(e,t){if((e=wrapIndex(this,e))<0||e>=this.size)return t;e+=this._origin;var r=listNodeFor(this,e);return r&&r.array[e&i]},set:function(e,t){return updateList(this,e,t)},remove:function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=this._origin=this._capacity=0,this._level=n,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this;return emptyList()},push:function(){var e=arguments,t=this.size;return this.withMutations(function(r){setListBounds(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},pop:function(){return setListBounds(this,0,-1)},unshift:function(){var e=arguments;return this.withMutations(function(t){setListBounds(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},shift:function(){return setListBounds(this,1)},merge:function(){return mergeIntoListWith(this,void 0,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoListWith(this,e,t)},mergeDeep:function(){return mergeIntoListWith(this,deepMerger(void 0),arguments)},mergeDeepWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return mergeIntoListWith(this,deepMerger(e),t)},setSize:function(e){return setListBounds(this,0,e)},slice:function(e,t){var r=this.size;if(wholeSlice(e,t,r))return this;return setListBounds(this,resolveBegin(e,r),resolveEnd(t,r))},__iterator:function(e,t){return new Ne(this,e,t)},__iterate:function(e,t){var r=this,n=0,o=function(t){return e(t,n++,r)},i=getTailOffset(this._capacity);return t?iterateVNode(this._tail,0,i-this._origin,this._capacity-this._origin,o,t)&&iterateVNode(this._root,this._level,-this._origin,i-this._origin,o,t):iterateVNode(this._root,this._level,-this._origin,i-this._origin,o,t)&&iterateVNode(this._tail,0,i-this._origin,this._capacity-this._origin,o,t),n},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this;return makeList(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash)}},{of:function(){return this(arguments)}},re),Me.isList=isList;var Ae="@@__IMMUTABLE_LIST__@@",xe=Me.prototype;xe[Ae]=!0,xe.delete=xe.remove,xe.setIn=ce.setIn,xe.removeIn=ce.removeIn,xe.update=ce.update,xe.updateIn=ce.updateIn,xe.withMutations=ce.withMutations,xe.asMutable=ce.asMutable,xe.asImmutable=ce.asImmutable,xe.wasAltered=ce.wasAltered;var ke=function VNode(e,t){this.array=e,this.ownerID=t},Re=ke;t.createClass(ke,{removeBefore:function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var o=r>>>t&i;if(o>=this.array.length)return new Re([],e);var a=0===o,s;if(t>0){var c=this.array[o];if((s=c&&c.removeBefore(e,t-n,r))===c&&a)return this}if(a&&!s)return this;var u=editableVNode(this,e);if(!a)for(var l=0;l<o;l++)u.array[l]=void 0;return s&&(u.array[o]=s),u},removeAfter:function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var o=r-1>>>t&i;if(o>=this.array.length)return this;var a=o===this.array.length-1,s;if(t>0){var c=this.array[o];if((s=c&&c.removeAfter(e,t-n,r))===c&&a)return this}if(a&&!s)return this;var u=editableVNode(this,e);return a||u.array.pop(),s&&(u.array[o]=s),u}},{});var Ne=function ListIterator(e,t,r){this._type=t,this._reverse=!!r,this._maxIndex=e.size-1;var n=getTailOffset(e._capacity),o=listIteratorFrame(e._root&&e._root.array,e._level,-e._origin,n-e._origin-1),i=listIteratorFrame(e._tail&&e._tail.array,0,n-e._origin,e._capacity-e._origin-1);this._stack=r?i:o,this._stack.__prev=r?o:i};t.createClass(Ne,{next:function(){for(var e=this._stack;e;){var t=e.array,r=e.index++;if(this._reverse&&(r=i-r)>e.rawMax&&(r=e.rawMax,e.index=o-r),r>=0&&r<o&&r<=e.rawMax){var a=t&&t[r];if(0===e.level){var s=this._type,c;return 1!==s&&(c=e.offset+(r<<e.level),this._reverse&&(c=this._maxIndex-c)),iteratorValue(s,c,a)}this._stack=e=listIteratorFrame(a&&a.array,e.level-n,e.offset+(r<<e.level),e.max,e);continue}e=this._stack=this._stack.__prev}return iteratorDone()}},{},O);var Ie,De=function OrderedMap(e){return null===e||void 0===e?emptyOrderedMap():isOrderedMap(e)?e:emptyOrderedMap().merge(I(e))};t.createClass(De,{toString:function(){return this.__toString("OrderedMap {","}")},get:function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._map.clear(),this._list.clear(),this;return emptyOrderedMap()},set:function(e,t){return updateOrderedMap(this,e,t)},remove:function(e){return updateOrderedMap(this,e,a)},wasAltered:function(){return this._map.wasAltered()||this._list.wasAltered()},__iterate:function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},__iterator:function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this._list=r,this;return makeOrderedMap(t,r,e,this.__hash)}},{of:function(){return this(arguments)}},ae),De.isOrderedMap=isOrderedMap,De.prototype[R]=!0,De.prototype.delete=De.prototype.remove;var Le,je=function Stack(e){return null===e||void 0===e?emptyStack():isStack(e)?e:emptyStack().unshiftAll(e)},ze=je;t.createClass(je,{toString:function(){return this.__toString("Stack [","]")},get:function(e,t){for(var r=this._head;r&&e--;)r=r.next;return r?r.value:t},peek:function(){return this._head&&this._head.value},push:function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};if(this.__ownerID)return this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this;return makeStack(e,t)},pushAll:function(e){if(e=L(e),0===e.size)return this;var t=this.size,r=this._head;if(e.reverse().forEach(function(e){t++,r={value:e,next:r}}),this.__ownerID)return this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this;return makeStack(t,r)},pop:function(){return this.slice(1)},unshift:function(){return this.push.apply(this,arguments)},unshiftAll:function(e){return this.pushAll(e)},shift:function(){return this.pop.apply(this,arguments)},clear:function(){if(0===this.size)return this;if(this.__ownerID)return this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this;return emptyStack()},slice:function(e,r){if(wholeSlice(e,r,this.size))return this;var n=resolveBegin(e,this.size);if(resolveEnd(r,this.size)!==this.size)return t.superCall(this,ze.prototype,"slice",[e,r]);for(var o=this.size-n,i=this._head;n--;)i=i.next;if(this.__ownerID)return this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this;return makeStack(o,i)},__ensureOwner:function(e){if(e===this.__ownerID)return this;if(!e)return this.__ownerID=e,this.__altered=!1,this;return makeStack(this.size,this._head,e,this.__hash)},__iterate:function(e,t){if(t)return this.toSeq().cacheResult.__iterate(e,t);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},__iterator:function(e,t){if(t)return this.toSeq().cacheResult().__iterator(e,t);var r=0,n=this._head;return new O(function(){if(n){var t=n.value;return n=n.next,iteratorValue(e,r++,t)}return iteratorDone()})}},{of:function(){return this(arguments)}},re),je.isStack=isStack;var qe="@@__IMMUTABLE_STACK__@@",Fe=je.prototype;Fe[qe]=!0,Fe.withMutations=ce.withMutations,Fe.asMutable=ce.asMutable,Fe.asImmutable=ce.asImmutable,Fe.wasAltered=ce.wasAltered;var Be,Ue=function Set(e){return null===e||void 0===e?emptySet():isSet(e)?e:emptySet().union(j(e))};t.createClass(Ue,{toString:function(){return this.__toString("Set {","}")},has:function(e){return this._map.has(e)},add:function(e){return updateSet(this,this._map.set(e,!0))},remove:function(e){return updateSet(this,this._map.remove(e))},clear:function(){return updateSet(this,this._map.clear())},union:function(){var e=arguments;if(0===e.length)return this;return this.withMutations(function(t){for(var r=0;r<e.length;r++)j(e[r]).forEach(function(e){return t.add(e)})})},intersect:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this;e=e.map(function(e){return j(e)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.every(function(e){return e.contains(r)})||t.remove(r)})})},subtract:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return this;e=e.map(function(e){return j(e)});var r=this;return this.withMutations(function(t){r.forEach(function(r){e.some(function(e){return e.contains(r)})&&t.remove(r)})})},merge:function(){return this.union.apply(this,arguments)},mergeWith:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.union.apply(this,t)},sort:function(e){return Ge(sortFactory(this,e))},sortBy:function(e,t){return Ge(sortFactory(this,t,e))},wasAltered:function(){return this._map.wasAltered()},__iterate:function(e,t){var r=this;return this._map.__iterate(function(_,t){return e(t,t,r)},t)},__iterator:function(e,t){return this._map.map(function(_,e){return e}).__iterator(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this;return this.__make(t,e)}},{of:function(){return this(arguments)},fromKeys:function(e){return this(I(e).keySeq())}},oe),Ue.isSet=isSet;var We="@@__IMMUTABLE_SET__@@",He=Ue.prototype;He[We]=!0,He.delete=He.remove,He.mergeDeep=He.merge,He.mergeDeepWith=He.mergeWith,He.withMutations=ce.withMutations,He.asMutable=ce.asMutable,He.asImmutable=ce.asImmutable,He.__empty=emptySet,He.__make=makeSet;var Ve,Ge=function OrderedSet(e){return null===e||void 0===e?emptyOrderedSet():isOrderedSet(e)?e:emptyOrderedSet().union(j(e))};t.createClass(Ge,{toString:function(){return this.__toString("OrderedSet {","}")}},{of:function(){return this(arguments)},fromKeys:function(e){return this(I(e).keySeq())}},Ue),Ge.isOrderedSet=isOrderedSet;var $e=Ge.prototype;$e[R]=!0,$e.__empty=emptyOrderedSet,$e.__make=makeOrderedSet;var Xe,Qe=function Record(e,t){var r=function Record(e){if(!(this instanceof r))return new r(e);this._map=ae(e)},n=Object.keys(e),o=r.prototype=Object.create(Ke);o.constructor=r,t&&(o._name=t),o._defaultValues=e,o._keys=n,o.size=n.length;try{n.forEach(function(e){Object.defineProperty(r.prototype,e,{get:function(){return this.get(e)},set:function(t){invariant(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})})}catch(e){}return r};t.createClass(Qe,{toString:function(){return this.__toString(recordName(this)+" {","}")},has:function(e){return this._defaultValues.hasOwnProperty(e)},get:function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},clear:function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=Object.getPrototypeOf(this).constructor;return e._empty||(e._empty=makeRecord(this,emptyMap()))},set:function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+recordName(this));var r=this._map&&this._map.set(e,t);if(this.__ownerID||r===this._map)return this;return makeRecord(this,r)},remove:function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);if(this.__ownerID||t===this._map)return this;return makeRecord(this,t)},wasAltered:function(){return this._map.wasAltered()},__iterator:function(e,t){var r=this;return I(this._defaultValues).map(function(_,e){return r.get(e)}).__iterator(e,t)},__iterate:function(e,t){var r=this;return I(this._defaultValues).map(function(_,e){return r.get(e)}).__iterate(e,t)},__ensureOwner:function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);if(!e)return this.__ownerID=e,this._map=t,this;return makeRecord(this,t,e)}},{},ee);var Ke=Qe.prototype;Ke.delete=Ke.remove,Ke.merge=ce.merge,Ke.mergeWith=ce.mergeWith,Ke.mergeDeep=ce.mergeDeep,Ke.mergeDeepWith=ce.mergeDeepWith,Ke.update=ce.update,Ke.updateIn=ce.updateIn,Ke.withMutations=ce.withMutations,Ke.asMutable=ce.asMutable,Ke.asImmutable=ce.asImmutable;var Ye=function Range(e,t,r){if(!(this instanceof Je))return new Je(e,t,r);if(invariant(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),e===t&&et)return et;r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1)},Je=Ye;t.createClass(Ye,{toString:function(){if(0===this.size)return"Range []";return"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},get:function(e,t){return this.has(e)?this._start+wrapIndex(this,e)*this._step:t},contains:function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},slice:function(e,t){if(wholeSlice(e,t,this.size))return this;if(e=resolveBegin(e,this.size),(t=resolveEnd(t,this.size))<=e)return et;return new Je(this.get(e,this._end),this.get(t,this._end),this._step)},indexOf:function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},lastIndexOf:function(e){return this.indexOf(e)},take:function(e){return this.slice(0,Math.max(0,e))},skip:function(e){return this.slice(Math.max(0,e))},__iterate:function(e,t){for(var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===e(o,i,this))return i+1;o+=t?-n:n}return i},__iterator:function(e,t){var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;return new O(function(){var a=o;return o+=t?-n:n,i>r?iteratorDone():iteratorValue(e,i++,a)})},__deepEquals:function(e){return e instanceof Je?this._start===e._start&&this._end===e._end&&this._step===e._step:deepEqual(this,e)}},{},U);var Ze=Ye.prototype;Ze.__toJS=Ze.toArray,Ze.first=xe.first,Ze.last=xe.last;var et=Ye(0,0),tt=function Repeat(e,t){if(t<=0&&ot)return ot;if(!(this instanceof rt))return new rt(e,t);this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size&&(ot=this)},rt=tt;t.createClass(tt,{toString:function(){if(0===this.size)return"Repeat []";return"Repeat [ "+this._value+" "+this.size+" times ]"},get:function(e,t){return this.has(e)?this._value:t},contains:function(e){return is(this._value,e)},slice:function(e,t){var r=this.size;return wholeSlice(e,t,r)?this:new rt(this._value,resolveEnd(t,r)-resolveBegin(e,r))},reverse:function(){return this},indexOf:function(e){if(is(this._value,e))return 0;return-1},lastIndexOf:function(e){if(is(this._value,e))return this.size;return-1},__iterate:function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},__iterator:function(e,t){var r=this,n=0;return new O(function(){return n<r.size?iteratorValue(e,n++,r._value):iteratorDone()})},__deepEquals:function(e){return e instanceof rt?is(this._value,e._value):deepEqual(e)}},{},U);var nt=tt.prototype;nt.last=nt.first,nt.has=Ze.has,nt.take=Ze.take,nt.skip=Ze.skip,nt.__toJS=Ze.__toJS;var ot;return{Iterable:P,Seq:z,Collection:Z,Map:ae,OrderedMap:De,List:Me,Stack:je,Set:Ue,OrderedSet:Ge,Record:Qe,Range:Ye,Repeat:tt,is:is,fromJS:fromJS}}module.exports=universalModule()},556:function(module,exports,e){var t={},r=e(20),n=r(t);n.getLocale=function(){return"en"},module.exports=n},584:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function Session(e){var t=e.courseId,r=e.endedAt,n=e.enrollmentEndedAt,o=e.id,i=e.isPrivate,a=e.startedAt;_classCallCheck(this,Session),this.courseId=t,this.endedAt=r,this.enrollmentEndedAt=n,this.id=o,this.isPrivate=i,this.startedAt=a};module.exports=e}.apply(exports,t))&&(module.exports=r)},597:function(module,exports,e){var t,r;t=[e,exports,module,e(1117),e(159),e(1122)],void 0!==(r=function(require,exports,module){"use strict";var t=e(1117),r=e(159),n=e(1122);exports.changeBranchId=function(e,t){var r=t.courseId,n=t.branchId,o=t.ratingValue,i=t.learnerAudience,a=t.reviewCollection;e.dispatch("SET_FEEDBACK_BRANCH_ID",{branchId:n}),e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:a,ratingValue:o,learnerAudience:i}),e.executeAction(exports.getCourseRatingStats,{courseId:r,branchId:n,learnerAudience:i})},exports.getCourseReviews=function(e,t){var r=t.courseId,o=t.branchId,i=t.reviewCollection,a=t.ratingValue,s=t.learnerAudience;return e.dispatch("GET_REVIEWS",{reviewCollection:i}),n.getReviews(r,o,s,i.page,a.value).then(function(t){var r=t.feedbacks,n=t.totalCount;e.dispatch("RECEIVE_REVIEWS",{reviewCollection:i,feedbacks:r,totalCount:n})}).done()},exports.filterCourseReviews=function(e,t){var r=t.courseId,n=t.branchId,o=t.ratingValue,i=t.learnerAudience,a=e.getStore("CourseRatingStore");e.dispatch("FILTER_REVIEWS",{ratingValue:o});var s=a.getReviewCollection();s.isEmpty()&&e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:s,ratingValue:o,learnerAudience:i})},exports.getCourseRatingStats=function(e,r){var o=r.courseId,i=r.branchId,a=r.learnerAudience,s=r.totalCount,c=r.averageRating;return n.getRatingStats(o,i,a).then(function(r){var n={};void 0!==s&&void 0!==c&&(n={totalCount:s,averageRating:c});var o=new t(r,n);e.dispatch("RECEIVE_COURSE_RATING_STATS",{courseRatingStats:o})}).done()},exports.filterCourseRatings=function(e,t){var r=t.courseId,n=t.branchId,o=t.ratingValue,i=t.learnerAudience,a=e.getStore("CourseRatingStore");e.dispatch("FILTER_RATINGS",{learnerAudience:i});var s=a.getReviewCollection(),c=a.getCourseRatingStats();s.isEmpty()&&e.executeAction(exports.getCourseReviews,{courseId:r,branchId:n,reviewCollection:s,ratingValue:o,learnerAudience:i}),c||e.executeAction(exports.getCourseRatingStats,{courseId:r,branchId:n,learnerAudience:i})},exports.receiveMyCourseRating=function(e,t){var r=t.ratingFeedback;e.dispatch("RECEIVE_MY_RATING",{ratingFeedback:r})},exports.postMyCourseRating=function(e,t){var o=t.courseId,i=t.value,a=t.active,s=t.comment,c=new r(i,a,s);return e.executeAction(exports.receiveMyCourseRating,{ratingFeedback:c}),n.postFeedback(o,c)},exports.deleteFeedback=function(e,t){return n.deleteFeedback(t).then(function(){e.dispatch("DELETE_FEEDBACK",t)}).done()}}.apply(exports,t))&&(module.exports=r)},598:function(module,exports,e){var t,r;t=[e,exports,module,e(269)],void 0!==(r=function(require,exports,module){"use strict";var t=e(269);module.exports={AllLearners:{id:"ALL_LEARNERS",label:t("All learners"),eventKey:"all_learners"},Completers:{id:"COMPLETERS",label:t("Completers"),eventKey:"completers"}}}.apply(exports,t))&&(module.exports=r)},675:function(module,exports,e){var t,r;t=[e,exports,module,e(168),e(77)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}function createStoreFromReducer(e,r,n,o){var c,u,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return u=c=function(e){function WrappedReducerStore(t){_classCallCheck(this,WrappedReducerStore);var r=_possibleConstructorReturn(this,e.call(this,t));return r.state=o,r}return _inherits(WrappedReducerStore,e),WrappedReducerStore.prototype.getState=function getState(){return this.state},WrappedReducerStore.prototype.dehydrate=function dehydrate(){return l.dehydrate?l.dehydrate.call(this):this.getState()},WrappedReducerStore.prototype.rehydrate=function rehydrate(e){l.rehydrate?l.rehydrate.call(this,e):this.state=e},WrappedReducerStore}(s),c.storeName=r,c.handlers=n.reduce(function(n,o){return n[o]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.getState(),c=t({type:o},n),u=this.state=e(s,c);if(a){var l=new Date,p=" @ "+i(l.getHours(),2)+":"+i(l.getMinutes(),2)+":"+i(l.getSeconds(),2)+"."+i(l.getMilliseconds(),3),d=r+" action "+c.type+p,f=console.group;try{f.call(console,d)}catch(e){console.log(d)}console.log("%c prev state","color: #9E9E9E; font-weight: bold",s),console.log("%c action","color: #03A9F4; font-weight: bold",c),console.log("%c next state","color: #4CAF50; font-weight: bold",u);try{console.groupEnd()}catch(e){console.log("—— log end ——")}}this.emitChange()},n},{}),u}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=e(168),n=e(77),o=function repeat(e,t){return new Array(t+1).join(e)},i=function pad(e,t){return o("0",t-e.toString().length)+e},a=n.get("enableReducerLogging"),s=function(e){function ReducerStore(){return _classCallCheck(this,ReducerStore),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(ReducerStore,e),ReducerStore.prototype.getState=function getState(){return this.state},ReducerStore.prototype.dehydrate=function dehydrate(){return this.getState()},ReducerStore.prototype.rehydrate=function rehydrate(e){this.state=e},ReducerStore}(r);module.exports=createStoreFromReducer}.apply(exports,t))&&(module.exports=r)},733:function(module,exports){},734:function(module,exports){},735:function(module,exports){},736:function(module,exports){},737:function(module,exports){},738:function(module,exports){},739:function(module,exports){},740:function(module,exports){},741:function(module,exports){},742:function(module,exports){},743:function(module,exports){},744:function(module,exports){},745:function(module,exports){},746:function(module,exports){},747:function(module,exports){},748:function(module,exports){},749:function(module,exports){},758:function(module,exports){},779:function(module,exports){},780:function(module,exports){},781:function(module,exports){},782:function(module,exports){},783:function(module,exports){},784:function(module,exports){},785:function(module,exports){},786:function(module,exports){},787:function(module,exports){},788:function(module,exports){},789:function(module,exports){},790:function(module,exports){},791:function(module,exports){},792:function(module,exports){},793:function(module,exports){},828:function(module,exports,e){var t,r;t=[],void 0!==(r=function(){function HTMLJanitor(e){this.config=e}function isBlockElement(t){return-1!==e.indexOf(t.nodeName)}function isInlineElement(e){return-1!==t.indexOf(e.nodeName)}function createTreeWalker(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],t=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return HTMLJanitor.prototype.clean=function(e){var t=document.createElement("div");return t.innerHTML=e,this._sanitize(t),t.innerHTML},HTMLJanitor.prototype._sanitize=function(e){var t=createTreeWalker(e),r=t.firstChild();if(!r)return;do{var n=r.nodeName.toLowerCase(),o=this.config.tags[n];if(r._sanitized)continue;if(r.nodeType===Node.TEXT_NODE){if(""===r.data.trim()&&(r.previousElementSibling&&isBlockElement(r.previousElementSibling)||r.nextElementSibling&&isBlockElement(r.nextElementSibling))){e.removeChild(r),this._sanitize(e);break}continue}if(r.nodeType===Node.COMMENT_NODE){e.removeChild(r),this._sanitize(e);break}var i=isInlineElement(r),a;i&&(a=Array.prototype.some.call(r.childNodes,isBlockElement));var s=i&&a,c=!!e.parentNode,u=isBlockElement(e)&&isBlockElement(r)&&c;if(!this.config.tags[n]||s||!this.config.keepNestedBlockElements&&u){if("SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName)for(;r.childNodes.length>0;)e.insertBefore(r.childNodes[0],r);e.removeChild(r),this._sanitize(e);break}for(var l=0;l<r.attributes.length;l+=1){var p=r.attributes[l],d=p.name.toLowerCase(),f=o[d],h=!f,m=!0!==f&&p.value!==f;(h||m)&&(r.removeAttribute(p.name),l-=1)}this._sanitize(r),r._sanitized=!0}while(r=t.nextSibling())},HTMLJanitor}.apply(exports,t))&&(module.exports=r)},829:function(module,exports,e){var t,r;t=[e],void 0!==(r=function(require){window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(e){"use strict";function MutationObserver(e){this._watched=[],this._listener=e}function startMutationChecker(e){!function check(){var t=e.takeRecords();t.length&&e._listener(t,e),e._timeout=setTimeout(check,MutationObserver._period)}()}function MutationRecord(t){var r={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(var n in t)has(r,n)&&t[n]!==e&&(r[n]=t[n]);return r}function createMutationSearcher(e,t){var r=clone(e,t);return function(n){var o=n.length,i;t.attr&&r.attr&&findAttributeMutations(n,e,r.attr,t.afilter),(t.kids||t.descendents)&&(i=searchSubtree(n,e,r,t)),(i||n.length!==o)&&(r=clone(e,t))}}function findAttributeMutations(e,t,r,n){for(var o={},i=t.attributes,a,s,c=i.length;c--;)a=i[c],s=a.name,n&&!has(n,s)||(a.value!==r[s]&&e.push(MutationRecord({type:"attributes",target:t,attributeName:s,oldValue:r[s],attributeNamespace:a.namespaceURI})),o[s]=!0);for(s in r)o[s]||e.push(MutationRecord({target:t,type:"attributes",attributeName:s,oldValue:r[s]}))}function searchSubtree(t,r,n,o){function resolveConflicts(e,r,n,i,a){for(var s=e.length-1,c=-~((s-a)/2),u,l,p;p=e.pop();)u=n[p.i],l=i[p.j],o.kids&&c&&Math.abs(p.i-p.j)>=s&&(t.push(MutationRecord({type:"childList",target:r,addedNodes:[u],removedNodes:[u],nextSibling:u.nextSibling,previousSibling:u.previousSibling})),c--),o.attr&&l.attr&&findAttributeMutations(t,u,l.attr,o.afilter),o.charData&&3===u.nodeType&&u.nodeValue!==l.charData&&t.push(MutationRecord({type:"characterData",target:u})),o.descendents&&findMutations(u,l)}function findMutations(r,n){for(var a=r.childNodes,s=n.kids,c=a.length,u=s?s.length:0,l,p,d,f,h,m,g,y=0,v=0,b=0;v<c||b<u;)m=a[v],h=s[b],g=h&&h.node,m===g?(o.attr&&h.attr&&findAttributeMutations(t,m,h.attr,o.afilter),o.charData&&h.charData!==e&&m.nodeValue!==h.charData&&t.push(MutationRecord({type:"characterData",target:m})),p&&resolveConflicts(p,r,a,s,y),o.descendents&&(m.childNodes.length||h.kids&&h.kids.length)&&findMutations(m,h),v++,b++):(i=!0,l||(l={},p=[]),m&&(l[d=getElementId(m)]||(l[d]=!0,-1===(f=indexOfCustomNode(s,m,b))?o.kids&&(t.push(MutationRecord({type:"childList",target:r,addedNodes:[m],nextSibling:m.nextSibling,previousSibling:m.previousSibling})),y++):p.push({i:v,j:f})),v++),g&&g!==a[v]&&(l[d=getElementId(g)]||(l[d]=!0,-1===(f=indexOf(a,g,v))?o.kids&&(t.push(MutationRecord({type:"childList",target:n.node,removedNodes:[g],nextSibling:s[b+1],previousSibling:s[b-1]})),y--):p.push({i:f,j:b})),b++));p&&resolveConflicts(p,r,a,s,y)}var i;return findMutations(r,n),i}function clone(e,t){var r=!0;return function copy(e){var n={node:e};return!t.charData||3!==e.nodeType&&8!==e.nodeType?(t.attr&&r&&1===e.nodeType&&(n.attr=reduce(e.attributes,function(e,r){return t.afilter&&!t.afilter[r.name]||(e[r.name]=r.value),e},{})),r&&(t.kids||t.charData||t.attr&&t.descendents)&&(n.kids=map(e.childNodes,copy)),r=t.descendents):n.charData=e.nodeValue,n}(e)}function indexOfCustomNode(e,t,r){return indexOf(e,t,r,JSCompiler_renameProperty("node"))}function getElementId(e){try{return e.id||(e[r]=e[r]||t++)}catch(r){try{return e.nodeValue}catch(e){return t++}}}function map(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n,e);return r}function reduce(e,t,r){for(var n=0;n<e.length;n++)r=t(r,e[n],n,e);return r}function indexOf(e,t,r,n){for(;r<e.length;r++)if((n?e[r][n]:e[r])===t)return r;return-1}function has(t,r){return t[r]!==e}function JSCompiler_renameProperty(e){return e}MutationObserver._period=30,MutationObserver.prototype={observe:function(e,t){for(var r={attr:!!(t.attributes||t.attributeFilter||t.attributeOldValue),kids:!!t.childList,descendents:!!t.subtree,charData:!(!t.characterData&&!t.characterDataOldValue)},n=this._watched,o=0;o<n.length;o++)n[o].tar===e&&n.splice(o,1);t.attributeFilter&&(r.afilter=reduce(t.attributeFilter,function(e,t){return e[t]=!0,e},{})),n.push({tar:e,fn:createMutationSearcher(e,r)}),this._timeout||startMutationChecker(this)},takeRecords:function(){for(var e=[],t=this._watched,r=0;r<t.length;r++)t[r].fn(e);return e},disconnect:function(){this._watched=[],clearTimeout(this._timeout),this._timeout=null}};var t=1,r="mo_id";return MutationObserver}(void 0)}.apply(exports,t))&&(module.exports=r)},958:function(module,exports,e){var t=e(1681);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},959:function(module,exports,e){var t=e(1682);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},960:function(module,exports,e){var t=e(1683);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},961:function(module,exports,e){var t=e(1684);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},962:function(module,exports,e){var t=e(1685);"string"==typeof t&&(t=[[module.id,t,""]]);var r=e(3)(t,{});t.locals&&(module.exports=t.locals)},1056:function(module,exports,e){var t,r;t=[e,exports,module,e(239),e(675)],void 0!==(r=function(require,exports,module){"use strict";function branchSelection(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1],n=Object.assign({},e);switch(r.type){case"SELECT_BRANCH":return t({},n,{selection:r.branchId});case"LOAD_BRANCH":return t({},n,{branch:r.branch});default:return n}}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r=e(239),n=r.storeNames,o=e(675),i={selection:null};exports.store=o(branchSelection,n.BRANCH_SELECTION_STORE,["SELECT_BRANCH","LOAD_BRANCH"],i),exports.reducer=branchSelection}.apply(exports,t))&&(module.exports=r)},1057:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(239),e(675)],void 0!==(r=function(require,exports,module){"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function branches(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1],n=Object.assign({},e);switch(r.type){case"ON_BRANCHES_LOADING":return t({},n,{loadingAll:!0,loadedAll:!1});case"ON_BRANCHES_LOAD_SUCCESS":return t({},n,{loadingAll:!1,loadedAll:!0,branches:_(r.branches).indexBy("id")});case"SAVE_BRANCH":return t({},n,{branches:Object.assign({},n.branches,_defineProperty({},r.branchId,Object.assign({},r.branch,{id:r.branchId})))});case"SAVE_DRAFTS_FOR_BRANCH":return t({},n,{drafts:Object.assign({},n.drafts,_defineProperty({},r.branchId,r.drafts))});case"SAVE_CONFLICT_METADATA_FOR_BRANCH":case"VALIDATE_BRANCH":case"ON_BRANCH_CREATING":case"ON_BRANCH_UPDATE_SUCCESS":case"ON_BRANCH_UPDATE_FAILURE":case"ON_BRANCH_DELETING":case"ON_BRANCH_DELETE_SUCCESS":default:return n}}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_=e(2),r=e(239),n=r.storeNames,o=e(675),i={branches:{},drafts:{}};exports.store=o(branches,n.BRANCHES_STORE,["ON_BRANCHES_LOADING","ON_BRANCHES_LOAD_SUCCESS","ON_BRANCH_CREATING","ON_BRANCH_UPDATE_SUCCESS","ON_BRANCH_UPDATE_FAILURE","SAVE_BRANCH","ON_BRANCH_DELETING","ON_BRANCH_DELETE_SUCCESS","SAVE_CONFLICT_METADATA_FOR_BRANCH","SAVE_DRAFTS_FOR_BRANCH"],i),exports.reducer=branches}.apply(exports,t))&&(module.exports=r)},1058:function(module,exports,e){var t,r;t=[e,exports,module,e(101)],void 0!==(r=function(require,exports,module){"use strict";var t=e(101),r=t({storeName:"BranchPropertiesStore",initialize:function initialize(){this.branchPropertiesById={},this.conflictMetadataById={}},getAllBranchProperties:function getAllBranchProperties(){return this.branchPropertiesById},getAllConflictMetadata:function getAllConflictMetadata(){return this.conflictMetadataById},getBranchPropertiesById:function getBranchPropertiesById(e){return this.branchPropertiesById[e]},getConflictMetadataById:function getConflictMetadataById(e){return this.conflictMetadataById[e]},updateBranchProperties:function updateBranchProperties(e,t){this.branchPropertiesById[e]=t,this.branchPropertiesById[e].id=e},updateConflictMetadata:function updateConflictMetadata(e,t){this.conflictMetadataById[e]=t}});r.handlers={RECEIVED_BRANCHES_FOR_COURSE:function RECEIVED_BRANCHES_FOR_COURSE(e){var t=this;e.forEach(function(e){var r=e.id,n=e.properties,o=e.conflictMetadata;t.updateBranchProperties(r,n),t.updateConflictMetadata(r,o)}),this.emitChange()},RECEIVED_BRANCH_PROPERTIES:function RECEIVED_BRANCH_PROPERTIES(e){var t=e.branchId,r=e.properties;this.updateBranchProperties(t,r),this.emitChange()},SAVE_CONFLICT_METADATA_FOR_BRANCH:function SAVE_CONFLICT_METADATA_FOR_BRANCH(e){var t=e.branchId,r=e.conflictMetadata;this.updateConflictMetadata(t,r),this.emitChange()},SAVE_BRANCH:function SAVE_BRANCH(e){var t=e.branchId,r=e.conflictMetadata;this.updateConflictMetadata(t,r),this.emitChange()}},module.exports=r}.apply(exports,t))&&(module.exports=r)},1059:function(module,exports,e){var t,r;t=[e,exports,module,e(1061)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),r=e(1061),n=function(){function AuthoringCourse(e){var t=e.description,n=e.domainTypes,o=e.faqs,i=e.headerImage,a=e.id,s=e.instructorIds,c=e.isPrivate,u=e.isReal,l=e.isRestrictedMembership,p=e.isSubtitleTranslationEnabled,d=e.isVerificationEnabled,f=e.launchedAt,h=e.level,m=e.name,g=e.overridePartnerLogos,y=e.partners,v=e.partnerIds,b=e.premiumExperiences,C=e.previewUserIds,E=e.primaryLanguageCodes,w=e.promoPhoto,S=e.s3Prefix,O=e.sessionSchedule,T=e.sessionsEnabledAt,P=e.slug,M=e.subtitleLanguageCodes;_classCallCheck(this,AuthoringCourse),this.description=t,this.domainTypes=n,this.faqs=o,this.headerImage=i,this.id=a,this.isPrivate=c,this.isReal=u,this.isRestrictedMembership=l,this.isSubtitleTranslationEnabled=p,this.isVerificationEnabled=d,this.launchedAt=f,this.name=m,this.overridePartnerLogos=g,this.partners=y&&y.map(function(e){return new r(e)}),this.partnerIds=v,this.premiumExperiences=b,this.previewUserIds=C,this.primaryLanguageCodes=E,this.promoPhoto=w,this.s3Prefix=S,this.sessionSchedule=O,this.sessionsEnabledAt=T,this.slug=P,this.subtitleLanguageCodes=M}return AuthoringCourse.prototype.get=function get(e){return this[e]},t(AuthoringCourse,[{key:"universities",get:function get(){return this.partners}},{key:"isLaunched",get:function get(){return!!this.launchedAt&&this.launchedAt<=Date.now()}}]),AuthoringCourse}();module.exports=n}.apply(exports,t))&&(module.exports=r)},1060:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(584)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(2),t=e(584),r=function AuthoringCourseBranch(e){var r=e.associatedSessions,n=e.branchStatus,o=e.changesDescription,i=e.courseBranchId,a=e.courseId,s=e.createdAt,c=e.id,u=e.isPrivate,l=e.listed,p=e.name;_classCallCheck(this,AuthoringCourseBranch),this.associatedSessions=_(r).mapObject(function(e){return new t(e)}),this.branchStatus=n,this.changesDescription=o,this.courseBranchId=i,this.courseId=a,this.createdAt=s,this.id=c,this.isPrivate=u,this.listed=l,this.name=p};module.exports=r}.apply(exports,t))&&(module.exports=r)},1061:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var e=function Partner(e){var t=e.id,r=e.name,n=e.shortName,o=e.squareLogo;_classCallCheck(this,Partner),this.id=t,this.name=r,this.shortName=n,this.squareLogo=o};module.exports=e}.apply(exports,t))&&(module.exports=r)},1104:function(module,exports,e){var t,r;t=[e,exports,module,e(1057),e(1058),e(1056),e(1121),e(1415),e(164),e(208)],void 0!==(r=function(require,exports,module){"use strict";var t=e(1057).store,r=e(1058),n=e(1056).store,o=e(1121),i=e(1415),a=e(164),s=e(208),c=new s;c.registerStore(t),c.registerStore(r),c.registerStore(n),c.registerStore(i),c.registerStore(o),c.registerStore(a),module.exports=c}.apply(exports,t))&&(module.exports=r)},1105:function(module,exports,e){var t,r;t=[e,exports,module,e(24)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=new t("/api/courseFeedbackCommentCounts.v1",{type:"rest"});module.exports=r}.apply(exports,t))&&(module.exports=r)},1106:function(module,exports,e){var t,r;t=[e,exports,module,e(24)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=new t("/api/courseFeedbackCounts.v1",{type:"rest"});module.exports=r}.apply(exports,t))&&(module.exports=r)},1107:function(module,exports,e){var t,r;t=[e,exports,module,e(24)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=new t("/api/feedback.v1",{type:"rest"});module.exports=r}.apply(exports,t))&&(module.exports=r)},1108:function(module,exports,e){var t,r;t=[e,exports,module,e(24)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=new t("/api/feedbackAdmin.v1",{type:"rest"});module.exports=r}.apply(exports,t))&&(module.exports=r)},1109:function(module,exports,e){var t,r;t=[e,exports,module,e(24)],void 0!==(r=function(require,exports,module){"use strict";var t=e(24),r=new t("/api/myFeedback.v1",{type:"rest"});module.exports=r}.apply(exports,t))&&(module.exports=r)},1110:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(959)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1);e(959);var o=(r=t=function(e){function FeedbackComplete(){return _classCallCheck(this,FeedbackComplete),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(FeedbackComplete,e),FeedbackComplete.prototype.componentDidMount=function componentDidMount(){var e=this;this._hideCompleteTimer=setTimeout(function(){e.props.onTimeout()},this.props.hideDelay)},FeedbackComplete.prototype.componentWillUnmount=function componentWillUnmount(){this._hideCompleteTimer&&clearTimeout(this._hideCompleteTimer)},FeedbackComplete.prototype.render=function render(){return n.createElement("div",{className:"rc-FeedbackComplete"},this.props.children)},FeedbackComplete}(n.Component),t.propTypes={hideDelay:n.PropTypes.number,onTimeout:n.PropTypes.func.isRequired},t.defaultProps={hideDelay:3e3},r);module.exports=o}.apply(exports,t))&&(module.exports=r)},1111:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(450),e(223),e(960)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(450),i=e(223);e(960);var a=(r=t=function(e){function FeedbackEditor(){return _classCallCheck(this,FeedbackEditor),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(FeedbackEditor,e),FeedbackEditor.prototype.render=function render(){return n.createElement("div",{className:"rc-FeedbackEditor"},n.createElement(o,{blocks:[],changeDelay:0,cml:this.props.cml,onChange:this.props.onChange,isFocused:this.props.isFocused,placeholder:this.props.placeholder}))},FeedbackEditor}(n.Component),t.propTypes={cml:i.isRequired,placeholder:n.PropTypes.string.isRequired,onChange:n.PropTypes.func.isRequired,isFocused:n.PropTypes.bool.isRequired},r);module.exports=a}.apply(exports,t))&&(module.exports=r)},1112:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(184),e(277),e(1114),e(1110),e(597),e(131),e(8),e(86),e(79),e(159),e(269)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r,n,o=e(1),i=e(184),a=e(277),s=e(1114),c=e(1110),u=e(597),l=u.postMyCourseRating,p=e(131),d=e(8),f=d.FormattedHTMLMessage,h=e(86),m=e(79),g=m.Tooltip,y=m.OverlayTrigger,v=e(159),b=e(269),C=(n=r=function(e){function CourseRatingContent(){var t,r,n;_classCallCheck(this,CourseRatingContent);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(a))),r.state={showModal:!1,showMessage:!1,message:""},r.handleClick=function(e){e.preventDefault(),r.context.track("click.rating"),r.setState({showModal:!0})},r.handleClose=function(){r.context.track("click.cancel"),r.setState({showModal:!1})},r.handleSubmit=function(e,t){var n=r.props.course,i=r.getCourseNameAndId(n),a=i.courseId,s=i.courseName;r.setState({showModal:!1,showMessage:!0,message:o.createElement(f,{message:b("Your review of <strong>{courseName}</strong> has been submitted."),courseName:s})}),r.context.executeAction(l,{courseId:a,value:e,active:!0,comment:t}),r.context.track("click.submit",{feedback_length:p.getLength(t),feedback_value:e})},r.handleClear=function(){var e=r.props.course,t=r.getCourseNameAndId(e),n=t.courseId,i=t.courseName;r.setState({showModal:!1,showMessage:!0,message:o.createElement(f,{message:b("Your review of <strong>{courseName}</strong> has been removed."),courseName:i})}),r.context.executeAction(l,{courseId:n,value:0,active:!1,comment:p.create("")}),r.context.track("click.clear")},r.handleMessageTimeout=function(){r.setState({showMessage:!1})},n=t,_possibleConstructorReturn(r,n)}return _inherits(CourseRatingContent,e),CourseRatingContent.prototype.getCourseNameAndId=function getCourseNameAndId(e){var t=!!e.get;return{courseId:t?e.get("id"):e.id,courseName:t?e.get("name"):e.name}},CourseRatingContent.prototype.render=function render(){var e=b("Rate this course"),r=o.createElement(g,null,e);if(!this.props.ratingFeedback)return o.createElement("div",null);return o.createElement("div",{className:"rc-CourseRatingContent"},o.createElement(y,{placement:"top",overlay:r},o.createElement("button",{ref:"icons",className:"c-course-rating-icons-container nostyle button-link",onClick:this.handleClick},o.createElement(a,{value:this.props.ratingFeedback.value}))),this.state.showModal&&o.createElement(s,t({},this.props,{onSubmit:this.handleSubmit,onClear:this.handleClear,onClose:this.handleClose})),o.createElement(i,{transitionName:"fade",transitionEnterTimeout:500,transitionLeaveTimeout:500},this.state.showMessage&&o.createElement(c,{key:"feedback-complete",onTimeout:this.handleMessageTimeout},this.state.message)))},CourseRatingContent}(o.Component),r.propTypes={course:o.PropTypes.object.isRequired,ratingFeedback:o.PropTypes.instanceOf(v)},r.contextTypes={executeAction:o.PropTypes.func.isRequired,track:o.PropTypes.func.isRequired},n);module.exports=h(C,["CourseRatingStore"],function(e,t){return{ratingFeedback:e.CourseRatingStore.getMyRatingFeedback()}}),module.exports.BaseComp=C}.apply(exports,t))&&(module.exports=r)},1113:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(42),e(961)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(1),o=e(42);e(961);var i=(r=t=function(e){function CourseRatingHeader(){return _classCallCheck(this,CourseRatingHeader),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CourseRatingHeader,e),CourseRatingHeader.prototype.render=function render(){var e=void 0,t="",r="",i="";if(this.props.catalogPCourse){var a=this.props.catalogPCourse;if(a.get)t=a.get("photoUrl"),e=a.get("partners"),r=e?e.at(0).get("name"):"",i=a.get("name");else{var s=a;t=s.photoUrl,i=s.name}}else{var c=this.props.openCourse;t=c.get("promoPhoto"),e=c.get("universities"),r=e.models&&e.models[0]&&e.models[0].get("name")||"",i=c.get("name")}return n.createElement("div",{className:"rc-CourseRatingHeader"},n.createElement(o,{width:200,alt:o.DECORATIVE,imgParams:{fit:"fit"},src:t,className:"c-course-rating-header-img"}),n.createElement("div",{className:"c-course-rating-header-content"},n.createElement("div",{className:"body-2-text"},r),n.createElement("h3",null,i)))},CourseRatingHeader}(n.Component),t.propTypes={catalogPCourse:n.PropTypes.object,openCourse:n.PropTypes.object},r);module.exports=i}.apply(exports,t))&&(module.exports=r)},1114:function(module,exports,e){var t,r;t=[e,exports,module,e(6),e(1),e(277),e(1111),e(159),e(131),e(28),e(1113),e(8),e(269),e(962)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o=e(6),i=e(1),a=e(277),s=e(1111),c=e(159),u=e(131),l=e(28),p=e(1113),d=e(8),f=d.FormattedHTMLMessage,h=e(269);e(962);var m=(r=t=function(e){function CourseRatingModal(t,r){_classCallCheck(this,CourseRatingModal);var o=_possibleConstructorReturn(this,e.call(this,t,r));n.call(o);var i=t.ratingFeedback,a=i.comment,s=i.value;return o.state={comment:a||u.create(),value:s},o}return _inherits(CourseRatingModal,e),CourseRatingModal.prototype.render=function render(){var e=0!==this.state.value,t=o("teach-btn","teach-btn-primary","c-course-rating-submit",{disabled:!e}),r=o("c-course-rating-clear","teach-btn","teach-btn-dark");return i.createElement(l,{className:"rc-CourseRatingModal",modalName:h("Rate this course"),handleClose:this.props.onClose},i.createElement(p,{catalogPCourse:this.props.course}),i.createElement("h3",null,h("Your review")),i.createElement(a,{size:"large",readOnly:!1,value:this.state.value,onClear:this.handleClear,onSelect:this.handleSelect}),i.createElement(s,{isFocused:!0,cml:this.state.comment,placeholder:h("Write your review (optional)"),onChange:this.handleChange}),i.createElement("div",{className:"body-1-text c-course-rating-disclaimer"},i.createElement(f,{message:h('By clicking Submit, I agree that my feedback may be viewed by the Coursera community,\n              in compliance with the Coursera <a href="https://www.coursera.org/about/terms" target="_blank">\n              Terms of Use</a> and My Profile privacy settings.')})),i.createElement("button",{title:h("Submit course review"),className:t,onClick:this.handleSubmit,disabled:!e},h("Submit")),!!this.props.ratingFeedback.value&&i.createElement("button",{title:h("Remove course review"),className:r,onClick:this.handleClear},h("Clear")))},CourseRatingModal}(i.Component),t.propTypes={course:i.PropTypes.object.isRequired,ratingFeedback:i.PropTypes.instanceOf(c).isRequired,onClose:i.PropTypes.func.isRequired,onSubmit:i.PropTypes.func.isRequired,onClear:i.PropTypes.func.isRequired},n=function _initialiseProps(){var e=this;this.handleChange=function(t){e.setState({comment:t})},this.handleSubmit=function(){e.props.onSubmit(e.state.value,e.state.comment)},this.handleClear=function(){e.props.onClear()},this.handleSelect=function(t){e.setState({value:t})}},r);module.exports=m}.apply(exports,t))&&(module.exports=r)},1115:function(module,exports,e){var t,r;t=[e,exports,module],void 0!==(r=function(require,exports,module){"use strict";module.exports={Like:"LIKE_OR_DISLIKE",Flag:"FLAG",Rating:"STAR"}}.apply(exports,t))&&(module.exports=r)},1116:function(module,exports,e){var t,r;t=[e,exports,module,e(269)],void 0!==(r=function(require,exports,module){"use strict";var t=e(269);module.exports=[{value:-1,label:t("All reviews")},{value:5,label:t("5 star")},{value:4,label:t("4 star")},{value:3,label:t("3 star")},{value:2,label:t("2 star")},{value:1,label:t("1 star")}]}.apply(exports,t))&&(module.exports=r)},1117:function(module,exports,e){var t,r;t=[e,exports,module,e(2)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=e(2),t=function(){function CourseRatingStats(e,t){var r=this;_classCallCheck(this,CourseRatingStats),this.counts=e,this.totalCount=0,this.averageRating=0,_(this.counts).each(function(e,t){r.totalCount=r.totalCount+e,r.averageRating=r.averageRating+t*e}),this.averageRating=parseFloat((this.averageRating/this.totalCount).toFixed(1)),t&&Object.assign(this,t)}return CourseRatingStats.prototype.getCount=function getCount(e){return this.counts[e.value]||0},CourseRatingStats.prototype.getPercent=function getPercent(e){if(!this.totalCount)return 0;return Math.round(this.getCount(e)/this.totalCount*100)},CourseRatingStats}();module.exports=t}.apply(exports,t))&&(module.exports=r)},1118:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(1116),e(598),e(1120),e(239)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_=e(2),r=e(1116),n=e(598),o=e(1120),i=e(239),a=i.ALL_BRANCHES,s=function(){function CourseRatings(){_classCallCheck(this,CourseRatings),this.ratingValue=_(r).find(function(e){return-1===e.value}),this.learnerAudience=_(n).find(function(e){return"ALL_LEARNERS"===e.id}),this.branchId=a,this.statsMap={},this.reviewCollectionsMap={},this.initMapsForBranchId(a)}return CourseRatings.prototype.initMapsForBranchId=function initMapsForBranchId(e){var t=this;this.statsMap[e]={},this.reviewCollectionsMap[e]={},_(n).each(function(n){var i=n.id,a={};_(r).each(function(e){a[e.value]=new o}),t.statsMap[e][i]=null,t.reviewCollectionsMap[e][i]=a})},CourseRatings.prototype.setBranchId=function setBranchId(e){this.branchId=e,this.statsMap[e]||this.initMapsForBranchId(e)},CourseRatings.prototype.setRatingValue=function setRatingValue(e){this.ratingValue=e},CourseRatings.prototype.setLearnerAudience=function setLearnerAudience(e){this.learnerAudience=e},CourseRatings.prototype.appendReviews=function appendReviews(e,t){var r=this.reviewCollection;r.appendPage(e),r.setTotalCount(t)},CourseRatings.prototype.deleteReview=function deleteReview(e){_(this.reviewCollectionsMap).each(function(t){return _(t).each(function(t){t.models=_(t.models).filter(function(t){return t.id!==e})})})},CourseRatings.prototype.setStats=function setStats(e){this.statsMap[this.branchId][this.learnerAudience.id]=e},t(CourseRatings,[{key:"reviewCollection",get:function get(){return this.reviewCollectionsMap[this.branchId][this.learnerAudience.id][this.ratingValue.value]}},{key:"stats",get:function get(){return this.statsMap[this.branchId][this.learnerAudience.id]}}]),CourseRatings}();module.exports=s}.apply(exports,t))&&(module.exports=r)},1120:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(159)],void 0!==(r=function(require,exports,module){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),_=e(2),r=e(159),n=function(){function RatingCollection(){_classCallCheck(this,RatingCollection),this.models=[],this.page=0,this.totalCount=0}return RatingCollection.prototype.isEmpty=function isEmpty(){return 0===this.models.length},RatingCollection.prototype.setTotalCount=function setTotalCount(e){this.totalCount=e},RatingCollection.prototype.appendPage=function appendPage(e){var t=this;_(e).each(function(e){var n=e.rating,o=e.timestamp,i=e.id,a=new r(n.value,n.active,e.comments.generic,o,i);t.models.push(a)}),this.page+=1},t(RatingCollection,[{key:"length",get:function get(){return this.models.length}},{key:"hasPendingPage",get:function get(){return this.totalCount!==this.length}}]),RatingCollection}();module.exports=n}.apply(exports,t))&&(module.exports=r)},1121:function(module,exports,e){var t,r;t=[e,exports,module,e(2),e(101),e(1118)],void 0!==(r=function(require,exports,module){"use strict";var _=e(2),t=e(101),r=e(1118),n=t({storeName:"CourseRatingStore",initialize:function initialize(){this.myRatingFeedback=null,this.isLoadingReviews=!1,this.courseRatings=new r},getMyRatingFeedback:function getMyRatingFeedback(){return this.myRatingFeedback},getReviewCollection:function getReviewCollection(){return this.courseRatings.reviewCollection},getBranchId:function getBranchId(){return this.courseRatings.branchId},getRatingValue:function getRatingValue(){return this.courseRatings.ratingValue},getLearnerAudience:function getLearnerAudience(){return this.courseRatings.learnerAudience},getCourseRatingStats:function getCourseRatingStats(){return this.courseRatings.stats},getIsLoadingReviews:function getIsLoadingReviews(){return this.isLoadingReviews}});n.handlers={GET_REVIEWS:function GET_REVIEWS(e,t){var r=e.reviewCollection;this.isLoadingReviews=!0,this.emitChange()},RECEIVE_REVIEWS:function RECEIVE_REVIEWS(e,t){var r=e.feedbacks,n=e.totalCount;this.isLoadingReviews=!1,this.courseRatings.appendReviews(r,n),this.emitChange()},DELETE_FEEDBACK:function DELETE_FEEDBACK(e){this.courseRatings.deleteReview(e),this.emitChange()},FILTER_REVIEWS:function FILTER_REVIEWS(e,t){var r=e.ratingValue;this.courseRatings.setRatingValue(r),this.emitChange()},RECEIVE_COURSE_RATING_STATS:function RECEIVE_COURSE_RATING_STATS(e,t){var r=e.courseRatingStats;this.courseRatings.setStats(r),this.emitChange()},FILTER_RATINGS:function FILTER_RATINGS(e,t){var r=e.learnerAudience;this.courseRatings.setLearnerAudience(r),this.emitChange()},RECEIVE_MY_RATING:function RECEIVE_MY_RATING(e,t){var r=e.ratingFeedback;this.myRatingFeedback=r,this.emitChange()},SET_FEEDBACK_BRANCH_ID:function SET_FEEDBACK_BRANCH_ID(e,t){var r=e.branchId;this.courseRatings.setBranchId(r),this.emitChange()}},module.exports=n}.apply(exports,t))&&(module.exports=r)},1122:function(module,exports,e){var t,r;t=[e,exports,module,e(4),e(2),e(1109),e(1107),e(1106),e(1105),e(1108),e(1115),e(598),e(10),e(239)],void 0!==(r=function(require,exports,module){"use strict";var t=e(4),_=e(2),r=e(1109),n=e(1107),o=e(1106),i=e(1105),a=e(1108),s=e(1115),c=e(598),u=e(10),l=e(239),p=l.ALL_BRANCHES,d={getRatingStats:function getRatingStats(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.AllLearners,i=(new u).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues","1,2,3,4,5").addQueryParam("countBy","ratingValue");return r!==p&&i.addQueryParam("courseBranchId",r),n.id===c.Completers.id&&i.addQueryParam("courseCompleted",!0),t(o.get(i.toString())).then(function(e){return e.elements[0].counts})},getReviewStats:function getReviewStats(e){var r=(new u).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues","1,2,3,4,5").addQueryParam("categories","generic").addQueryParam("countBy","category");return t(i.get(r.toString())).then(function(e){return e.elements[0].counts})},getReviews:function getReviews(e,r,o,i,a){var l=10,d=(new u).addQueryParam("q","course").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating).addQueryParam("ratingValues",-1===a?"1,2,3,4,5":a).addQueryParam("categories","generic").addQueryParam("start",10*i).addQueryParam("limit",10);return r!==p&&d.addQueryParam("courseBranchId",r),o.id===c.Completers.id&&d.addQueryParam("courseCompleted",!0),t(n.get(d.toString())).then(function(e){return{feedbacks:e.elements,totalCount:e.paging.total}})},getFeedback:function getFeedback(e){var n=(new u).addQueryParam("q","course").addQueryParam("courseId",e);return t(r.get(n.toString())).then(function(e){return e.elements[0]})},multiGetStarFeedback:function multiGetStarFeedback(e){var n=20,o=_(e).chain().groupBy(function(e,t){return Math.floor(t/20)}).toArray().value(),i=_(o).map(function(e){var n=(new u).addQueryParam("q","byCourseAndFeedback").addQueryParam("courseIds",e.join(",")).addQueryParam("feedbackSystem","STAR");return t(r.get(n.toString())).then(function(e){return e.elements})});return t.all(i).then(function(e){return _(e).flatten()})},postFeedback:function postFeedback(e,n){var o=(new u).addQueryParam("action","submit").addQueryParam("courseId",e).addQueryParam("feedbackSystem",s.Rating);return t(r.post(o.toString(),{data:n.toObject()}))},deleteFeedback:function deleteFeedback(e){var r=(new u).addQueryParam("action","hide").addQueryParam("feedbackId",e);return t(a.post(r.toString()))}};module.exports=d}.apply(exports,t))&&(module.exports=r)},1415:function(module,exports,e){var t,r;t=[e,exports,module,e(168),e(584),e(1059),e(1060)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n=e(168),o=e(584),i=e(1059),a=e(1060),s=(r=t=function(e){function TeachAppStore(){var t,r,n;_classCallCheck(this,TeachAppStore);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=_possibleConstructorReturn(this,e.call.apply(e,[this].concat(i))),r.course=null,r.courseRole="BROWSER",r.sessions=[],r.branches=[],n=t,_possibleConstructorReturn(r,n)}return _inherits(TeachAppStore,e),TeachAppStore.prototype.getCourse=function getCourse(){return this.course},TeachAppStore.prototype.getCourseRole=function getCourseRole(){return this.courseRole},TeachAppStore.prototype.getSessions=function getSessions(){return this.sessions},TeachAppStore.prototype.getBranches=function getBranches(){return this.branches},TeachAppStore.prototype.hasPrivateBranch=function hasPrivateBranch(){return!!this.branches.find(function(e){return e.isPrivate})},TeachAppStore.prototype.getBranchForSession=function getBranchForSession(e){return this.branches.find(function(t){return!!t.associatedSessions[e]})},TeachAppStore}(n),t.storeName="TeachAppStore",t.handlers={RECEIVE_COURSE:function RECEIVE_COURSE(e){this.course=new i(e),this.emitChange()},RECEIVE_MEMBERSHIP_FOR_COURSE:function RECEIVE_MEMBERSHIP_FOR_COURSE(e){this.courseRole=e,this.emitChange()},RECEIVE_SESSIONS_FOR_COURSE:function RECEIVE_SESSIONS_FOR_COURSE(e){this.sessions=e.map(function(e){return new o(e)}),this.emitChange()},RECEIVE_BRANCHES_FOR_COURSE:function RECEIVE_BRANCHES_FOR_COURSE(e){this.branches=e.map(function(e){return new a(e)}),this.emitChange()}},r);module.exports=s}.apply(exports,t))&&(module.exports=r)},1681:function(module,exports){},1682:function(module,exports){},1683:function(module,exports){},1684:function(module,exports){},1685:function(module,exports){},1865:function(module,exports,e){var t,r;t=[e,exports,module,e(1),e(64),e(597),e(1112),e(1104),e(140),e(126),e(159),e(958)],void 0!==(r=function(require,exports,module){"use strict";function _defaults(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<r.length;n++){var o=r[n],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var t,r,n,o,i=e(1),a=e(64),s=e(597),c=s.receiveMyCourseRating,u=e(1112),l=e(1104),p=e(140),d=e(126),f=e(159);e(958);var h=(r=t=function(e){function CourseRating(){return _classCallCheck(this,CourseRating),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(CourseRating,e),CourseRating.prototype.componentDidMount=function componentDidMount(){this.context.executeAction(c,{ratingFeedback:this.props.ratingFeedback})},CourseRating.prototype.render=function render(){if(!a.get("authenticated"))return null;return i.createElement("div",{className:"rc-CourseRating"},i.createElement(u,{course:this.props.course}))},CourseRating}(i.Component),t.propTypes={course:i.PropTypes.object.isRequired,ratingFeedback:i.PropTypes.instanceOf(f).isRequired},t.contextTypes={executeAction:i.PropTypes.func.isRequired},r),m=(o=n=function(e){function TrackedCourseRating(){return _classCallCheck(this,TrackedCourseRating),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(TrackedCourseRating,e),TrackedCourseRating.prototype.getChildContext=function getChildContext(){var e=this.props.course,t=e.get?e.get("id"):e.id;return{track:p.makeTracker({namespace:"content_learner.rating_course",include:{course_id:t}})}},TrackedCourseRating.prototype.render=function render(){return i.createElement(h,this.props)},TrackedCourseRating}(i.Component),n.propTypes={course:i.PropTypes.object.isRequired,ratingFeedback:i.PropTypes.instanceOf(f).isRequired},n.childContextTypes={track:i.PropTypes.func},o),g=function(e){function FluxibleCourseRating(){return _classCallCheck(this,FluxibleCourseRating),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(FluxibleCourseRating,e),FluxibleCourseRating.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=l.createContext()},FluxibleCourseRating.prototype.render=function render(){return i.createElement(d,{context:this.fluxibleContext.getComponentContext()},i.createElement(m,this.props))},FluxibleCourseRating}(i.Component);module.exports=g}.apply(exports,t))&&(module.exports=r)}});